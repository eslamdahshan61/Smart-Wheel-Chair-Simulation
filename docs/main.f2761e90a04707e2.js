"use strict";(self.webpackChunkmyapp1=self.webpackChunkmyapp1||[]).push([[179],{2011:(ut,Ie,F)=>{F.d(Ie,{Dh:()=>_e,GT:()=>ge,cc:()=>je,on:()=>De,pX:()=>ae,xv:()=>le});var p=F(5e3),L=F(127);ut=F.hmd(ut);const O=["ngOnDestroy"],ae=(Q,ve,He,Ve={})=>new Proxy(Q,{get:(we,me)=>He.runOutsideAngular(()=>{var ue;if(Q[me])return(null===(ue=null==Ve?void 0:Ve.spy)||void 0===ue?void 0:ue.get)&&Ve.spy.get(me,Q[me]),Q[me];if(O.indexOf(me)>-1)return()=>{};const ke=ve.toPromise().then(K=>{const Ue=K&&K[me];return"function"==typeof Ue?Ue.bind(K):Ue&&Ue.then?Ue.then(Ke=>He.run(()=>Ke)):He.run(()=>Ue)});return new Proxy(()=>{},{get:(K,Ue)=>ke[Ue],apply:(K,Ue,Ke)=>ke.then(J=>{var Y;const X=J&&J(...Ke);return(null===(Y=null==Ve?void 0:Ve.spy)||void 0===Y?void 0:Y.apply)&&Ve.spy.apply(me,Ke,X),X})})})}),ge=(Q,ve)=>{ve.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Ve=>{Object.defineProperty(Q.prototype,Ve,Object.getOwnPropertyDescriptor(He.prototype||He,Ve))})})};class ye{constructor(ve){return ve}}const _e=new p.OlP("angularfire2.app.options"),le=new p.OlP("angularfire2.app.name");function De(Q,ve,He){const we="object"==typeof He&&He||{};we.name=we.name||"string"==typeof He&&He||"[DEFAULT]";const ue=L.Z.apps.filter(ke=>ke&&ke.name===we.name)[0]||ve.runOutsideAngular(()=>L.Z.initializeApp(Q,we));try{JSON.stringify(Q)!==JSON.stringify(ue.options)&&$("error",`${ue.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ke){}return new ye(ue)}const $=(Q,...ve)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Q](...ve)};function je(Q,ve,He,Ve,we){const[,me,ue]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Q)||[];if(me)return function be(Q,ve){try{return Q.toString()===ve.toString()}catch(He){return Q===ve}}(we,ue)||(Ce("error",`${ve} was already initialized on the ${He} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:we,was:ue})),me;{const ke=Ve();return globalThis.\u0275AngularfireInstanceCache.push([Q,ke,we]),ke}}const Re=!!ut.hot,Ce=(Q,...ve)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Q](...ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},573:(ut,Ie,F)=>{F.d(Ie,{$:()=>Ih,A:()=>j,E:()=>Tt,G:()=>fr,I:()=>Oi,K:()=>P,L:()=>vh,M:()=>cg,N:()=>ua,P:()=>Ca,Q:()=>pu,R:()=>Mg,T:()=>ri,U:()=>po,V:()=>hg,W:()=>Qv,X:()=>$n,Y:()=>vu,Z:()=>gr,_:()=>ki,a:()=>vo,a0:()=>pg,a1:()=>gg,a2:()=>pe,a3:()=>mg,a4:()=>Du,a5:()=>ii,a6:()=>nc,a7:()=>Jv,a8:()=>Dh,a9:()=>Fi,aA:()=>Gi,aB:()=>Do,aC:()=>Yt,aG:()=>ls,aJ:()=>la,aa:()=>_o,ab:()=>yg,ae:()=>ic,af:()=>vg,ag:()=>sc,aj:()=>wh,ak:()=>Dg,am:()=>uc,an:()=>Su,ao:()=>tn,ap:()=>Ke,aq:()=>dt,ar:()=>Be,as:()=>Ve,at:()=>Na,au:()=>xa,av:()=>we,aw:()=>K,ax:()=>Y,ay:()=>H,az:()=>Wi,b:()=>hn,c:()=>Nh,d:()=>Oh,e:()=>qD,f:()=>Fh,g:()=>Lh,h:()=>kg,i:()=>Ea,j:()=>Fg,k:()=>xo,l:()=>wn,m:()=>Wg,o:()=>le,r:()=>$r,s:()=>ds,u:()=>ji,z:()=>be});var p=F(5861),L=F(2090),O=F(9681),ae=F(655),ge=F(1877),ye=F(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const be=function Z(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Re=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new ge.Yd("@firebase/auth");function He(_,...f){ve.logLevel<=ge.in.ERROR&&ve.error(`Auth (${O.SDK_VERSION}): ${_}`,...f)}function Ve(_,...f){throw ke(_,...f)}function we(_,...f){return ke(_,...f)}function me(_,f,m){const w=Object.assign(Object.assign({},Re()),{[f]:m});return new L.LL("auth","Firebase",w).create(f,{appName:_.name})}function ue(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ve(_,"argument-error"),me(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(_,...f){if("string"!=typeof _){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(m,...w)}return Ce.create(_,...f)}function K(_,f,...m){if(!_)throw ke(f,...m)}function Ue(_){const f="INTERNAL ASSERTION FAILED: "+_;throw He(f),new Error(f)}function Ke(_,f){_||Ue(f)}const J=new Map;function Y(_){Ke(_ instanceof Function,"Expected a class definition");let f=J.get(_);return f?(Ke(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,J.set(_,f),f)}function ie(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Te(){return"http:"===ft()||"https:"===ft()}function ft(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Ne{constructor(f,m){this.shortDelay=f,this.longDelay=m,Ke(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Te()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(_,f){Ke(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Tr{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ut=new Ne(3e4,6e4);function Lt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function jt(_,f,m,w){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(_,f,m,w,C={}){return Qr(_,C,(0,p.Z)(function*(){let x={},q={};w&&("GET"===f?q=w:x={body:JSON.stringify(w)});const fe=(0,L.xO)(Object.assign({key:_.config.apiKey},q)).slice(1),Xe=yield _._getAdditionalHeaders();return Xe["Content-Type"]="application/json",_.languageCode&&(Xe["X-Firebase-Locale"]=_.languageCode),Tr.fetch()(Br(_,_.config.apiHost,m,fe),Object.assign({method:f,headers:Xe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Qr(_,f,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(_,f,m){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},fn),f);try{const C=new Jr(_),x=yield Promise.race([m(),C.promise]);C.clearNetworkTimeout();const q=yield x.json();if("needConfirmation"in q)throw dr(_,"account-exists-with-different-credential",q);if(x.ok&&!("errorMessage"in q))return q;{const fe=x.ok?q.errorMessage:q.error.message,[Xe,st]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw dr(_,"credential-already-in-use",q);if("EMAIL_EXISTS"===Xe)throw dr(_,"email-already-in-use",q);const vt=w[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw me(_,vt,st);Ve(_,vt)}}catch(C){if(C instanceof L.ZR)throw C;Ve(_,"network-request-failed")}})).apply(this,arguments)}function er(_,f,m,w){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(_,f,m,w,C={}){const x=yield jt(_,f,m,w,C);return"mfaPendingCredential"in x&&Ve(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Br(_,f,m,w){const C=`${f}${m}?${w}`;return _.config.emulator?qt(_.config,C):`${_.config.apiScheme}://${C}`}class Jr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(we(this.auth,"network-request-failed")),Ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dr(_,f,m){const w={appName:_.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const C=we(_,f,w);return C.customData._tokenResponse=m,C}function ot(){return(ot=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ar(_,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zt(_,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function yi(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function hr(){return(hr=(0,p.Z)(function*(_,f=!1){const m=(0,L.m9)(_),w=yield m.getIdToken(f),C=Ct(w);K(C&&C.exp&&C.auth_time&&C.iat,m.auth,"internal-error");const x="object"==typeof C.firebase?C.firebase:void 0,q=null==x?void 0:x.sign_in_provider;return{claims:C,token:w,authTime:yi(Rs(C.auth_time)),issuedAtTime:yi(Rs(C.iat)),expirationTime:yi(Rs(C.exp)),signInProvider:q||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Rs(_){return 1e3*Number(_)}function Ct(_){const[f,m,w]=_.split(".");if(void 0===f||void 0===m||void 0===w)return He("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,L.tV)(m);return C?JSON.parse(C):(He("Failed to decode base64 JWT payload"),null)}catch(C){return He("Caught error parsing JWT payload as JSON",C),null}}function Qe(_,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof L.ZR&&Ni(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Ni({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Rt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const C=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class _i{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=yi(this.lastLoginAt),this.creationTime=yi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pn(_){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,p.Z)(function*(_){var f;const m=_.auth,w=yield _.getIdToken(),C=yield Qe(_,Zt(m,{idToken:w}));K(null==C?void 0:C.users.length,m,"internal-error");const x=C.users[0];_._notifyReloadListener(x);const q=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?Pe(x.providerUserInfo):[],fe=kt(_.providerData,q),vt=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==fe?void 0:fe.length)),un={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:fe,metadata:new _i(x.createdAt,x.lastLoginAt),isAnonymous:vt};Object.assign(_,un)})).apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(_){const f=(0,L.m9)(_);yield pn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function kt(_,f){return[..._.filter(w=>!f.some(C=>C.providerId===w.providerId)),...f]}function Pe(_){return _.map(f=>{var{providerId:m}=f,w=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function We(){return(We=(0,p.Z)(function*(_,f){const m=yield Qr(_,{},(0,p.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:C,apiKey:x}=_.config,q=Br(_,C,"/v1/token",`key=${x}`),fe=yield _._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Tr.fetch()(q,{method:"POST",headers:fe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){K(f.idToken,"internal-error"),K(void 0!==f.idToken,"internal-error"),K(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function it(_){const f=Ct(_);return K(f,"internal-error"),K(void 0!==f.exp,"internal-error"),K(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,p.Z)(function*(){return K(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,p.Z)(function*(){const{accessToken:C,refreshToken:x,expiresIn:q}=yield function de(_,f){return We.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(C,x,Number(q))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:C,expirationTime:x}=m,q=new nt;return w&&(K("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),C&&(K("string"==typeof C,"internal-error",{appName:f}),q.accessToken=C),x&&(K("number"==typeof x,"internal-error",{appName:f}),q.expirationTime=x),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new nt,this.toJSON())}_performRefresh(){return Ue("not implemented")}}function Dt(_,f){K("string"==typeof _||void 0===_,"internal-error",{appName:f})}class It{constructor(f){var{uid:m,auth:w,stsTokenManager:C}=f,x=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new _i(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const w=yield Qe(m,m.stsTokenManager.getToken(m.auth,f));return K(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function _n(_){return hr.apply(this,arguments)}(this,f)}reload(){return function at(_){return An.apply(this,arguments)}(this)}_assign(f){this!==f&&(K(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,p.Z)(function*(){let C=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),C=!0),m&&(yield pn(w)),yield w.auth._persistUserIfCurrent(w),C&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Qe(f,function xs(_,f){return ot.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,C,x,q,fe,Xe,st,vt;const un=null!==(w=m.displayName)&&void 0!==w?w:void 0,Di=null!==(C=m.email)&&void 0!==C?C:void 0,Ks=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Oa=null!==(q=m.photoURL)&&void 0!==q?q:void 0,Ro=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,No=null!==(Xe=m._redirectEventId)&&void 0!==Xe?Xe:void 0,Gh=null!==(st=m.createdAt)&&void 0!==st?st:void 0,Zg=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Pa,emailVerified:ms,isAnonymous:Wh,providerData:ka,stsTokenManager:zh}=m;K(Pa&&zh,f,"internal-error");const Gu=nt.fromJSON(this.name,zh);K("string"==typeof Pa,f,"internal-error"),Dt(un,f.name),Dt(Di,f.name),K("boolean"==typeof ms,f,"internal-error"),K("boolean"==typeof Wh,f,"internal-error"),Dt(Ks,f.name),Dt(Oa,f.name),Dt(Ro,f.name),Dt(No,f.name),Dt(Gh,f.name),Dt(Zg,f.name);const Oo=new It({uid:Pa,auth:f,email:Di,emailVerified:ms,displayName:un,isAnonymous:Wh,photoURL:Oa,phoneNumber:Ks,tenantId:Ro,stsTokenManager:Gu,createdAt:Gh,lastLoginAt:Zg});return ka&&Array.isArray(ka)&&(Oo.providerData=ka.map(Kg=>Object.assign({},Kg))),No&&(Oo._redirectEventId=No),Oo}static _fromIdTokenResponse(f,m,w=!1){return(0,p.Z)(function*(){const C=new nt;C.updateFromServerResponse(m);const x=new It({uid:m.localId,auth:f,stsTokenManager:C,isAnonymous:w});return yield pn(x),x})()}}const P=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,w){var C=this;return(0,p.Z)(function*(){C.storage[m]=w})()}_get(m){var w=this;return(0,p.Z)(function*(){const C=w.storage[m];return void 0===C?null:C})()}_remove(m){var w=this;return(0,p.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return _.type="NONE",_})();function H(_,f,m){return`firebase:${_}:${f}:${m}`}class re{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:C,name:x}=this.auth;this.fullUserKey=H(this.userKey,C.apiKey,x),this.fullPersistenceKey=H("persistence",C.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?It._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,p.Z)(function*(){if(!m.length)return new re(Y(P),f,w);const C=(yield Promise.all(m.map(function(){var st=(0,p.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return st.apply(this,arguments)}}()))).filter(st=>st);let x=C[0]||Y(P);const q=H(w,f.config.apiKey,f.name);let fe=null;for(const st of m)try{const vt=yield st._get(q);if(vt){const un=It._fromJSON(f,vt);st!==x&&(fe=un),x=st;break}}catch(vt){}const Xe=C.filter(st=>st._shouldAllowMigration);return x._shouldAllowMigration&&Xe.length?(x=Xe[0],fe&&(yield x._set(q,fe.toJSON())),yield Promise.all(m.map(function(){var st=(0,p.Z)(function*(vt){if(vt!==x)try{yield vt._remove(q)}catch(un){}});return function(vt){return st.apply(this,arguments)}}())),new re(x,f,w)):new re(x,f,w)})()}}function M(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(xe(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(N(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(ct(f))return"Blackberry";if(Ye(f))return"Webos";if(k(f))return"Safari";if((f.includes("chrome/")||ee(f))&&!f.includes("edge/"))return"Chrome";if(Be(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function N(_=(0,L.z$)()){return/firefox\//i.test(_)}function k(_=(0,L.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ee(_=(0,L.z$)()){return/crios\//i.test(_)}function xe(_=(0,L.z$)()){return/iemobile/i.test(_)}function Be(_=(0,L.z$)()){return/android/i.test(_)}function ct(_=(0,L.z$)()){return/blackberry/i.test(_)}function Ye(_=(0,L.z$)()){return/webos/i.test(_)}function dt(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)}function tn(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function jn(_=(0,L.z$)()){return dt(_)||Be(_)||Ye(_)||ct(_)||/windows phone/i.test(_)||xe(_)}function Pn(_,f=[]){let m;switch(_){case"Browser":m=M((0,L.z$)());break;case"Worker":m=`${M((0,L.z$)())}-${_}`;break;default:m=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${w}`}class Wl{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Le(this),this.idTokenSubscription=new Le(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=Y(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var C,x;if(!w._deleted&&(w.persistenceManager=yield re.create(w,f),!w._deleted)){if(null===(C=w._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(q){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var w;let C=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const x=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,q=null==C?void 0:C._redirectEventId,fe=yield m.tryRedirectSignIn(f);(!x||x===q)&&(null==fe?void 0:fe.user)&&(C=fe.user)}return C?C._redirectEventId?(K(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===C._redirectEventId?m.directlySetCurrentUser(C):m.reloadAndSetCurrentUserOrClear(C)):m.reloadAndSetCurrentUserOrClear(C):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(C){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield pn(f)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Gt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const w=f?(0,L.m9)(f):null;return w&&K(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){if(!m._deleted)return f&&K(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,p.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(Y(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,p.Z)(function*(){const C=yield w.getOrInitRedirectPersistenceManager(m);return null===f?C.removeCurrentUser():C.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&Y(f)||m._popupRedirectResolver;K(w,m,"argument-error"),m.redirectPersistenceManager=yield re.create(m,[Y(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var w,C;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,C){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return K(q,this,"internal-error"),q.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,w,C):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const C=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return C&&(w["X-Firebase-Client"]=C),w})()}}function Yt(_){return(0,L.m9)(_)}class Le{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tt(_,f,m){const w=Yt(_);K(w._canInitEmulator,w,"emulator-config-failed"),K(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const C=!!(null==m?void 0:m.disableWarnings),x=Qt(f),{host:q,port:fe}=function Sr(_){const f=Qt(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(w);if(C){const x=C[1];return{host:x,port:ts(w.substr(x.length+1))}}{const[x,q]=w.split(":");return{host:x,port:ts(q)}}}(f);w.config.emulator={url:`${x}//${q}${null===fe?"":`:${fe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:fe,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Mn(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Qt(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function ts(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class fr{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ue("not implemented")}_getIdTokenResponse(f){return Ue("not implemented")}_linkToIdToken(f,m){return Ue("not implemented")}_getReauthenticationResolver(f){return Ue("not implemented")}}function rn(_,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:resetPassword",Lt(_,f))})).apply(this,arguments)}function Ns(_,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function du(_,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",Lt(_,f))})).apply(this,arguments)}function is(){return(is=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithPassword",Lt(_,f))})).apply(this,arguments)}function xn(_,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendOobCode",Lt(_,f))})).apply(this,arguments)}function sa(_,f){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(_,f){return xn(_,f)})).apply(this,arguments)}function Xt(_,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,p.Z)(function*(_,f){return xn(_,f)})).apply(this,arguments)}function ql(_,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(_,f){return xn(_,f)})).apply(this,arguments)}function ti(_,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(_,f){return xn(_,f)})).apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithEmailLink",Lt(_,f))})).apply(this,arguments)}function Kl(){return(Kl=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithEmailLink",Lt(_,f))})).apply(this,arguments)}class fu extends fr{constructor(f,m,w,C=null){super("password",w),this._email=f,this._password=m,this._tenantId=C}static _fromEmailAndPassword(f,m){return new fu(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new fu(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function zl(_,f){return is.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Zl(_,f){return Os.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ve(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return Ns(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function ni(_,f){return Kl.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ve(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function os(_,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithIdp",Lt(_,f))})).apply(this,arguments)}class Oi extends fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Oi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ve("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:C}=m,x=(0,ae._T)(m,["providerId","signInMethod"]);if(!w||!C)return null;const q=new Oi(w,C);return q.idToken=x.idToken||void 0,q.accessToken=x.accessToken||void 0,q.secret=x.secret,q.nonce=x.nonce,q.pendingToken=x.pendingToken||null,q}_getIdTokenResponse(f){return os(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,os(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,os(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,L.xO)(m)}return f}}function Gv(_,f){return ph.apply(this,arguments)}function ph(){return(ph=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendVerificationCode",Lt(_,f))})).apply(this,arguments)}function gh(){return(gh=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithPhoneNumber",Lt(_,f))})).apply(this,arguments)}function mh(){return(mh=(0,p.Z)(function*(_,f){const m=yield er(_,"POST","/v1/accounts:signInWithPhoneNumber",Lt(_,f));if(m.temporaryProof)throw dr(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const qv={USER_NOT_FOUND:"user-not-found"};function yh(){return(yh=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithPhoneNumber",Lt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),qv)})).apply(this,arguments)}class ho extends fr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new ho({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new ho({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Wv(_,f){return gh.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function zv(_,f){return mh.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Zv(_,f){return yh.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:C}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:C}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:x}=f;return w||m||C||x?new ho({verificationId:m,verificationCode:w,phoneNumber:C,temporaryProof:x}):null}}class fo{constructor(f){var m,w,C,x,q,fe;const Xe=(0,L.zd)((0,L.pd)(f)),st=null!==(m=Xe.apiKey)&&void 0!==m?m:null,vt=null!==(w=Xe.oobCode)&&void 0!==w?w:null,un=function Kv(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Xe.mode)&&void 0!==C?C:null);K(st&&vt&&un,"argument-error"),this.apiKey=st,this.operation=un,this.code=vt,this.continueUrl=null!==(x=Xe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(q=Xe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(fe=Xe.tenantId)&&void 0!==fe?fe:null}static parseLink(f){const m=function Yv(_){const f=(0,L.zd)((0,L.pd)(_)).link,m=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||m||f||_}(f);try{return new fo(m)}catch(w){return null}}}let vh=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,w){return fu._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const C=fo.parseLink(w);return K(C,"argument-error"),fu._fromEmailAndCode(m,C.code,C.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Pi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class aa extends Pi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ri extends aa{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return K("providerId"in m&&"signInMethod"in m,"argument-error"),Oi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return K(f.idToken||f.accessToken,"argument-error"),Oi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ri.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ri.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:C,pendingToken:x,nonce:q,providerId:fe}=f;if(!w&&!C&&!m&&!x||!fe)return null;try{return new ri(fe)._credential({idToken:m,accessToken:w,nonce:q,pendingToken:x})}catch(Xe){return null}}}let cg=(()=>{class _ extends aa{constructor(){super("facebook.com")}static credential(m){return Oi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ua=(()=>{class _ extends aa{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Oi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:C}=m;if(!w&&!C)return null;try{return _.credential(w,C)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),pu=(()=>{class _ extends aa{constructor(){super("github.com")}static credential(m){return Oi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class la extends fr{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return os(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,os(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,os(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:C,pendingToken:x}=m;return w&&C&&x&&w===C?new la(w,x):null}static _create(f,m){return new la(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class po extends Pi{constructor(f){K(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return po.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return po.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=la.fromJSON(f);return K(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return la._create(w,m)}catch(C){return null}}}let hg=(()=>{class _ extends aa{constructor(){super("twitter.com")}static credential(m,w){return Oi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:C}=m;if(!w||!C)return null;try{return _.credential(w,C)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function gu(_,f){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signUp",Lt(_,f))})).apply(this,arguments)}class cn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,C=!1){return(0,p.Z)(function*(){const x=yield It._fromIdTokenResponse(f,w,C),q=ca(w);return new cn({user:x,providerId:q,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const C=ca(w);return new cn({user:f,providerId:C,_tokenResponse:w,operationType:m})})()}}function ca(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Qv(_){return mu.apply(this,arguments)}function mu(){return(mu=(0,p.Z)(function*(_){var f;const m=Yt(_);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new cn({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield gu(m,{returnSecureToken:!0}),C=yield cn._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class Jl extends L.ZR{constructor(f,m,w,C){var x;super(m.code,m.message),this.operationType=w,this.user=C,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,C){return new Jl(f,m,w,C)}}function Eh(_,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Jl._fromErrorAndOperation(_,x,f,w):x})}function yu(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function wh(_,f){return da.apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_);yield ha(!0,m,f);const{providerUserInfo:w}=yield Ar(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),C=yu(w||[]);return m.providerData=m.providerData.filter(x=>C.has(x.providerId)),C.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function fg(_,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,p.Z)(function*(_,f,m=!1){const w=yield Qe(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return cn._forOperation(_,"link",w)})).apply(this,arguments)}function ha(_,f,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(_,f,m){yield pn(f);const C=!1===_?"provider-already-linked":"no-such-provider";K(yu(f.providerData).has(m)===_,f.auth,C)})).apply(this,arguments)}function nn(_,f){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,p.Z)(function*(_,f,m=!1){const{auth:w}=_,C="reauthenticate";try{const x=yield Qe(_,Eh(w,C,f,_),m);K(x.idToken,w,"internal-error");const q=Ct(x.idToken);K(q,w,"internal-error");const{sub:fe}=q;return K(_.uid===fe,w,"user-mismatch"),cn._forOperation(_,C,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Ve(w,"user-mismatch"),x}})).apply(this,arguments)}function _u(_,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(_,f,m=!1){const w="signIn",C=yield Eh(_,w,f),x=yield cn._fromIdTokenResponse(_,w,C);return m||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function $n(_,f){return ec.apply(this,arguments)}function ec(){return(ec=(0,p.Z)(function*(_,f){return _u(Yt(_),f)})).apply(this,arguments)}function vu(_,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_);return yield ha(!1,m,f.providerId),fg(m,f)})).apply(this,arguments)}function gr(_,f){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(_,f){return nn((0,L.m9)(_),f)})).apply(this,arguments)}function mo(_,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,p.Z)(function*(_,f){return er(_,"POST","/v1/accounts:signInWithCustomToken",Lt(_,f))})).apply(this,arguments)}function ki(_,f){return as.apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(_,f){const m=Yt(_),w=yield mo(m,{token:f,returnSecureToken:!0}),C=yield cn._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(C.user),C})).apply(this,arguments)}class ks{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?lt._fromServerResponse(f,m):Ve(f,"internal-error")}}class lt extends ks{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new lt(m)}}function pa(_,f,m){var w;K((null===(w=m.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),K(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(K(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(K(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Ih(_,f,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_),C={requestType:"PASSWORD_RESET",email:f};m&&pa(w,C,m),yield Xt(w,C)})).apply(this,arguments)}function pg(_,f,m){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(_,f,m){yield rn((0,L.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function gg(_,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,p.Z)(function*(_,f){yield du((0,L.m9)(_),{oobCode:f})})).apply(this,arguments)}function pe(_,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_),w=yield rn(m,{oobCode:f}),C=w.requestType;switch(K(C,m,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(w.mfaInfo,m,"internal-error");default:K(w.email,m,"internal-error")}let x=null;return w.mfaInfo&&(x=ks._fromServerResponse(Yt(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:C}})).apply(this,arguments)}function mg(_,f){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(_,f){const{data:m}=yield pe((0,L.m9)(_),f);return m.email})).apply(this,arguments)}function Du(_,f,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(_,f,m){const w=Yt(_),C=yield gu(w,{returnSecureToken:!0,email:f,password:m}),x=yield cn._fromIdTokenResponse(w,"signIn",C);return yield w._updateCurrentUser(x.user),x})).apply(this,arguments)}function ii(_,f,m){return $n((0,L.m9)(_),vh.credential(f,m))}function nc(_,f,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_),C={requestType:"EMAIL_SIGNIN",email:f};K(m.handleCodeInApp,w,"argument-error"),m&&pa(w,C,m),yield ql(w,C)})).apply(this,arguments)}function Jv(_,f){const m=fo.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Dh(_,f,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_),C=vh.credentialWithLink(f,m||ie());return K(C._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),$n(w,C)})).apply(this,arguments)}function bu(_,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:createAuthUri",Lt(_,f))})).apply(this,arguments)}function Fi(_,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,p.Z)(function*(_,f){const w={identifier:f,continueUri:Te()?ie():"http://localhost"},{signinMethods:C}=yield bu((0,L.m9)(_),w);return C||[]})).apply(this,arguments)}function _o(_,f){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_),C={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&pa(m.auth,C,f);const{email:x}=yield sa(m.auth,C);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function yg(_,f,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&pa(w.auth,x,m);const{email:q}=yield ti(w.auth,x);q!==_.email&&(yield _.reload())})).apply(this,arguments)}function _g(_,f){return rc.apply(this,arguments)}function rc(){return(rc=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ic(_,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,p.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,L.m9)(_),x={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},q=yield Qe(w,_g(w.auth,x));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const fe=w.providerData.find(({providerId:Xe})=>"password"===Xe);fe&&(fe.displayName=w.displayName,fe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function vg(_,f){return Eg((0,L.m9)(_),f,null)}function sc(_,f){return Eg((0,L.m9)(_),null,f)}function Eg(_,f,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,p.Z)(function*(_,f,m){const{auth:w}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const q=yield Qe(_,Ns(w,x));yield _._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Ls{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class ac extends Ls{constructor(f,m,w,C){super(f,m,w),this.username=C}}class wg extends Ls{constructor(f,m){super(f,"facebook.com",m)}}class Ig extends ac{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class ya extends Ls{constructor(f,m){super(f,"google.com",m)}}class us extends ac{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Dg(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Au(_){var f,m;if(!_)return null;const{providerId:w}=_,C=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const q=null===(m=null===(f=Ct(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new Ls(x,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new wg(x,C);case"github.com":return new Ig(x,C);case"google.com":return new ya(x,C);case"twitter.com":return new us(x,C,_.screenName||null);case"custom":case"anonymous":return new Ls(x,null);default:return new Ls(x,w,C)}}(m)}class Vs{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new Vs("enroll",f)}static _fromMfaPendingCredential(f){return new Vs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Vs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Vs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class _a{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Yt(f),C=m.customData._serverResponse,x=(C.mfaInfo||[]).map(fe=>ks._fromServerResponse(w,fe));K(C.mfaPendingCredential,w,"internal-error");const q=Vs._fromMfaPendingCredential(C.mfaPendingCredential);return new _a(q,x,function(){var fe=(0,p.Z)(function*(Xe){const st=yield Xe._process(w,q);delete C.mfaInfo,delete C.mfaPendingCredential;const vt=Object.assign(Object.assign({},C),{idToken:st.idToken,refreshToken:st.refreshToken});switch(m.operationType){case"signIn":const un=yield cn._fromIdTokenResponse(w,m.operationType,vt);return yield w._updateCurrentUser(un.user),un;case"reauthenticate":return K(m.user,w,"internal-error"),cn._forOperation(m.user,m.operationType,vt);default:Ve(w,"internal-error")}});return function(Xe){return fe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function uc(_,f){var m;const w=(0,L.m9)(_),C=f;return K(f.customData.operationType,w,"argument-error"),K(null===(m=C.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),_a._fromError(w,C)}function lc(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:start",Lt(_,f))}class Ch{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ks._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Ch(f)}getSession(){var f=this;return(0,p.Z)(function*(){return Vs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,p.Z)(function*(){const C=f,x=yield w.getSession(),q=yield Qe(w.user,C._process(w.user.auth,x,m));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const w="string"==typeof f?f:f.uid,C=yield m.user.getIdToken(),x=yield Qe(m.user,function bg(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(_,f))}(m.user.auth,{idToken:C,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:q})=>q!==w),yield m.user._updateTokensIfNecessary(x);try{yield m.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Vi=new WeakMap;function Su(_){const f=(0,L.m9)(_);return Vi.has(f)||Vi.set(f,Ch._fromUser(f)),Vi.get(f)}const dc="__sak";class Cg{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const hn=(()=>{class _ extends Cg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mu(){const _=(0,L.z$)();return k(_)||dt(_)}()&&function ei(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=jn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const C=this.storage.getItem(w),x=this.localCache[w];C!==x&&m(w,x,C)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((fe,Xe,st)=>{this.notifyListeners(fe,st)});const C=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(C);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(C,m.newValue):this.storage.removeItem(C);else if(this.localCache[C]===m.newValue&&!w)return}const x=()=>{const fe=this.storage.getItem(C);!w&&this.localCache[C]===fe||this.notifyListeners(C,fe)},q=this.storage.getItem(C);!function Nt(){return(0,L.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const x of Array.from(C))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var C=()=>super._set,x=this;return(0,p.Z)(function*(){yield C().call(x,m,w),x.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,C=this;return(0,p.Z)(function*(){const x=yield w().call(C,m);return C.localCache[m]=JSON.stringify(x),x})()}_remove(m){var w=()=>super._remove,C=this;return(0,p.Z)(function*(){yield w().call(C,m),delete C.localCache[m]})()}}return _.type="LOCAL",_})(),vo=(()=>{class _ extends Cg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return _.type="SESSION",_})();let hc=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(x=>x.isListeningto(m));if(w)return w;const C=new _(m);return this.receivers.push(C),C}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,p.Z)(function*(){const C=m,{eventId:x,eventType:q,data:fe}=C.data,Xe=w.handlersMap[q];if(!(null==Xe?void 0:Xe.size))return;C.ports[0].postMessage({status:"ack",eventId:x,eventType:q});const st=Array.from(Xe).map(function(){var un=(0,p.Z)(function*(Di){return Di(C.origin,fe)});return function(Di){return un.apply(this,arguments)}}()),vt=yield function Ah(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(st);C.ports[0].postMessage({status:"done",eventId:x,eventType:q,response:vt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ls(_="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return _+m}class fc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var C=this;return(0,p.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let q,fe;return new Promise((Xe,st)=>{const vt=ls("",20);x.port1.start();const un=setTimeout(()=>{st(new Error("unsupported_event"))},w);fe={messageChannel:x,onMessage(Di){const Ks=Di;if(Ks.data.eventId===vt)switch(Ks.data.status){case"ack":clearTimeout(un),q=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Xe(Ks.data.response);break;default:clearTimeout(un),clearTimeout(q),st(new Error("invalid_response"))}}},C.handlers.add(fe),x.port1.addEventListener("message",fe.onMessage),C.target.postMessage({eventType:f,eventId:vt,data:m},[x.port2])}).finally(()=>{fe&&C.removeMessageHandler(fe)})})()}}function vn(){return window}function cs(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}function pt(){return(pt=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Ru="firebaseLocalStorageDb",Nu="firebaseLocalStorage",gc="fbase_key";class tr{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function nr(_,f){return _.transaction([Nu],f?"readwrite":"readonly").objectStore(Nu)}function Us(){const _=indexedDB.open(Ru,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Nu,{keyPath:gc})}catch(C){m(C)}}),_.addEventListener("success",(0,p.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Nu)?f(w):(w.close(),yield function mc(){const _=indexedDB.deleteDatabase(Ru);return new tr(_).toPromise()}(),f(yield Us()))}))})}function va(_,f,m){return yc.apply(this,arguments)}function yc(){return(yc=(0,p.Z)(function*(_,f,m){const w=nr(_,!0).put({[gc]:f,value:m});return new tr(w).toPromise()})).apply(this,arguments)}function Bs(){return(Bs=(0,p.Z)(function*(_,f){const m=nr(_,!1).get(f),w=yield new tr(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function wi(_,f){const m=nr(_,!0).delete(f);return new tr(m).toPromise()}const Ea=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Us()),m.db})()}_withRetries(m){var w=this;return(0,p.Z)(function*(){let C=0;for(;;)try{const x=yield w._openDb();return yield m(x)}catch(x){if(C++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return cs()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=hc._getInstance(function e0(){return cs()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(C,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(C,x){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(C,x){return["keyChanged"]});return function(C,x){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var w,C;if(m.activeServiceWorker=yield function En(){return pt.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new fc(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);!x||(null===(w=x[0])||void 0===w?void 0:w.fulfilled)&&(null===(C=x[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function xu(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Us();return yield va(m,dc,"1"),yield wi(m,dc),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var C=this;return(0,p.Z)(function*(){return C._withPendingWrite((0,p.Z)(function*(){return yield C._withRetries(x=>va(x,m,w)),C.localCache[m]=w,C.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,p.Z)(function*(){const C=yield w._withRetries(x=>function Sh(_,f){return Bs.apply(this,arguments)}(x,m));return w.localCache[m]=C,C})()}_remove(m){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(C=>wi(C,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const w=yield m._withRetries(q=>{const fe=nr(q,!1).getAll();return new tr(fe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const C=[],x=new Set;for(const{fbase_key:q,value:fe}of w)x.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(fe)&&(m.notifyListeners(q,fe),C.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!x.has(q)&&(m.notifyListeners(q,null),C.push(q));return C})()}notifyListeners(m,w){this.localCache[m]=w;const C=this.listeners[m];if(C)for(const x of Array.from(C))x(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ou(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:start",Lt(_,f))}function wa(){return(wa=(0,p.Z)(function*(_){return(yield jt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pu(_){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=C=>{const x=we("internal-error");x.customData=C,m(x)},w.type="text/javascript",w.charset="UTF-8",function $s(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function Ia(_){return`__${_}${Math.floor(1e6*Math.random())}`}const jr=1e12;class Gs{constructor(f){this.auth=f,this.counter=jr,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Ec(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||jr;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||jr))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var w;return null===(w=m._widgets.get(f||jr))||void 0===w||w.execute(),""})()}}class Ec{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof f?document.getElementById(f):f;K(C,"argument-error",{appName:m}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fu(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bi=Ia("rcb"),t0=new Ne(3e4,6e4);class an{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vn().grecaptcha}load(f,m=""){return K(function wc(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(vn().grecaptcha):new Promise((w,C)=>{const x=vn().setTimeout(()=>{C(we(f,"network-request-failed"))},t0.get());vn()[Bi]=()=>{vn().clearTimeout(x),delete vn()[Bi];const fe=vn().grecaptcha;if(!fe)return void C(we(f,"internal-error"));const Xe=fe.render;fe.render=(st,vt)=>{const un=Xe(st,vt);return this.counter++,un},this.hostLanguage=m,w(fe)},Pu(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Bi,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),C(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!vn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ag{load(f){return(0,p.Z)(function*(){return new Gs(f)})()}clearedOneInstance(){}}const Ic="recaptcha",Sg={theme:"light",type:"image"};class Mg{constructor(f,m=Object.assign({},Sg),w){this.parameters=m,this.type=Ic,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yt(w),this.isInvisible="invisible"===this.parameters.size,K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof f?document.getElementById(f):f;K(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ag:new an,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(x=>{const q=fe=>{!fe||(f.tokenChangeListeners.delete(q),x(fe))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=vn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){K(Te()&&!cs(),f.auth,"internal-error"),yield function xg(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function vc(_){return wa.apply(this,arguments)}(f.auth);K(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Lu{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=ho._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function ds(_,f,m){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,p.Z)(function*(_,f,m){const w=Yt(_),C=yield Da(w,f,(0,L.m9)(m));return new Lu(C,x=>$n(w,x))})).apply(this,arguments)}function wn(_,f,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_);yield ha(!1,w,"phone");const C=yield Da(w.auth,f,(0,L.m9)(m));return new Lu(C,x=>vu(w,x))})).apply(this,arguments)}function $r(_,f,m){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_),C=yield Da(w.auth,f,(0,L.m9)(m));return new Lu(C,x=>gr(w,x))})).apply(this,arguments)}function Da(_,f,m){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(_,f,m){var w;const C=yield m.verify();try{let x;if(K("string"==typeof C,_,"argument-error"),K(m.type===Ic,_,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const q=x.session;if("phoneNumber"in x)return K("enroll"===q.type,_,"internal-error"),(yield lc(_,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{K("signin"===q.type,_,"internal-error");const fe=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return K(fe,_,"missing-multi-factor-info"),(yield Ou(_,{mfaPendingCredential:q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Gv(_,{phoneNumber:x.phoneNumber,recaptchaToken:C});return q}}finally{m._reset()}})).apply(this,arguments)}function ji(_,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,p.Z)(function*(_,f){yield fg((0,L.m9)(_),f)})).apply(this,arguments)}let Ca=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Yt(m)}verifyPhoneNumber(m,w){return Da(this.auth,m,(0,L.m9)(w))}static credential(m,w){return ho._fromVerification(m,w)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:C}=m;return w&&C?ho._fromTokenResponse(w,C):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Nr(_,f){return f?Y(f):(K(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ws extends fr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return os(f,this._buildIdpRequest())}_linkToIdToken(f,m){return os(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return os(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Rg(_){return _u(_.auth,new Ws(_),_.bypassAuthState)}function bc(_){const{auth:f,user:m}=_;return K(m,f,"internal-error"),nn(m,new Ws(_),_.bypassAuthState)}function n0(_){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,p.Z)(function*(_){const{auth:f,user:m}=_;return K(m,f,"internal-error"),fg(m,new Ws(_),_.bypassAuthState)})).apply(this,arguments)}class Rh{constructor(f,m,w,C,x=!1){this.auth=f,this.resolver=w,this.user=C,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(w,C){f.pendingPromise={resolve:w,reject:C};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(w,C){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:C,postBody:x,tenantId:q,error:fe,type:Xe}=f;if(fe)return void m.reject(fe);const st={auth:m.auth,requestUri:w,sessionId:C,tenantId:q||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Xe)(st))}catch(vt){m.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Rg;case"linkViaPopup":case"linkViaRedirect":return n0;case"reauthViaPopup":case"reauthViaRedirect":return bc;default:Ve(this.auth,"internal-error")}}resolve(f){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hr=new Ne(2e3,1e4);function Nh(_,f,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(_,f,m){const w=Yt(_);ue(_,f,Pi);const C=Nr(w,m);return new Tc(w,"signInViaPopup",f,C).executeNotNull()})).apply(this,arguments)}function qD(_,f,m){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_);ue(w.auth,f,Pi);const C=Nr(w.auth,m);return new Tc(w.auth,"reauthViaPopup",f,C,w).executeNotNull()})).apply(this,arguments)}function Oh(_,f,m){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_);ue(w.auth,f,Pi);const C=Nr(w.auth,m);return new Tc(w.auth,"linkViaPopup",f,C,w).executeNotNull()})).apply(this,arguments)}let Tc=(()=>{class _ extends Rh{constructor(m,w,C,x,q){super(m,w,x,q),this.provider=C,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const w=yield m.execute();return K(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,p.Z)(function*(){Ke(1===m.filter.length,"Popup operations only handle one event");const w=ls();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(C=>{m.reject(C)}),m.resolver._isIframeWebStorageSupported(m.auth,C=>{C||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,C;this.pollId=(null===(C=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Hr.get())};m()}}return _.currentPopupAction=null,_})();const qs=new Map;class wo extends Rh{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let w=qs.get(m.auth._key());if(!w){try{const x=(yield function Io(_,f){return $i.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(x)}catch(C){w=()=>Promise.reject(C)}qs.set(m.auth._key(),w)}return m.bypassAuthState||qs.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const C=yield w.auth._redirectUserForId(f.eventId);if(C)return w.user=C,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function $i(){return($i=(0,p.Z)(function*(_,f){const m=kh(f),w=Ta(_);if(!(yield w._isAvailable()))return!1;const C="true"===(yield w._get(m));return yield w._remove(m),C})).apply(this,arguments)}function Ph(_,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(_,f){return Ta(_)._set(kh(f),"true")})).apply(this,arguments)}function Do(){qs.clear()}function Ta(_){return Y(_._redirectPersistence)}function kh(_){return H("pendingRedirect",_.config.apiKey,_.name)}function Fh(_,f,m){return function Pg(_,f,m){return Aa.apply(this,arguments)}(_,f,m)}function Aa(){return(Aa=(0,p.Z)(function*(_,f,m){const w=Yt(_);ue(_,f,Pi);const C=Nr(w,m);return yield Ph(C,w),C._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function kg(_,f,m){return function Uu(_,f,m){return Bu.apply(this,arguments)}(_,f,m)}function Bu(){return(Bu=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_);ue(w.auth,f,Pi);const C=Nr(w.auth,m);yield Ph(C,w.auth);const x=yield Lg(w);return C._openRedirect(w.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function Lh(_,f,m){return function Wn(_,f,m){return bo.apply(this,arguments)}(_,f,m)}function bo(){return(bo=(0,p.Z)(function*(_,f,m){const w=(0,L.m9)(_);ue(w.auth,f,Pi);const C=Nr(w.auth,m);yield ha(!1,w,f.providerId),yield Ph(C,w.auth);const x=yield Lg(w);return C._openRedirect(w.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Fg(_,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(_,f){return yield Yt(_)._initializationPromise,Gi(_,f,!1)})).apply(this,arguments)}function Gi(_,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(_,f,m=!1){const w=Yt(_),C=Nr(w,f),q=yield new wo(w,C,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function Lg(_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(_){const f=ls(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Wi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Vg(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ii(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!Ii(f)){const C=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(we(this.auth,C))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fs(f))}saveEventToCache(f){this.cachedEventUids.add(fs(f)),this.lastProcessedEventTime=Date.now()}}function fs(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Ii({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function xa(_){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(_,f={}){return jt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ao=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ac=/^https?/;function $u(){return($u=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield xa(_);for(const m of f)try{if(ps(m))return}catch(w){}Ve(_,"unauthorized-domain")})).apply(this,arguments)}function ps(_){const f=ie(),{protocol:m,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const q=new URL(_);return""===q.hostname&&""===w?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===w}if(!Ac.test(m))return!1;if(Ao.test(_))return w===_;const C=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(w)}const Ra=new Ne(3e4,6e4);function Sc(){const _=vn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let So=null;function Mc(_){return So=So||function Ug(_){return new Promise((f,m)=>{var w,C,x;function q(){Sc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Sc(),m(we(_,"network-request-failed"))},timeout:Ra.get()})}if(null===(C=null===(w=vn().gapi)||void 0===w?void 0:w.iframes)||void 0===C?void 0:C.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=vn().gapi)||void 0===x?void 0:x.load)){const fe=Ia("iframefcb");return vn()[fe]=()=>{gapi.load?q():m(we(_,"network-request-failed"))},Pu(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Xe=>m(Xe))}q()}}).catch(f=>{throw So=null,f})}(_),So}const Bg=new Ne(5e3,15e3),$g={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mo(_){const f=_.config;K(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?qt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:O.SDK_VERSION},C=gs.get(_.config.apiHost);C&&(w.eid=C);const x=_._getFrameworks();return x.length&&(w.fw=x.join(",")),`${m}?${(0,L.xO)(w).slice(1)}`}function Vh(){return Vh=(0,p.Z)(function*(_){const f=yield Mc(_),m=vn().gapi;return K(m,_,"internal-error"),f.open({where:document.body,url:Mo(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$g,dontclear:!0},w=>new Promise(function(){var C=(0,p.Z)(function*(x,q){yield w.restyle({setHideOnLeave:!1});const fe=we(_,"network-request-failed"),Xe=vn().setTimeout(()=>{q(fe)},Bg.get());function st(){vn().clearTimeout(Xe),x(w)}w.ping(st).then(st,()=>{q(fe)})});return function(x,q){return C.apply(this,arguments)}}()))}),Vh.apply(this,arguments)}const r0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Na(_,f,m,w,C,x){K(_.config.authDomain,_,"auth-domain-config-required"),K(_.config.apiKey,_,"invalid-api-key");const q={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:w,v:O.SDK_VERSION,eventId:C};if(f instanceof Pi){f.setDefaultLanguage(_.languageCode),q.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Xe,st]of Object.entries(x||{}))q[Xe]=st}if(f instanceof aa){const Xe=f.getScopes().filter(st=>""!==st);Xe.length>0&&(q.scopes=Xe.join(","))}_.tenantId&&(q.tid=_.tenantId);const fe=q;for(const Xe of Object.keys(fe))void 0===fe[Xe]&&delete fe[Xe];return`${function Gg({config:_}){return _.emulator?qt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(fe).slice(1)}`}const Bh="webStorageSupport",xo=class zi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=Gi}_openPopup(f,m,w,C){var x=this;return(0,p.Z)(function*(){var q;Ke(null===(q=x.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const fe=Na(f,m,w,ie(),C);return function kc(_,f,m,w=500,C=600){const x=Math.max((window.screen.availHeight-C)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let fe="";const Xe=Object.assign(Object.assign({},r0),{width:w.toString(),height:C.toString(),top:x,left:q}),st=(0,L.z$)().toLowerCase();m&&(fe=ee(st)?"_blank":m),N(st)&&(f=f||"http://localhost",Xe.scrollbars="yes");const vt=Object.entries(Xe).reduce((Di,[Ks,Oa])=>`${Di}${Ks}=${Oa},`,"");if(function Bn(_=(0,L.z$)()){var f;return dt(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(st)&&"_self"!==fe)return function Hu(_,f){const m=document.createElement("a");m.href=_,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",fe),new Pc(null);const un=window.open(f||"",fe,vt);K(un,_,"popup-blocked");try{un.focus()}catch(Di){}return new Pc(un)}(f,fe,ls())})()}_openRedirect(f,m,w,C){var x=this;return(0,p.Z)(function*(){return yield x._originValidation(f),function Ui(_){vn().location.href=_}(Na(f,m,w,ie(),C)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:C,promise:x}=this.eventManagers[m];return C?Promise.resolve(C):(Ke(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const w=yield function Zs(_){return Vh.apply(this,arguments)}(f),C=new Wi(f);return w.register("authEvent",x=>(K(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:C.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:C},m.iframes[f._key()]=w,C})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Bh,{type:Bh},C=>{var x;const q=null===(x=null==C?void 0:C[0])||void 0===x?void 0:x[Bh];void 0!==q&&m(!!q),Ve(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ju(_){return $u.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return jn()||k()||dt()}};class $h extends class jh{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ue("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new $h(f)}_finalizeEnroll(f,m,w){return function cc(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(_,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Mh(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:finalize",Lt(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wg=(()=>{class _{constructor(){}static assertion(m){return $h._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Fc="@firebase/auth",zg="0.19.12";class qg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var C;f((null===(C=w)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Lc(_){(0,O._registerComponent)(new ye.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),C=f.getProvider("heartbeat"),{apiKey:x,authDomain:q}=w.options;return((fe,Xe)=>{K(x&&!x.includes(":"),"invalid-api-key",{appName:fe.name}),K(!(null==q?void 0:q.includes(":")),"argument-error",{appName:fe.name});const st={apiKey:x,authDomain:q,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(_)},vt=new Wl(fe,Xe,st);return function ce(_,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(Y);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(vt,m),vt})(w,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ye.wA("auth-internal",f=>{const m=Yt(f.getProvider("auth").getImmediate());return new qg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Fc,zg,function Hh(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,O.registerVersion)(Fc,zg,"esm2017")}("Browser")},2090:(ut,Ie,F)=>{F.d(Ie,{$s:()=>_i,BH:()=>be,G6:()=>Ue,L:()=>De,LL:()=>Te,Lj:()=>Dt,Mn:()=>ke,Sg:()=>Re,UG:()=>ve,US:()=>_e,X3:()=>nt,ZB:()=>Z,ZR:()=>ie,b$:()=>we,d:()=>me,eu:()=>J,hl:()=>Ke,jU:()=>He,m9:()=>at,ne:()=>ot,pd:()=>dr,r3:()=>jt,ru:()=>Ve,tV:()=>$,uI:()=>Q,vZ:()=>er,w1:()=>ue,xO:()=>Br,xb:()=>Qr,z$:()=>Ce,zI:()=>Y,zd:()=>Jr});var p=F(5861);const ge=function(U){const P=[];let H=0;for(let re=0;re<U.length;re++){let M=U.charCodeAt(re);M<128?P[H++]=M:M<2048?(P[H++]=M>>6|192,P[H++]=63&M|128):55296==(64512&M)&&re+1<U.length&&56320==(64512&U.charCodeAt(re+1))?(M=65536+((1023&M)<<10)+(1023&U.charCodeAt(++re)),P[H++]=M>>18|240,P[H++]=M>>12&63|128,P[H++]=M>>6&63|128,P[H++]=63&M|128):(P[H++]=M>>12|224,P[H++]=M>>6&63|128,P[H++]=63&M|128)}return P},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,P){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let M=0;M<U.length;M+=3){const N=U[M],k=M+1<U.length,ee=k?U[M+1]:0,xe=M+2<U.length,Be=xe?U[M+2]:0;let dt=(15&ee)<<2|Be>>6,tn=63&Be;xe||(tn=64,k||(dt=64)),re.push(H[N>>2],H[(3&N)<<4|ee>>4],H[dt],H[tn])}return re.join("")},encodeString(U,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(U):this.encodeByteArray(ge(U),P)},decodeString(U,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(U):function(U){const P=[];let H=0,re=0;for(;H<U.length;){const M=U[H++];if(M<128)P[re++]=String.fromCharCode(M);else if(M>191&&M<224){const N=U[H++];P[re++]=String.fromCharCode((31&M)<<6|63&N)}else if(M>239&&M<365){const xe=((7&M)<<18|(63&U[H++])<<12|(63&U[H++])<<6|63&U[H++])-65536;P[re++]=String.fromCharCode(55296+(xe>>10)),P[re++]=String.fromCharCode(56320+(1023&xe))}else{const N=U[H++],k=U[H++];P[re++]=String.fromCharCode((15&M)<<12|(63&N)<<6|63&k)}}return P.join("")}(this.decodeStringToByteArray(U,P))},decodeStringToByteArray(U,P){this.init_();const H=P?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let M=0;M<U.length;){const N=H[U.charAt(M++)],ee=M<U.length?H[U.charAt(M)]:0;++M;const Be=M<U.length?H[U.charAt(M)]:64;++M;const Ye=M<U.length?H[U.charAt(M)]:64;if(++M,null==N||null==ee||null==Be||null==Ye)throw Error();re.push(N<<2|ee>>4),64!==Be&&(re.push(ee<<4&240|Be>>2),64!==Ye&&re.push(Be<<6&192|Ye))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},De=function(U){return function(U){const P=ge(U);return _e.encodeByteArray(P,!0)}(U).replace(/\./g,"")},$=function(U){try{return _e.decodeString(U,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Z(U,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return P}for(const H in P)!P.hasOwnProperty(H)||!je(H)||(U[H]=Z(U[H],P[H]));return U}function je(U){return"__proto__"!==U}class be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,H)=>{this.resolve=P,this.reject=H})}wrapCallback(P){return(H,re)=>{H?this.reject(H):this.resolve(re),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(H):P(H,re))}}}function Re(U,P){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=P||"demo-project",M=U.iat||0,N=U.sub||U.user_id;if(!N)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const k=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:M,exp:M+3600,auth_time:M,sub:N,user_id:N,firebase:{sign_in_provider:"custom",identities:{}}},U);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(k)),""].join(".")}function Ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function He(){return"object"==typeof self&&self.self===self}function Ve(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return Ce().indexOf("Electron/")>=0}function ue(){const U=Ce();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function ke(){return Ce().indexOf("MSAppHost/")>=0}function Ue(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function J(){return new Promise((U,P)=>{try{let H=!0;const re="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(re);M.onsuccess=()=>{M.result.close(),H||self.indexedDB.deleteDatabase(re),U(!0)},M.onupgradeneeded=()=>{H=!1},M.onerror=()=>{var N;P((null===(N=M.error)||void 0===N?void 0:N.message)||"")}}catch(H){P(H)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ie extends Error{constructor(P,H,re){super(H),this.code=P,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(P,H,re){this.service=P,this.serviceName=H,this.errors=re}create(P,...H){const re=H[0]||{},M=`${this.service}/${P}`,N=this.errors[P],k=N?function ft(U,P){return U.replace(Bt,(H,re)=>{const M=P[re];return null!=M?String(M):`<${re}?>`})}(N,re):"Error";return new ie(M,`${this.serviceName}: ${k} (${M}).`,re)}}const Bt=/\{\$([^}]+)}/g;function jt(U,P){return Object.prototype.hasOwnProperty.call(U,P)}function Qr(U){for(const P in U)if(Object.prototype.hasOwnProperty.call(U,P))return!1;return!0}function er(U,P){if(U===P)return!0;const H=Object.keys(U),re=Object.keys(P);for(const M of H){if(!re.includes(M))return!1;const N=U[M],k=P[M];if(mi(N)&&mi(k)){if(!er(N,k))return!1}else if(N!==k)return!1}for(const M of re)if(!H.includes(M))return!1;return!0}function mi(U){return null!==U&&"object"==typeof U}function Br(U){const P=[];for(const[H,re]of Object.entries(U))Array.isArray(re)?re.forEach(M=>{P.push(encodeURIComponent(H)+"="+encodeURIComponent(M))}):P.push(encodeURIComponent(H)+"="+encodeURIComponent(re));return P.length?"&"+P.join("&"):""}function Jr(U){const P={};return U.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[M,N]=re.split("=");P[decodeURIComponent(M)]=decodeURIComponent(N)}}),P}function dr(U){const P=U.indexOf("?");if(!P)return"";const H=U.indexOf("#",P);return U.substring(P,H>0?H:void 0)}function ot(U,P){const H=new Ar(U,P);return H.subscribe.bind(H)}class Ar{constructor(P,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{P(this)}).catch(re=>{this.error(re)})}next(P){this.forEachObserver(H=>{H.next(P)})}error(P){this.forEachObserver(H=>{H.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,H,re){let M;if(void 0===P&&void 0===H&&void 0===re)throw new Error("Missing Observer.");M=function Zt(U,P){if("object"!=typeof U||null===U)return!1;for(const H of P)if(H in U&&"function"==typeof U[H])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:H,complete:re},void 0===M.next&&(M.next=Un),void 0===M.error&&(M.error=Un),void 0===M.complete&&(M.complete=Un);const N=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch(k){}}),this.observers.push(M),N}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,P)}sendOne(P,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{H(this.observers[P])}catch(re){"undefined"!=typeof console&&console.error&&console.error(re)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Un(){}function _i(U,P=1e3,H=2){const re=P*Math.pow(H,U),M=Math.round(.5*re*(Math.random()-.5)*2);return Math.min(144e5,re+M)}function at(U){return U&&U._delegate?U._delegate:U}function An(U,P){return new Promise((H,re)=>{U.onsuccess=M=>{H(M.target.result)},U.onerror=M=>{var N;re(`${P}: ${null===(N=M.target.error)||void 0===N?void 0:N.message}`)}})}class kt{constructor(P){this._db=P,this.objectStoreNames=this._db.objectStoreNames}transaction(P,H="readonly"){return new Pe(this._db.transaction.call(this._db,P,H))}createObjectStore(P,H){return new de(this._db.createObjectStore(P,H))}close(){this._db.close()}}class Pe{constructor(P){this._transaction=P,this.complete=new Promise((H,re)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{re(this._transaction.error)},this._transaction.onabort=()=>{re(this._transaction.error)}})}objectStore(P){return new de(this._transaction.objectStore(P))}}class de{constructor(P){this._store=P}index(P){return new We(this._store.index(P))}createIndex(P,H,re){return new We(this._store.createIndex(P,H,re))}get(P){return An(this._store.get(P),"Error reading from IndexedDB")}put(P,H){return An(this._store.put(P,H),"Error writing to IndexedDB")}delete(P){return An(this._store.delete(P),"Error deleting from IndexedDB")}clear(){return An(this._store.clear(),"Error clearing IndexedDB object store")}}class We{constructor(P){this._index=P}get(P){return An(this._index.get(P),"Error reading from IndexedDB")}}function nt(U,P,H){return new Promise((re,M)=>{try{const N=indexedDB.open(U,P);N.onsuccess=k=>{re(new kt(k.target.result))},N.onerror=k=>{var ee;M(`Error opening indexedDB: ${null===(ee=k.target.error)||void 0===ee?void 0:ee.message}`)},N.onupgradeneeded=k=>{H(new kt(N.result),k.oldVersion,k.newVersion,new Pe(N.transaction))}}catch(N){M(`Error opening indexedDB: ${N.message}`)}})}function Dt(U){return It.apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(U){return new Promise((P,H)=>{try{const re=indexedDB.deleteDatabase(U);re.onsuccess=()=>{P()},re.onerror=M=>{var N;H(`Error deleting indexedDB database "${U}": ${null===(N=M.target.error)||void 0===N?void 0:N.message}`)}}catch(re){H(`Error deleting indexedDB database "${U}": ${re.message}`)}})})).apply(this,arguments)}},1654:(ut,Ie,F)=>{var p=F(5e3);let L=null;function O(){return L}const _e=new p.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function De(){return(0,p.LFG)(j)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let j=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function je(){return new j((0,p.LFG)(_e))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ce(n){return n&&"?"!==n[0]?"?"+n:n}let Q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ve(n){const e=(0,p.LFG)(_e).location;return new Ve((0,p.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const He=new p.OlP("appBaseHref");let Ve=(()=>{class n extends Q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ce(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Ce(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Ce(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(He,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n extends Q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(He,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),me=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(K(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ce(r))}normalize(t){return n.stripTrailingSlash(function ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,K(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ce(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ce(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ce,n.joinWithSlash=be,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(p.LFG(Q),p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ue(){return new me((0,p.LFG)(Q),(0,p.LFG)(le))}()},providedIn:"root"}),n})();function K(n){return n.replace(/\/index.html$/,"")}class is{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new is(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),ss(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ss(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ss(n,e){n.context.$implicit=e.item}let Yl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function ca(n){return"server"===n}let Eh=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new yu((0,p.LFG)(_e),window)}),n})();class yu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function da(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wh(this.window.history)||wh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function wh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fa extends class ha extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ge(n){L||(L=n)}(new fa)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xl(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function go(n){_u=_u||document.createElement("a"),_u.setAttribute("href",n);const e=_u.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function du(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _u,nn=null;const $n=new p.OlP("TRANSITION_ID"),vu=[{provide:p.ip1,useFactory:function ec(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[$n,_e,p.zs3],multi:!0}];class vi{static init(){(0,p.VLi)(new vi)}addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let gr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ps=new p.OlP("EventManagerPlugins");let mo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ps),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ki=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),as=(()=>{class n extends ki{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ks))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ks(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pa=/%COMP%/g;function pe(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?pe(n,o,t):(o=o.replace(pa,n),t.push(o))}return t}function Mt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let on=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Du(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new nc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new ga(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=pe(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(mo),p.LFG(as),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Du{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Mt(r)):this.eventManager.addEventListener(e,t,Mt(r))}}class nc extends Du{constructor(e,t,r,o){super(e),this.component=r;const u=pe(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function gg(n){return"_ngcontent-%COMP%".replace(pa,n)}(o+"-"+r.id),this.hostAttr=function tc(n){return"_nghost-%COMP%".replace(pa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ga extends Du{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=pe(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jv=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Dh=["alt","control","meta","shift"],bu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Cu=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Dh.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),d+=v+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function _o(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Rn.hasOwnProperty(e)&&(e=Rn[e]))}return bu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Dh.forEach(u=>{u!=o&&Fi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const rc=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function si(){fa.makeCurrent(),vi.init()},multi:!0},{provide:_e,useFactory:function Tu(){return(0,p.RDi)(document),document},deps:[]}]),ic=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function yg(){return new p.qLn},deps:[]},{provide:Ps,useClass:Jv,multi:!0,deps:[_e,p.R0b,p.Lbi]},{provide:Ps,useClass:Cu,multi:!0,deps:[_e]},{provide:on,useClass:on,deps:[mo,as,p.AFp]},{provide:p.FYo,useExisting:on},{provide:ki,useExisting:as},{provide:as,useClass:as,deps:[_e]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:mo,useClass:mo,deps:[Ps,p.R0b]},{provide:class sn{},useClass:gr,deps:[]}];let ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:$n,useExisting:p.AFp},vu]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:ic,imports:[Yl,p.hGG]}),n})();"undefined"!=typeof window&&window;var hn=F(8996),Ei=F(8306);const{isArray:vo}=Array,{getPrototypeOf:Ah,prototype:hc,keys:ls}=Object;function fc(n){if(1===n.length){const e=n[0];if(vo(e))return{args:e,keys:null};if(function vn(n){return n&&"object"==typeof n&&Ah(n)===hc}(e)){const t=ls(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ui=F(8421),cs=F(7669),En=F(5403),pt=F(4004);const{isArray:xu}=Array;function Ru(n){return(0,pt.U)(e=>function e0(n,e){return xu(e)?n(...e):n(e)}(n,e))}function pc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let gc=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),tr=(()=>{class n extends gc{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const nr=new p.OlP("NgValueAccessor"),va={provide:nr,useExisting:(0,p.Gpc)(()=>Bs),multi:!0},Sh=new p.OlP("CompositionEventMode");let Bs=(()=>{class n extends gc{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yc(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Sh,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([va]),p.qOj]}),n})();function wi(n){return null==n||0===n.length}const Hn=new p.OlP("NgValidators"),js=new p.OlP("NgAsyncValidators");function wa(n){return wi(n.value)?{required:!0}:null}function jr(n){return null}function Gs(n){return null!=n}function Ec(n){const e=(0,p.QGY)(n)?(0,hn.D)(n):n;return(0,p.CqO)(e),e}function Fu(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Bi(n,e){return e.map(t=>t(n))}function xh(n){return n.map(e=>function t0(n){return!n.validate}(e)?e:t=>e.validate(t))}function wc(n){return null!=n?function an(n){if(!n)return null;const e=n.filter(Gs);return 0==e.length?null:function(t){return Fu(Bi(t,e))}}(xh(n)):null}function Ic(n){return null!=n?function Ag(n){if(!n)return null;const e=n.filter(Gs);return 0==e.length?null:function(t){return function Nu(...n){const e=(0,cs.jO)(n),{args:t,keys:r}=fc(n),o=new Ei.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let v=d,D=d;for(let A=0;A<d;A++){let S=!1;(0,Ui.Xf)(t[A]).subscribe((0,En.x)(u,B=>{S||(S=!0,D--),g[A]=B},()=>v--,void 0,()=>{(!v||!S)&&(D||u.next(r?pc(r,g):g),u.complete())}))}});return e?o.pipe(Ru(e)):o}(Bi(t,e).map(Ec)).pipe((0,pt.U)(Fu))}}(xh(n)):null}function Sg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Lu(n){return n?Array.isArray(n)?n:[n]:[]}function ds(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dc(n,e){const t=Lu(e);return Lu(n).forEach(o=>{ds(t,o)||t.push(o)}),t}function wn(n,e){return Lu(e).filter(t=>!ds(n,t))}class Eo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ic(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $r extends Eo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gn extends Eo{get formDirective(){return null}get path(){return null}}class Da{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let ba=(()=>{class n extends Da{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36($r,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),Ca=(()=>{class n extends Da{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Gn,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function wo(n,e){Hi(n,e),e.valueAccessor.writeValue(n.value),function Ta(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Fh(n,e)})}(n,e),function Pg(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function kh(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Fh(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ph(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $i(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hi(n,e){const t=function Mg(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Sg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function xg(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Sg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();$i(e._rawValidators,o),$i(e._rawAsyncValidators,o)}function Fh(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Sa(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const hs="VALID",Wi="INVALID",fs="PENDING",Ii="DISABLED";function xa(n){return(ju(n)?n.validators:n)||null}function To(n){return Array.isArray(n)?wc(n):n||null}function Ao(n,e){return(ju(e)?e.asyncValidators:n)||null}function Ac(n){return Array.isArray(n)?Ic(n):n||null}function ju(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ps=n=>n instanceof xc;function Sc(n){return(n=>n instanceof Bg)(n)?n.value:n.getRawValue()}function Ug(n,e){const t=ps(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function So(n,e){ps(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new p.vHH(1002,"")})}class Mc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=To(this._rawValidators),this._composedAsyncValidatorFn=Ac(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hs}get invalid(){return this.status===Wi}get pending(){return this.status==fs}get disabled(){return this.status===Ii}get enabled(){return this.status!==Ii}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=To(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ac(e)}addValidators(e){this.setValidators(Dc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wn(e,this._rawAsyncValidators))}hasValidator(e){return ds(this._rawValidators,e)}hasAsyncValidator(e){return ds(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fs,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ii,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hs,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hs||this.status===fs)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ii:hs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fs,this._hasOwnPendingAsyncValidator=!0;const t=Ec(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Vg(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ps(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof jg)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Ii:this.errors?Wi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fs)?fs:this._anyControlsHaveStatus(Wi)?Wi:hs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ju(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Bg extends Mc{constructor(e=null,t,r){super(xa(t),Ao(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ju(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Sa(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Sa(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class xc extends Mc{constructor(e,t,r){super(xa(t),Ao(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){So(this,e),Object.keys(e).forEach(r=>{Ug(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Sc(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class jg extends Mc{constructor(e,t,r){super(xa(t),Ao(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){So(this,e),e.forEach((r,o)=>{Ug(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Sc(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const $g={provide:Gn,useExisting:(0,p.Gpc)(()=>Mo)},gs=(()=>Promise.resolve(null))();let Mo=(()=>{class n extends Gn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new xc({},wc(t),Ic(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gs.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wo(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gs.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gs.then(()=>{const r=this._findContainer(t.path),o=new xc({});(function Aa(n,e){Hi(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gs.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gs.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Co(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Hn,10),p.Y36(js,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([$g]),p.qOj]}),n})();const Pc={provide:$r,useExisting:(0,p.Gpc)(()=>Hu)},kc=(()=>Promise.resolve(null))();let Hu=(()=>{class n extends $r{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new Bg,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Gi(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Bs?t=u:function Fg(n){return Object.getPrototypeOf(n.constructor)===tr}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bo(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){kc.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;kc.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function qs(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Gn,9),p.Y36(Hn,10),p.Y36(js,10),p.Y36(nr,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Pc]),p.qOj,p.TTD]}),n})(),Uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Hg={provide:nr,useExisting:(0,p.Gpc)(()=>Na),multi:!0};let Na=(()=>{class n extends tr{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[p._Bn([Hg]),p.qOj]}),n})(),zi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Fc=new p.OlP("NgModelWithFormControlWarning"),q={provide:nr,useExisting:(0,p.Gpc)(()=>st),multi:!0};function fe(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let st=(()=>{class n extends tr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=fe(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Xe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([q]),p.qOj]}),n})(),vt=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(fe(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(st,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const un={provide:nr,useExisting:(0,p.Gpc)(()=>Ro),multi:!0};function Di(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ro=(()=>{class n extends tr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let g=0;g<d.length;g++){const D=this._getOptionValue(d[g].value);o.push(D)}}else{const d=r.options;for(let g=0;g<d.length;g++){const v=d[g];if(v.selected){const D=this._getOptionValue(v.value);o.push(D)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Ks(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([un]),p.qOj]}),n})(),No=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Di(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Di(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ro,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function Pa(n){return"number"==typeof n?n:parseFloat(n)}let ms=(()=>{class n{constructor(){this._validator=jr}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jr,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const Wh={provide:Hn,useExisting:(0,p.Gpc)(()=>ka),multi:!0};let ka=(()=>{class n extends ms{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Pa(t),this.createValidator=t=>function vc(n){return e=>{if(wi(e.value)||wi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[p._Bn([Wh]),p.qOj]}),n})();const zh={provide:Hn,useExisting:(0,p.Gpc)(()=>Gu),multi:!0};let Gu=(()=>{class n extends ms{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Pa(t),this.createValidator=t=>function Mh(n){return e=>{if(wi(e.value)||wi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[p._Bn([zh]),p.qOj]}),n})();const Oo={provide:Hn,useExisting:(0,p.Gpc)(()=>Wu),multi:!0};let Wu=(()=>{class n extends ms{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Zg(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>wa}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Oo]),p.qOj]}),n})(),QD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[zi]]}),n})(),Vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[QD]}),n})(),Or=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fc,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[QD]}),n})();function et(...n){const e=(0,cs.yG)(n);return(0,hn.D)(n,e)}var bi=F(7579);class oi extends bi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zu=F(4671),eb=F(9672);function Yg(n,e,t){n?(0,eb.f)(t,n,e):e()}var Zh=F(576);function Uc(n,e){const t=(0,Zh.m)(n)?n:()=>n,r=o=>o.error(t());return new Ei.y(e?o=>e.schedule(r,0,o):r)}const Kh=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qu=F(8189);function Qg(...n){return function rb(){return(0,qu.J)(1)}()((0,hn.D)(n,(0,cs.yG)(n)))}function Yh(n){return new Ei.y(e=>{(0,Ui.Xf)(n()).subscribe(e)})}var Zu=F(515),Jg=F(727),rr=F(4482);function f0(){return(0,rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,En.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ib extends Ei.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jg.w0;const t=this.getSubject();e.add(this.source.subscribe((0,En.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jg.w0.EMPTY)}return e}refCount(){return f0()(this)}}function Pr(n,e){return(0,rr.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,En.x)(r,v=>{null==o||o.unsubscribe();let D=0;const A=u++;(0,Ui.Xf)(n(v,A)).subscribe(o=(0,En.x)(r,S=>r.next(e?e(v,S,A,D++):S),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var Xg=F(5698);function Qh(...n){const e=(0,cs.yG)(n);return(0,rr.e)((t,r)=>{(e?Qg(n,t,e):Qg(n,t)).subscribe(r)})}function p0(n,e,t,r,o){return(u,d)=>{let g=t,v=e,D=0;u.subscribe((0,En.x)(d,A=>{const S=D++;v=g?n(v,A,S):(g=!0,A),r&&d.next(v)},o&&(()=>{g&&d.next(v),d.complete()})))}}function Bc(n,e){return(0,rr.e)(p0(n,e,arguments.length>=2,!0))}function Ys(n,e){return(0,rr.e)((t,r)=>{let o=0;t.subscribe((0,En.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Po(n){return(0,rr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,En.x)(t,void 0,void 0,d=>{u=(0,Ui.Xf)(n(d,Po(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var yr=F(5577);function jc(n,e){return(0,Zh.m)(e)?(0,yr.z)(n,e,1):(0,yr.z)(n,1)}function em(n){return n<=0?()=>Zu.E:(0,rr.e)((e,t)=>{let r=[];e.subscribe((0,En.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function g0(n=sb){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe((0,En.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function sb(){return new Kh}function Fa(n){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe((0,En.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ku(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((o,u)=>n(o,u,r)):zu.y,(0,Xg.q)(1),t?Fa(e):g0(()=>new Kh))}function ai(n,e,t){const r=(0,Zh.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,rr.e)((o,u)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let g=!0;o.subscribe((0,En.x)(u,v=>{var D;null===(D=r.next)||void 0===D||D.call(r,v),u.next(v)},()=>{var v;g=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},v=>{var D;g=!1,null===(D=r.error)||void 0===D||D.call(r,v),u.error(v)},()=>{var v,D;g&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):zu.y}class ko{constructor(e,t){this.id=e,this.url=t}}class Ci extends ko{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class La extends ko{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jh extends ko{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ob extends ko{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class y0 extends ko{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $c extends ko{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _0 extends ko{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class v0 extends ko{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tm extends ko{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nm{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class BM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rm{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E0{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class ab{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qu(n){return new ab(n)}const I0="ngNavigationCancelingError";function im(n){const e=Error("NavigationCancelingError: "+n);return e[I0]=!0,e}function lb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ti(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!sm(n[o],e[o]))return!1;return!0}function sm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ef(n){return Array.prototype.concat.apply([],n)}function b0(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qi(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,hn.D)(Promise.resolve(n)):et(n)}const C0={exact:function A0(n,e,t){if(!Qs(n.segments,e.segments)||!Ju(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!A0(n.children[r],e.children[r],t))return!1;return!0},subset:am},om={exact:function tf(n,e){return Ti(n,e)},subset:function S0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sm(n[t],e[t]))},ignored:()=>!0};function T0(n,e,t){return C0[t.paths](n.root,e.root,t.matrixParams)&&om[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function am(n,e,t){return um(n,e,e.segments,t)}function um(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Qs(o,t)||e.hasChildren()||!Ju(o,t,r))}if(n.segments.length===t.length){if(!Qs(n.segments,t)||!Ju(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!am(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Qs(n.segments,o)&&Ju(n.segments,o,r)&&n.children[At])&&um(n.children[At],e,u,r)}}function Ju(n,e,t){return e.every((r,o)=>om[t](n[o].parameters,r.parameters))}class Fo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return cb.serialize(this)}}class xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hc(this)}}class Lo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qu(this.parameters)),this._parameterMap}toString(){return N0(this)}}function Qs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class nf{}class Xu{parse(e){const t=new mb(e);return new Fo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gc(e.root,!0)}`,r=function db(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Wc(t)}=${Wc(o)}`).join("&"):`${Wc(t)}=${Wc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lm(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cb=new Xu;function Hc(n){return n.segments.map(e=>N0(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return Hc(n);if(e){const t=n.children[At]?Gc(n.children[At],!1):"",r=[];return zn(n.children,(o,u)=>{u!==At&&r.push(`${u}:${Gc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function x0(n,e){let t=[];return zn(n.children,(r,o)=>{o===At&&(t=t.concat(e(r,o)))}),zn(n.children,(r,o)=>{o!==At&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===At?[Gc(n.children[At],!1)]:[`${o}:${Gc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${Hc(n)}/${t[0]}`:`${Hc(n)}/(${t.join("//")})`}}function R0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wc(n){return R0(n).replace(/%3B/gi,";")}function rf(n){return R0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cm(n){return decodeURIComponent(n)}function dm(n){return cm(n.replace(/\+/g,"%20"))}function N0(n){return`${rf(n.path)}${function O0(n){return Object.keys(n).map(e=>`;${rf(e)}=${rf(n[e])}`).join("")}(n.parameters)}`}const hb=/^[^\/()?;=#]+/;function Gr(n){const e=n.match(hb);return e?e[0]:""}const fb=/^[^=?&#]+/,pb=/^[^&#]+/;class mb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new xt(e,t)),r}parseSegment(){const e=Gr(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Lo(cm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Gr(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Gr(this.remaining);o&&(r=o,this.capture(r))}e[cm(t)]=cm(r)}parseQueryParam(e){const t=function P0(n){const e=n.match(fb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function gb(n){const e=n.match(pb);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=dm(t),u=dm(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gr(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[At]:new xt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class k0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return hm(e,this._root).map(t=>t.value)}}function sf(n,e){if(n===e.value)return e;for(const t of e.children){const r=sf(n,t);if(r)return r}return null}function hm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=hm(n,t);if(r.length)return r.unshift(e),r}return[]}class Js{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function el(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gt extends k0{constructor(e,t){super(e),this.snapshot=t,Zc(this,e)}toString(){return this.snapshot.toString()}}function fm(n,e){const t=function F0(n,e){const d=new qc([],{},{},"",{},At,e,null,n.root,-1,{});return new L0("",new Js(d,[]))}(n,e),r=new oi([new Lo("",{})]),o=new oi({}),u=new oi({}),d=new oi({}),g=new oi(""),v=new Ua(r,o,d,g,u,At,e,t.root);return v.snapshot=t.root,new gt(new Js(v,[]),t)}class Ua{constructor(e,t,r,o,u,d,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Qu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Qu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Zi(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qc{constructor(e,t,r,o,u,d,g,v,D,A,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=v,this._urlSegment=D,this._lastPathIndex=A,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class L0 extends k0{constructor(e,t){super(t),this.url=e,Zc(this,t)}toString(){return _s(this._root)}}function Zc(n,e){e.value._routerState=n,e.children.forEach(t=>Zc(n,t))}function _s(n){const e=n.children.length>0?` { ${n.children.map(_s).join(", ")} } `:"";return`${n.value}${e}`}function Kc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ti(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ti(e.params,t.params)||n.params.next(t.params),function D0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ti(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ti(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function of(n,e){const t=Ti(n.params,e.params)&&function M0(n,e){return Qs(n,e)&&n.every((t,r)=>Ti(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||of(n.parent,e.parent))}function af(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function V0(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return af(n,r,o);return af(n,r)})}(n,e,t);return new Js(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>af(n,g)),d}}const r=function $M(n){return new Ua(new oi(n.url),new oi(n.params),new oi(n.queryParams),new oi(n.fragment),new oi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>af(n,u));return new Js(r,o)}}function Ba(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ja(n){return"object"==typeof n&&null!=n&&n.outlets}function Yc(n,e,t,r,o){let u={};if(r&&zn(r,(g,v)=>{u[v]=Array.isArray(g)?g.map(D=>`${D}`):`${g}`}),n===e)return new Fo(t,u,o);const d=lf(n,e,t);return new Fo(d,u,o)}function lf(n,e,t){const r={};return zn(n.children,(o,u)=>{r[u]=o===e?t:lf(o,e,t)}),new xt(n.segments,r)}class yb{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ba(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(ja);if(o&&o!==b0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gm{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wb(n,e,t){if(n||(n=new xt([],{})),0===n.segments.length&&n.hasChildren())return cf(n,e,t);const r=function HM(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(ja(g))break;const v=`${g}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&D&&"object"==typeof D&&void 0===D.outlets){if(!hf(v,D,d))return u;r+=2}else{if(!hf(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xt(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new xt(n.segments.slice(r.pathIndex),n.children),cf(u,0,o)}return r.match&&0===o.length?new xt(n.segments,{}):r.match&&!n.hasChildren()?df(n,e,t):r.match?cf(n,0,o):df(n,e,t)}function cf(n,e,t){if(0===t.length)return new xt(n.segments,{});{const r=function U0(n){return ja(n[0])?n[0].outlets:{[At]:n}}(t),o={};return zn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=wb(n.children[d],e,u))}),zn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new xt(n.segments,o)}}function df(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(ja(u)){const v=B0(u.outlets);return new xt(r,v)}if(0===o&&Ba(t[0])){r.push(new Lo(n.segments[e].path,j0(t[0]))),o++;continue}const d=ja(u)?u.outlets[At]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&Ba(g)?(r.push(new Lo(d,j0(g))),o+=2):(r.push(new Lo(d,{})),o++)}return new xt(r,{})}function B0(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=df(new xt([],{}),0,t))}),e}function j0(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function hf(n,e,t){return n==t.path&&Ti(e,t.parameters)}class WM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=el(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),zn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=el(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=el(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=el(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new E0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Yu(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Kc(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Kc(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function zM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=v,d.outlet&&d.outlet.activateWith(o,v),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class $0{constructor(e,t){this.routes=e,this.module=t}}function $a(n){return"function"==typeof n}function tl(n){return n instanceof Fo}const Ha=Symbol("INITIAL_VALUE");function Qc(){return Pr(n=>function h0(...n){const e=(0,cs.yG)(n),t=(0,cs.jO)(n),{args:r,keys:o}=fc(n);if(0===r.length)return(0,hn.D)([],e);const u=new Ei.y(function tb(n,e,t=zu.y){return r=>{Yg(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let v=0;v<o;v++)Yg(e,()=>{const D=(0,hn.D)(n[v],e);let A=!1;D.subscribe((0,En.x)(r,S=>{u[v]=S,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>pc(o,d):zu.y));return t?u.pipe(Ru(t)):u}(n.map(e=>e.pipe((0,Xg.q)(1),Qh(Ha)))).pipe(Bc((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Ha?o:(u===Ha&&(r=!0),r||!1!==u&&d!==t.length-1&&!tl(u)?o:u),e)},Ha),Ys(e=>e!==Ha),(0,pt.U)(e=>tl(e)?e:!0===e),(0,Xg.q)(1)))}class H0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ga,this.attachRef=null}}class Ga{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new H0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ff=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,v=new mm(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ga),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ua?this.route:e===Ga?this.childContexts:this.parent.get(e,t)}}let G0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[ff],encapsulation:2}),n})();function Xs(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];W0(r,Ib(e,r))}}function W0(n,e){n.children&&Xs(n.children,e)}function Ib(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Jc(n){const e=n.children&&n.children.map(Jc),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=G0),t}function Ai(n){return n.outlet||At}function ym(n,e){const t=n.filter(r=>Ai(r)===e);return t.push(...n.filter(r=>Ai(r)!==e)),t}const z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pf(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},z0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||lb)(t,n,e);if(!u)return Object.assign({},z0);const d={};zn(u.posParams,(v,D)=>{d[D]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Uo(n,e,t,r,o="corrected"){if(t.length>0&&function rl(n,e,t){return t.some(r=>eo(n,e,r)&&Ai(r)!==At)}(n,t,r)){const d=new xt(e,function _m(n,e,t,r){const o={};o[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ai(u)!==At){const d=new xt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Ai(u)]=d}return o}(n,e,r,new xt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Xc(n,e,t){return t.some(r=>eo(n,e,r))}(n,t,r)){const d=new xt(n.segments,function nl(n,e,t,r,o,u){const d={};for(const g of r)if(eo(n,t,g)&&!o[Ai(g)]){const v=new xt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Ai(g)]=v}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new xt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function eo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function q0(n,e,t,r){return!!(Ai(n)===r||r!==At&&eo(e,t,n))&&("**"===n.path||pf(e,n,t).matched)}function vm(n,e,t){return 0===e.length&&!n.children[t]}class ed{constructor(e){this.segmentGroup=e||null}}class gf{constructor(e){this.urlTree=e}}function Wa(n){return Uc(new ed(n))}function Em(n){return Uc(new gf(n))}class QM{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Uo(this.urlTree.root,[],[],this.config).segmentGroup,t=new xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,At).pipe((0,pt.U)(u=>this.createUrlTree(yf(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Po(u=>{if(u instanceof gf)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ed?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,At).pipe((0,pt.U)(o=>this.createUrlTree(yf(o),e.queryParams,e.fragment))).pipe(Po(o=>{throw o instanceof ed?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new xt([],{[At]:e}):e;return new Fo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new xt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,hn.D)(o).pipe(jc(u=>{const d=r.children[u],g=ym(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,pt.U)(v=>({segment:v,outlet:u})))}),Bc((u,d)=>(u[d.outlet]=d.segment,u),{}),function ys(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((o,u)=>n(o,u,r)):zu.y,em(1),t?Fa(e):g0(()=>new Kh))}())}expandSegment(e,t,r,o,u,d){return(0,hn.D)(r).pipe(jc(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(Po(D=>{if(D instanceof ed)return et(null);throw D}))),Ku(g=>!!g),Po((g,v)=>{if(g instanceof Kh||"EmptyError"===g.name)return vm(t,o,u)?et(new xt([],{})):Wa(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return q0(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Wa(t):Wa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Em(u):this.lineralizeSegments(r,u).pipe((0,yr.z)(d=>{const g=new xt(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:v,remainingSegments:D,positionalParamSegments:A}=pf(t,o,u);if(!g)return Wa(t);const S=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?Em(S):this.lineralizeSegments(o,S).pipe((0,yr.z)(B=>this.expandSegment(e,t,r,B.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,pt.U)(S=>(r._loadedConfig=S,new xt(o,{})))):et(new xt(o,{}));const{matched:d,consumedSegments:g,remainingSegments:v}=pf(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,yr.z)(A=>{const S=A.module,B=A.routes,{segmentGroup:G,slicedSegments:te}=Uo(t,g,v,B),Se=new xt(G.segments,G.children);if(0===te.length&&Se.hasChildren())return this.expandChildren(S,B,Se).pipe((0,pt.U)(Pt=>new xt(g,Pt)));if(0===B.length&&0===te.length)return et(new xt(g,{}));const Ze=Ai(r)===u;return this.expandSegment(S,Se,B,te,Ze?At:u,!0).pipe((0,pt.U)(wt=>new xt(g.concat(wt.segments),wt.children)))})):Wa(t)}getChildConfig(e,t,r){return t.children?et(new $0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,pt.U)(u=>(t._loadedConfig=u,u))):function Db(n){return Uc(im(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):et(new $0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?et(o.map(d=>{const g=e.get(d);let v;if(function ZM(n){return n&&$a(n.canLoad)}(g))v=g.canLoad(t,r);else{if(!$a(g))throw new Error("Invalid CanLoad guard");v=g(t,r)}return qi(v)})).pipe(Qc(),ai(d=>{if(!tl(d))return;const g=im(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,pt.U)(d=>!0===d)):et(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return et(r);if(o.numberOfChildren>1||!o.children[At])return Uc(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Fo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return zn(t.children,(g,v)=>{d[v]=this.createSegmentGroup(e,g,r,o)}),new xt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function yf(n){const e={};for(const r of Object.keys(n.children)){const u=yf(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function K0(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new xt(n.segments.concat(e.segments),e.children)}return n}(new xt(n.segments,e))}class wm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _f{constructor(e,t){this.component=e,this.route=t}}function Cb(n,e,t){const r=n._root;return Ef(r,e?e._root:null,t,[r.value])}function vf(n,e,t){const r=function Tb(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ef(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=el(e);return n.children.forEach(d=>{(function JM(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Y0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qs(n.url,e.url)||!Ti(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!of(n,e)||!Ti(n.queryParams,e.queryParams);default:return!of(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new wm(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Ef(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new _f(g.outlet.component,d))}else d&&wf(e,g,o),o.canActivateChecks.push(new wm(r)),Ef(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),zn(u,(d,g)=>wf(d,t.getContext(g),o)),o}function wf(n,e,t){const r=el(n),o=n.value;zn(r,(u,d)=>{wf(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new _f(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class X0{}function eE(n){return new Ei.y(e=>e.error(n))}class tE{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Uo(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,At);if(null===t)return null;const r=new qc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Js(r,t),u=new L0(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=zc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],g=ym(e,u),v=this.processSegmentGroup(g,d,u);if(null===v)return null;r.push(...v)}const o=If(r);return function nE(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return vm(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!q0(e,t,r,o))return null;let u,d=[],g=[];if("**"===e.path){const G=r.length>0?b0(r).parameters:{};u=new qc(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dm(e),Ai(e),e.component,e,rE(t),Pb(t)+r.length,iE(e))}else{const G=pf(t,e,r);if(!G.matched)return null;d=G.consumedSegments,g=G.remainingSegments,u=new qc(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dm(e),Ai(e),e.component,e,rE(t),Pb(t)+d.length,iE(e))}const v=function Ob(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:A}=Uo(t,d,g,v.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===A.length&&D.hasChildren()){const G=this.processChildren(v,D);return null===G?null:[new Js(u,G)]}if(0===v.length&&0===A.length)return[new Js(u,[])];const S=Ai(e)===o,B=this.processSegment(v,D,A,S?At:o);return null===B?null:[new Js(u,B)]}}function vs(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function If(n){const e=[],t=new Set;for(const r of n){if(!vs(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=If(r.children);e.push(new Js(r.value,o))}return e.filter(r=>!t.has(r))}function rE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Pb(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Dm(n){return n.data||{}}function iE(n){return n.resolve||{}}function sE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function td(n){return Pr(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,pt.U)(()=>e)):et(e)})}class Tm extends class Cm{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bf=new p.OlP("ROUTES");class oE{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,pt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new $0(ef(d.injector.get(bf,void 0,p.XFs.Self|p.XFs.Optional)).map(Jc),d)}),Po(u=>{throw t._loader$=void 0,u}));return t._loader$=new ib(o,()=>new bi.x).pipe(f0()),t._loader$}loadModuleFactory(e){return qi(e()).pipe((0,yr.z)(t=>t instanceof p.YKP?et(t):(0,hn.D)(this.compiler.compileModuleAsync(t))))}}class Am{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ex(n){throw n}function Bb(n,e,t){return e.parse("/")}function Sm(n,e){return et(null)}const aE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wr=(()=>{class n{constructor(t,r,o,u,d,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bi.x,this.errorHandler=ex,this.malformedUriErrorHandler=Bb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Sm,afterPreactivation:Sm},this.urlHandlingStrategy=new Am,this.routeReuseStrategy=new Tm,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const S=d.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Va(){return new Fo(new xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new oE(d,g,B=>this.triggerEvent(new Xh(B)),B=>this.triggerEvent(new nm(B))),this.routerState=fm(this.currentUrlTree,this.rootComponentType),this.transitions=new oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ys(o=>0!==o.id),(0,pt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pr(o=>{let u=!1,d=!1;return et(o).pipe(ai(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pr(g=>{const v=this.browserUrlTree.toString(),D=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Es(g.source)&&(this.browserUrlTree=g.extractedUrl),et(g).pipe(Pr(S=>{const B=this.transitions.getValue();return r.next(new Ci(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),B!==this.transitions.getValue()?Zu.E:Promise.resolve(S)}),function bb(n,e,t,r){return Pr(o=>function Z0(n,e,t,r,o){return new QM(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,pt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ai(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function kb(n,e,t,r,o){return(0,yr.z)(u=>function Nb(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new tE(n,e,t,r,o,u).recognize();return null===d?eE(new X0):et(d)}catch(d){return eE(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,pt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),ai(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(G,S)}this.browserUrlTree=S.urlAfterRedirects}const B=new y0(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(B)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:G,source:te,restoredState:Se,extras:Ze}=g,Et=new Ci(B,this.serializeUrl(G),te,Se);r.next(Et);const wt=fm(G,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},g),{targetSnapshot:wt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Zu.E}),td(g=>{const{targetSnapshot:v,id:D,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:B,replaceUrl:G}}=g;return this.hooks.beforePreactivation(v,{navigationId:D,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!B,replaceUrl:!!G})}),ai(g=>{const v=new $c(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,pt.U)(g=>Object.assign(Object.assign({},g),{guards:Cb(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Ab(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function Im(n,e,t,r){return(0,hn.D)(n).pipe((0,yr.z)(o=>function Rb(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(g=>{const v=vf(g,e,o);let D;if(function Vo(n){return n&&$a(n.canDeactivate)}(v))D=qi(v.canDeactivate(n,e,t,r));else{if(!$a(v))throw new Error("Invalid CanDeactivate guard");D=qi(v(n,e,t,r))}return D.pipe(Ku())})).pipe(Qc()):et(!0)}(o.component,o.route,t,e,r)),Ku(o=>!0!==o,!0))}(d,r,o,n).pipe((0,yr.z)(g=>g&&function qM(n){return"boolean"==typeof n}(g)?function Q0(n,e,t,r){return(0,hn.D)(e).pipe(jc(o=>Qg(function Mb(n,e){return null!==n&&e&&e(new BM(n)),et(!0)}(o.route.parent,r),function Sb(n,e){return null!==n&&e&&e(new rm(n)),et(!0)}(o.route,r),function J0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function ui(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Yh(()=>et(d.guards.map(v=>{const D=vf(v,d.node,t);let A;if(function YM(n){return n&&$a(n.canActivateChild)}(D))A=qi(D.canActivateChild(r,n));else{if(!$a(D))throw new Error("Invalid CanActivateChild guard");A=qi(D(r,n))}return A.pipe(Ku())})).pipe(Qc())));return et(u).pipe(Qc())}(n,o.path,t),function xb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const o=r.map(u=>Yh(()=>{const d=vf(u,e,t);let g;if(function KM(n){return n&&$a(n.canActivate)}(d))g=qi(d.canActivate(e,n));else{if(!$a(d))throw new Error("Invalid CanActivate guard");g=qi(d(e,n))}return g.pipe(Ku())}));return et(o).pipe(Qc())}(n,o.route,t))),Ku(o=>!0!==o,!0))}(r,u,n,e):et(g)),(0,pt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),ai(g=>{if(tl(g.guardsResult)){const D=im(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw D.url=g.guardsResult,D}const v=new _0(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),Ys(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),td(g=>{if(g.guards.canActivateChecks.length)return et(g).pipe(ai(v=>{const D=new v0(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}),Pr(v=>{let D=!1;return et(v).pipe(function Fb(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return et(t);let u=0;return(0,hn.D)(o).pipe(jc(d=>function bm(n,e,t,r){return function Lb(n,e,t,r){const o=sE(n);if(0===o.length)return et({});const u={};return(0,hn.D)(o).pipe((0,yr.z)(d=>function Df(n,e,t,r){const o=vf(n,e,r);return qi(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe(ai(g=>{u[d]=g}))),em(1),(0,yr.z)(()=>sE(u).length===o.length?et(u):Zu.E))}(n._resolve,n,e,r).pipe((0,pt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),zc(n,t).resolve),null)))}(d.route,r,n,e)),ai(()=>u++),em(1),(0,yr.z)(d=>u===o.length?et(t):Zu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ai({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),ai(v=>{const D=new tm(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}))}),td(g=>{const{targetSnapshot:v,id:D,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:B,replaceUrl:G}}=g;return this.hooks.afterPreactivation(v,{navigationId:D,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!B,replaceUrl:!!G})}),(0,pt.U)(g=>{const v=function pm(n,e,t){const r=af(n,e._root,t?t._root:void 0);return new gt(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:v})}),ai(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new WM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),ai({next(){u=!0},complete(){u=!0}}),function m0(n){return(0,rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Po(g=>{if(d=!0,function ub(n){return n&&n[I0]}(g)){const v=tl(g.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const D=new Jh(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(D),v?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Es(o.source)};this.scheduleNavigation(A,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new ob(o.id,this.serializeUrl(o.extractedUrl),g);r.next(v);try{o.resolve(this.errorHandler(g))}catch(D){o.reject(D)}}return Zu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const v=Object.assign({},d);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Xs(t),this.config=t.map(Jc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:v}=r,D=o||this.routerState.root,A=v?this.currentUrlTree.fragment:d;let S=null;switch(g){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function uf(n,e,t,r,o){if(0===t.length)return Yc(e.root,e.root,e.root,r,o);const u=function _b(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yb(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return zn(u.outlets,(v,D)=>{g[D]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new yb(t,e,r)}(t);if(u.toRoot())return Yc(e.root,e.root,new xt([],{}),r,o);const d=function vb(n,e,t){if(n.isAbsolute)return new gm(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new gm(u,u===e.root,0)}const r=Ba(n.commands[0])?0:1;return function Eb(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new gm(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=d.processChildren?cf(d.segmentGroup,d.index,u.commands):wb(d.segmentGroup,d.index,u.commands);return Yc(e.root,d.segmentGroup,g,r,o)}(D,this.currentUrlTree,t,S,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=tl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function lE(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},aE):!1===r?Object.assign({},uE):r,tl(t))return T0(this.currentUrlTree,t,o);const u=this.parseUrl(t);return T0(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new La(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var g,v;if(this.disposed)return Promise.resolve(!1);let D,A,S;d?(D=d.resolve,A=d.reject,S=d.promise):S=new Promise((te,Se)=>{D=te,A=Se});const B=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):G=0,this.setTransition({id:B,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:A,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(te=>Promise.reject(te))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Jh(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Es(n){return"imperative"!==n}let il=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new bi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:sl(this.skipLocationChange),replaceUrl:sl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Wr),p.Y36(Ua),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})(),Cf=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new bi.x,this.subscription=t.events.subscribe(u=>{u instanceof La&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:sl(this.skipLocationChange),replaceUrl:sl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Wr),p.Y36(Ua),p.Y36(Q))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function sl(n){return""===n||!!n}let jb=(()=>{class n{constructor(t,r,o,u,d,g){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=d,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=t.events.subscribe(v=>{v instanceof La&&this.update()})}ngAfterContentInit(){et(this.links.changes,this.linksWithHrefs.changes,et(null)).pipe((0,qu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,hn.D)(r).pipe((0,qu.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Mm(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Wr),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(il,8),p.Y36(Cf,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(p.Suo(o,il,5),p.Suo(o,Cf,5)),2&t){let u;p.iGM(u=p.CRH())&&(r.links=u),p.iGM(u=p.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),n})();class xm{}class ol{preload(e,t){return et(null)}}let cE=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new oE(o,r,v=>t.triggerEvent(new Xh(v)),v=>t.triggerEvent(new nm(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ys(t=>t instanceof La),jc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,hn.D)(o).pipe((0,qu.J)(),(0,pt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Wr),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(xm))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),nd=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof La&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof w0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new w0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=new p.OlP("ROUTER_CONFIGURATION"),Nm=new p.OlP("ROUTER_FORROOT_GUARD"),Hb=[me,{provide:nf,useClass:Xu},{provide:Wr,useFactory:function Wb(n,e,t,r,o,u,d={},g,v){const D=new Wr(null,n,e,t,r,o,ef(u));return g&&(D.urlHandlingStrategy=g),v&&(D.routeReuseStrategy=v),function zb(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,D),d.enableTracing&&D.events.subscribe(A=>{var S,B;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(B=console.groupEnd)||void 0===B||B.call(console)}),D},deps:[nf,Ga,me,p.zs3,p.Sil,bf,Bo,[class Ub{},new p.FiY],[class Vb{},new p.FiY]]},Ga,{provide:Ua,useFactory:function ul(n){return n.routerState.root},deps:[Wr]},cE,ol,class Rm{preload(e,t){return t().pipe(Po(()=>et(null)))}},{provide:Bo,useValue:{enableTracing:!1}}];function Om(){return new p.PXZ("Router",Wr)}let dE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Hb,Pm(t),{provide:Nm,useFactory:al,deps:[[Wr,new p.FiY,new p.tp0]]},{provide:Bo,useValue:r||{}},{provide:Q,useFactory:hE,deps:[le,[new p.tBr(He),new p.FiY],Bo]},{provide:nd,useFactory:Gb,deps:[Wr,Eh,Bo]},{provide:xm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ol},{provide:p.PXZ,multi:!0,useFactory:Om},[km,{provide:p.ip1,multi:!0,useFactory:qb,deps:[km]},{provide:fE,useFactory:Zb,deps:[km]},{provide:p.tb,multi:!0,useExisting:fE}]]}}static forChild(t){return{ngModule:n,providers:[Pm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Nm,8),p.LFG(Wr,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Gb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new nd(n,e,t)}function hE(n,e,t={}){return t.useHash?new we(n,e):new Ve(n,e)}function al(n){return"guarded"}function Pm(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:bf,multi:!0,useValue:n}]}let km=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bi.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(Wr),d=this.injector.get(Bo);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Bo),o=this.injector.get(cE),u=this.injector.get(nd),d=this.injector.get(Wr),g=this.injector.get(p.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function qb(n){return n.appInitializer.bind(n)}function Zb(n){return n.bootstrapListener.bind(n)}const fE=new p.OlP("Router Initializer");var Ft=F(9681);(0,Ft.registerVersion)("firebase","9.7.0","app");var W=F(5861),ze=F(2090),Ki=F(4859),Yi=F(1877);const yE="@firebase/installations",Fm="w:0.5.8",_E="FIS_v2",Is=new ze.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Vm(n){return n instanceof ze.ZR&&n.code.includes("request-failed")}function vE({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Si(n){return{token:n.token,requestStatus:2,expiresIn:rx(n.expiresIn),creationTime:Date.now()}}function EE(n,e){return wE.apply(this,arguments)}function wE(){return(wE=(0,W.Z)(function*(n,e){const r=(yield e.json()).error;return Is.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Um({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Bm(n,{refreshToken:e}){const t=Um(n);return t.append("Authorization",function IE(n){return`${_E} ${n}`}(e)),t}function Af(n){return jm.apply(this,arguments)}function jm(){return(jm=(0,W.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function rx(n){return Number(n.replace("s","000"))}function $m(n,e){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,W.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=vE(n),o=Um(n),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const g={method:"POST",headers:o,body:JSON.stringify({fid:t,authVersion:_E,appId:n.appId,sdkVersion:Fm})},v=yield Af(()=>fetch(r,g));if(v.ok){const D=yield v.json();return{fid:D.fid||t,registrationStatus:2,refreshToken:D.refreshToken,authToken:Si(D.authToken)}}throw yield EE("Create Installation",v)})).apply(this,arguments)}function Sf(n){return new Promise(e=>{setTimeout(e,n)})}const Xb=/^[cdef][\w-]{21}$/;function eC(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function tC(n){return function Jb(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Xb.test(t)?t:""}catch(n){return""}}function ll(n){return`${n.appName}!${n.appId}`}const to=new Map;function za(n,e){const t=ll(n);DE(t,e),function rC(n,e){const t=function Qi(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=n=>{DE(n.data.key,n.data.fid)}),no}();t&&t.postMessage({key:n,fid:e}),function cl(){0===to.size&&no&&(no.close(),no=null)}()}(t,e)}function DE(n,e){const t=to.get(n);if(t)for(const r of t)r(e)}let no=null;const Ds="firebase-installations-store";let zr=null;function id(){return zr||(zr=(0,ze.X3)("firebase-installations-database",1,(n,e)=>{0===e&&n.createObjectStore(Ds)})),zr}function ro(n,e){return jo.apply(this,arguments)}function jo(){return(jo=(0,W.Z)(function*(n,e){const t=ll(n),o=(yield id()).transaction(Ds,"readwrite"),u=o.objectStore(Ds),d=yield u.get(t);return yield u.put(e,t),yield o.complete,(!d||d.fid!==e.fid)&&za(n,e.fid),e})).apply(this,arguments)}function $o(n){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,W.Z)(function*(n){const e=ll(n),r=(yield id()).transaction(Ds,"readwrite");yield r.objectStore(Ds).delete(e),yield r.complete})).apply(this,arguments)}function bs(n,e){return Go.apply(this,arguments)}function Go(){return(Go=(0,W.Z)(function*(n,e){const t=ll(n),o=(yield id()).transaction(Ds,"readwrite"),u=o.objectStore(Ds),d=yield u.get(t),g=e(d);return void 0===g?yield u.delete(t):yield u.put(g,t),yield o.complete,g&&(!d||d.fid!==g.fid)&&za(n,g.fid),g})).apply(this,arguments)}function Wo(n){return zo.apply(this,arguments)}function zo(){return(zo=(0,W.Z)(function*(n){let e;const t=yield bs(n.appConfig,r=>{const o=dl(r),u=bE(n,o);return e=u.registrationPromise,u.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function dl(n){return zm(n||{fid:eC(),registrationStatus:0})}function bE(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Is.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function CE(n,e){return Mf.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:TE(n)}:{installationEntry:e}}function Mf(){return(Mf=(0,W.Z)(function*(n,e){try{const t=yield $m(n,e);return ro(n.appConfig,t)}catch(t){throw Vm(t)&&409===t.customData.serverCode?yield $o(n.appConfig):yield ro(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function TE(n){return xf.apply(this,arguments)}function xf(){return(xf=(0,W.Z)(function*(n){let e=yield Wm(n.appConfig);for(;1===e.registrationStatus;)yield Sf(100),e=yield Wm(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Wo(n);return r||t}return e})).apply(this,arguments)}function Wm(n){return bs(n,e=>{if(!e)throw Is.create("installation-not-found");return zm(e)})}function zm(n){return function AE(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function SE(n,e){return qm.apply(this,arguments)}function qm(){return(qm=(0,W.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=ME(n,t),o=Bm(n,t),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const g={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:Fm,appId:n.appId}})},v=yield Af(()=>fetch(r,g));if(v.ok)return Si(yield v.json());throw yield EE("Generate Auth Token",v)})).apply(this,arguments)}function ME(n,{fid:e}){return`${vE(n)}/${e}/authTokens:generate`}function Zm(n){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,W.Z)(function*(n,e=!1){let t;const r=yield bs(n.appConfig,u=>{if(!Qm(u))throw Is.create("not-registered");const d=u.authToken;if(!e&&iC(d))return u;if(1===d.requestStatus)return t=xE(n,e),u;{if(!navigator.onLine)throw Is.create("app-offline");const g=ix(u);return t=NE(n,g),g}});return t?yield t:r.authToken})).apply(this,arguments)}function xE(n,e){return Km.apply(this,arguments)}function Km(){return(Km=(0,W.Z)(function*(n,e){let t=yield RE(n.appConfig);for(;1===t.authToken.requestStatus;)yield Sf(100),t=yield RE(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Zm(n,e):r})).apply(this,arguments)}function RE(n){return bs(n,e=>{if(!Qm(e))throw Is.create("not-registered");return function oC(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function NE(n,e){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,W.Z)(function*(n,e){try{const t=yield SE(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield ro(n.appConfig,r),t}catch(t){if(!Vm(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield ro(n.appConfig,r)}else yield $o(n.appConfig);throw t}})).apply(this,arguments)}function Qm(n){return void 0!==n&&2===n.registrationStatus}function iC(n){return 2===n.requestStatus&&!function sC(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function ix(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function sd(){return(sd=(0,W.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Wo(e);return r?r.catch(console.error):Zm(e).catch(console.error),t.fid})).apply(this,arguments)}function OE(){return(OE=(0,W.Z)(function*(n,e=!1){const t=n;return yield sx(t),(yield Zm(t,e)).token})).apply(this,arguments)}function sx(n){return PE.apply(this,arguments)}function PE(){return(PE=(0,W.Z)(function*(n){const{registrationPromise:e}=yield Wo(n);e&&(yield e)})).apply(this,arguments)}function Of(n){return Is.create("missing-app-config-values",{valueName:n})}const od="installations",kE=n=>{const e=n.getProvider("app").getImmediate(),t=function cC(n){if(!n||!n.options)throw Of("App Configuration");if(!n.name)throw Of("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Of(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Ft._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},hC=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Ft._getProvider)(e,od).getImmediate();return{getId:()=>function Jm(n){return sd.apply(this,arguments)}(t),getToken:o=>function aC(n){return OE.apply(this,arguments)}(t,o)}};(function fC(){(0,Ft._registerComponent)(new Ki.wA(od,kE,"PUBLIC")),(0,Ft._registerComponent)(new Ki.wA("installations-internal",hC,"PRIVATE"))})(),(0,Ft.registerVersion)(yE,"0.5.8"),(0,Ft.registerVersion)(yE,"0.5.8","esm2017");const Xm="@firebase/remote-config",kr=new ze.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class HE{constructor(e,t,r,o){this.client=e,this.storage=t,this.storageCache=r,this.logger=o}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,o=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${o}.`),o}fetch(e){var t=this;return(0,W.Z)(function*(){const[r,o]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(o&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return o;e.eTag=o&&o.eTag;const u=yield t.client.fetch(e),d=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&d.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(d),u})()}}function iy(n=navigator){return n.languages&&n.languages[0]||n.language}class GE{constructor(e,t,r,o,u,d){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=o,this.apiKey=u,this.appId=d}fetch(e){var t=this;return(0,W.Z)(function*(){const[r,o]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),d=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,g={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},v={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:o,app_id:t.appId,language_code:iy()},D={method:"POST",headers:g,body:JSON.stringify(v)},A=fetch(d,D),S=new Promise((Et,wt)=>{e.signal.addEventListener(()=>{const Pt=new Error("The operation was aborted.");Pt.name="AbortError",wt(Pt)})});let B;try{yield Promise.race([A,S]),B=yield A}catch(Et){let wt="fetch-client-network";throw"AbortError"===Et.name&&(wt="fetch-timeout"),kr.create(wt,{originalErrorMessage:Et.message})}let G=B.status;const te=B.headers.get("ETag")||void 0;let Se,Ze;if(200===B.status){let Et;try{Et=yield B.json()}catch(wt){throw kr.create("fetch-client-parse",{originalErrorMessage:wt.message})}Se=Et.entries,Ze=Et.state}if("INSTANCE_STATE_UNSPECIFIED"===Ze?G=500:"NO_CHANGE"===Ze?G=304:("NO_TEMPLATE"===Ze||"EMPTY_CONFIG"===Ze)&&(Se={}),304!==G&&200!==G)throw kr.create("fetch-status",{httpStatus:G});return{status:G,eTag:te,config:Se}})()}}class zE{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,W.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var o=this;return(0,W.Z)(function*(){yield function WE(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(kr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield o.client.fetch(e);return yield o.storage.deleteThrottleMetadata(),u}catch(u){if(!function sy(n){if(!(n instanceof ze.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const d={throttleEndTimeMillis:Date.now()+(0,ze.$s)(r),backoffCount:r+1};return yield o.storage.setThrottleMetadata(d),o.attemptFetch(e,d)}})()}}class ZE{constructor(e,t,r,o,u){this.app=e,this._client=t,this._storageCache=r,this._storage=o,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pl(n,e){const t=n.target.error||void 0;return kr.create(e,{originalErrorMessage:t&&t.message})}const Za="app_namespace_store";class KE{constructor(e,t,r,o=function wC(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(pl(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Za,{keyPath:"compositeKey"})}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=o}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,W.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{const g=r.transaction([Za],"readonly").objectStore(Za),v=t.createCompositeKey(e);try{const D=g.get(v);D.onerror=A=>{u(pl(A,"storage-get"))},D.onsuccess=A=>{const S=A.target.result;o(S?S.value:void 0)}}catch(D){u(kr.create("storage-get",{originalErrorMessage:D&&D.message}))}})})()}set(e,t){var r=this;return(0,W.Z)(function*(){const o=yield r.openDbPromise;return new Promise((u,d)=>{const v=o.transaction([Za],"readwrite").objectStore(Za),D=r.createCompositeKey(e);try{const A=v.put({compositeKey:D,value:t});A.onerror=S=>{d(pl(S,"storage-set"))},A.onsuccess=()=>{u()}}catch(A){d(kr.create("storage-set",{originalErrorMessage:A&&A.message}))}})})()}delete(e){var t=this;return(0,W.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{const g=r.transaction([Za],"readwrite").objectStore(Za),v=t.createCompositeKey(e);try{const D=g.delete(v);D.onerror=A=>{u(pl(A,"storage-delete"))},D.onsuccess=()=>{o()}}catch(D){u(kr.create("storage-delete",{originalErrorMessage:D&&D.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class oy{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,W.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),o=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const d=yield r;d&&(e.lastSuccessfulFetchTimestampMillis=d);const g=yield o;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function QE(){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,W.Z)(function*(){if(!(0,ze.hl)())return!1;try{return yield(0,ze.eu)()}catch(n){return!1}})).apply(this,arguments)}!function YE(){(0,Ft._registerComponent)(new Ki.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw kr.create("registration-window");if(!(0,ze.hl)())throw kr.create("indexed-db-unavailable");const{projectId:u,apiKey:d,appId:g}=r.options;if(!u)throw kr.create("registration-project-id");if(!d)throw kr.create("registration-api-key");if(!g)throw kr.create("registration-app-id");const v=new KE(g,r.name,t=t||"firebase"),D=new oy(v),A=new Yi.Yd(Xm);A.logLevel=Yi.in.ERROR;const S=new GE(o,Ft.SDK_VERSION,t,u,d,g),B=new zE(S,v),G=new HE(B,v,D,A),te=new ZE(r,G,D,v,A);return function ny(n){const e=(0,ze.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(te),te},"PUBLIC").setMultipleInstances(!0)),(0,Ft.registerVersion)(Xm,"0.3.7"),(0,Ft.registerVersion)(Xm,"0.3.7","esm2017")}();const JE="/firebase-messaging-sw.js",XE="/firebase-cloud-messaging-push-scope",ay="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ew="google.c.a.c_id",DC="google.c.a.c_l",tw="google.c.a.ts",bC="google.c.a.e";var Ka=(()=>{return(n=Ka||(Ka={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Ka;var n})();function io(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CC(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),o=new Uint8Array(r.length);for(let u=0;u<r.length;++u)o[u]=r.charCodeAt(u);return o}const Vf="fcm_token_details_db",uy="fcm_token_object_Store";function nw(n){return Zo.apply(this,arguments)}function Zo(){return Zo=(0,W.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(Vf))return null;let e=null;return(yield(0,ze.X3)(Vf,5,function(){var r=(0,W.Z)(function*(o,u,d,g){var v;if(u<2||!o.objectStoreNames.contains(uy))return;const D=g.objectStore(uy),A=yield D.index("fcmSenderId").get(n);if(yield D.clear(),A)if(2===u){const S=A;if(!S.auth||!S.p256dh||!S.endpoint)return;e={token:S.fcmToken,createTime:null!==(v=S.createTime)&&void 0!==v?v:Date.now(),subscriptionOptions:{auth:S.auth,p256dh:S.p256dh,endpoint:S.endpoint,swScope:S.swScope,vapidKey:"string"==typeof S.vapidKey?S.vapidKey:io(S.vapidKey)}}}else if(3===u){const S=A;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:io(S.auth),p256dh:io(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:io(S.vapidKey)}}}else if(4===u){const S=A;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:io(S.auth),p256dh:io(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:io(S.vapidKey)}}}});return function(o,u,d,g){return r.apply(this,arguments)}}())).close(),yield(0,ze.Lj)(Vf),yield(0,ze.Lj)("fcm_vapid_details_db"),yield(0,ze.Lj)("undefined"),AC(e)?e:null}),Zo.apply(this,arguments)}function AC(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Ya="firebase-messaging-store";let Uf=null;function iw(){return Uf||(Uf=(0,ze.X3)("firebase-messaging-database",1,(n,e)=>{0===e&&n.createObjectStore(Ya)})),Uf}function ly(n){return ud.apply(this,arguments)}function ud(){return(ud=(0,W.Z)(function*(n){const e=li(n),r=yield(yield iw()).transaction(Ya).objectStore(Ya).get(e);if(r)return r;{const o=yield nw(n.appConfig.senderId);if(o)return yield Mi(n,o),o}})).apply(this,arguments)}function Mi(n,e){return cy.apply(this,arguments)}function cy(){return(cy=(0,W.Z)(function*(n,e){const t=li(n),o=(yield iw()).transaction(Ya,"readwrite");return yield o.objectStore(Ya).put(e,t),yield o.complete,e})).apply(this,arguments)}function MC(n){return xi.apply(this,arguments)}function xi(){return(xi=(0,W.Z)(function*(n){const e=li(n),r=(yield iw()).transaction(Ya,"readwrite");yield r.objectStore(Ya).delete(e),yield r.complete})).apply(this,arguments)}function li({appConfig:n}){return n.appId}const Zn=new ze.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sw(n,e){return dy.apply(this,arguments)}function dy(){return(dy=(0,W.Z)(function*(n,e){const t=yield fy(n),r=aw(e),o={method:"POST",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(Qa(n.appConfig),o)).json()}catch(d){throw Zn.create("token-subscribe-failed",{errorInfo:d})}if(u.error)throw Zn.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Zn.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function xC(n,e){return hy.apply(this,arguments)}function hy(){return(hy=(0,W.Z)(function*(n,e){const t=yield fy(n),r=aw(e.subscriptionOptions),o={method:"PATCH",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(`${Qa(n.appConfig)}/${e.token}`,o)).json()}catch(d){throw Zn.create("token-update-failed",{errorInfo:d})}if(u.error)throw Zn.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Zn.create("token-update-no-token");return u.token})).apply(this,arguments)}function ow(n,e){return ld.apply(this,arguments)}function ld(){return(ld=(0,W.Z)(function*(n,e){const r={method:"DELETE",headers:yield fy(n)};try{const u=yield(yield fetch(`${Qa(n.appConfig)}/${e}`,r)).json();if(u.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(o){throw Zn.create("token-unsubscribe-failed",{errorInfo:o})}})).apply(this,arguments)}function Qa({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function fy(n){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,W.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function aw({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const o={web:{endpoint:t,auth:e,p256dh:n}};return r!==ay&&(o.web.applicationPubKey=r),o}const uw=6048e5;function lw(n){return gl.apply(this,arguments)}function gl(){return(gl=(0,W.Z)(function*(n){const e=yield hw(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:io(e.getKey("auth")),p256dh:io(e.getKey("p256dh"))},r=yield ly(n.firebaseDependencies);if(r){if(fw(r.subscriptionOptions,t))return Date.now()>=r.createTime+uw?dw(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield ow(n.firebaseDependencies,r.token)}catch(o){console.warn(o)}return dd(n.firebaseDependencies,t)}return dd(n.firebaseDependencies,t)})).apply(this,arguments)}function cw(n){return jf.apply(this,arguments)}function jf(){return(jf=(0,W.Z)(function*(n){const e=yield ly(n.firebaseDependencies);e&&(yield ow(n.firebaseDependencies,e.token),yield MC(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function dw(n,e){return cd.apply(this,arguments)}function cd(){return(cd=(0,W.Z)(function*(n,e){try{const t=yield xC(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Mi(n.firebaseDependencies,r),t}catch(t){throw yield cw(n),t}})).apply(this,arguments)}function dd(n,e){return $f.apply(this,arguments)}function $f(){return($f=(0,W.Z)(function*(n,e){const r={token:yield sw(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Mi(n,r),r.token})).apply(this,arguments)}function hw(n,e){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,W.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:CC(e)})})).apply(this,arguments)}function fw(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function py(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function pw(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const o=e.notification.image;o&&(n.notification.image=o)}(e,n),function gw(n,e){!e.data||(n.data=e.data)}(e,n),function mw(n,e){if(!e.fcmOptions)return;n.fcmOptions={};const t=e.fcmOptions.link;t&&(n.fcmOptions.link=t);const r=e.fcmOptions.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}(e,n),e}function RC(n){return"object"==typeof n&&!!n&&ew in n}function yw(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function gy(n){return Zn.create("missing-app-config-values",{valueName:n})}yw("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yw("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class OC{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=function NC(n){if(!n||!n.options)throw gy("App Configuration Object");if(!n.name)throw gy("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw gy(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:o,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function _w(n){return my.apply(this,arguments)}function my(){return(my=(0,W.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(JE,{scope:XE}),n.swRegistration.update().catch(()=>{})}catch(e){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:e.message})}})).apply(this,arguments)}function PC(n,e){return yy.apply(this,arguments)}function yy(){return(yy=(0,W.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield _w(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function kC(n,e){return _y.apply(this,arguments)}function _y(){return(_y=(0,W.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=ay)})).apply(this,arguments)}function vy(){return(vy=(0,W.Z)(function*(n,e){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield kC(n,null==e?void 0:e.vapidKey),yield PC(n,null==e?void 0:e.serviceWorkerRegistration),lw(n)})).apply(this,arguments)}function FC(n,e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,W.Z)(function*(n,e,t){const r=LC(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[ew],message_name:t[DC],message_time:t[tw],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function LC(n){switch(n){case Ka.NOTIFICATION_CLICKED:return"notification_open";case Ka.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wy(){return(wy=(0,W.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Ka.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(py(t)):n.onMessageHandler.next(py(t)));const r=t.data;RC(r)&&"1"===r[bC]&&(yield FC(n,t.messageType,r))})).apply(this,arguments)}const Iy="@firebase/messaging",Ew=n=>{const e=new OC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function VC(n,e){return wy.apply(this,arguments)}(e,t)),e},ww=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function vw(n,e){return vy.apply(this,arguments)}(e,r)}};function by(){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,W.Z)(function*(){try{yield(0,ze.eu)()}catch(n){return!1}return"undefined"!=typeof window&&(0,ze.hl)()&&(0,ze.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Iw(){(0,Ft._registerComponent)(new Ki.wA("messaging",Ew,"PUBLIC")),(0,Ft._registerComponent)(new Ki.wA("messaging-internal",ww,"PRIVATE")),(0,Ft.registerVersion)(Iy,"0.9.12"),(0,Ft.registerVersion)(Iy,"0.9.12","esm2017")}();const Ty="analytics",Ay="firebase_id",Tw="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",BC="https://www.googletagmanager.com/gtag/js",qe=new Yi.Yd("@firebase/analytics");function Aw(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function jC(n,e){const t=document.createElement("script");t.src=`${BC}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function zf(n,e,t,r,o,u){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,W.Z)(function*(n,e,t,r,o,u){const d=r[o];try{if(d)yield e[d];else{const v=(yield Aw(t)).find(D=>D.measurementId===o);v&&(yield e[v.appId])}}catch(g){qe.error(g)}n("config",o,u)})).apply(this,arguments)}function qf(n,e,t,r,o){return yl.apply(this,arguments)}function yl(){return(yl=(0,W.Z)(function*(n,e,t,r,o){try{let u=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const g=yield Aw(t);for(const v of d){const D=g.find(S=>S.measurementId===v),A=D&&e[D.appId];if(!A){u=[];break}u.push(A)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,o||{})}catch(u){qe.error(u)}})).apply(this,arguments)}function Sw(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(BC))return e;return null}const ci=new ze.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),My=new class Rw{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function GC(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function WC(n){return xy.apply(this,arguments)}function xy(){return(xy=(0,W.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:GC(r)},u=Tw.replace("{app-id}",t),d=yield fetch(u,o);if(200!==d.status&&304!==d.status){let g="";try{const v=yield d.json();(null===(e=v.error)||void 0===e?void 0:e.message)&&(g=v.error.message)}catch(v){}throw ci.create("config-fetch-failed",{httpStatus:d.status,responseMessage:g})}return d.json()})).apply(this,arguments)}function fd(n){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,W.Z)(function*(n,e=My,t){const{appId:r,apiKey:o,measurementId:u}=n.options;if(!r)throw ci.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:r};throw ci.create("no-api-key")}const d=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new Pw;return setTimeout((0,W.Z)(function*(){g.abort()}),void 0!==t?t:6e4),Nw({appId:r,apiKey:o,measurementId:u},d,g,e)})).apply(this,arguments)}function Nw(n,e,t){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,W.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=My){const{appId:u,measurementId:d}=n;try{yield Zf(r,e)}catch(g){if(d)return qe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g.message}]`),{appId:u,measurementId:d};throw g}try{const g=yield WC(n);return o.deleteThrottleMetadata(u),g}catch(g){if(!Ow(g)){if(o.deleteThrottleMetadata(u),d)return qe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g.message}]`),{appId:u,measurementId:d};throw g}const v=503===Number(g.customData.httpStatus)?(0,ze.$s)(t,o.intervalMillis,30):(0,ze.$s)(t,o.intervalMillis),D={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(u,D),qe.debug(`Calling attemptFetch again in ${v} millis`),Nw(n,D,r,o)}})).apply(this,arguments)}function Zf(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(ci.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ow(n){if(!(n instanceof ze.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Pw{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function kw(){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,W.Z)(function*(){if(!(0,ze.hl)())return qe.warn(ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ze.eu)()}catch(n){return qe.warn(ci.create("indexeddb-unavailable",{errorInfo:n}).message),!1}return!0})).apply(this,arguments)}function Ja(){return(Ja=(0,W.Z)(function*(n,e,t,r,o,u,d){var g;const v=fd(n);v.then(G=>{t[G.measurementId]=G.appId,n.options.measurementId&&G.measurementId!==n.options.measurementId&&qe.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${G.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(G=>qe.error(G)),e.push(v);const D=kw().then(G=>{if(G)return r.getId()}),[A,S]=yield Promise.all([v,D]);Sw()||jC(u,A.measurementId),o("js",new Date);const B=null!==(g=null==d?void 0:d.config)&&void 0!==g?g:{};return B.origin="firebase",B.update=!0,null!=S&&(B[Ay]=S),o("config",A.measurementId,B),A.measurementId})).apply(this,arguments)}class zC{constructor(e){this.app=e}_delete(){return delete so[this.app.options.appId],Promise.resolve()}}let so={},Fw=[];const Py={};let Lw,_l,gd="dataLayer",Fy=!1;function yx(n,e,t){!function mx(){const n=[];if((0,ze.ru)()&&n.push("This is a browser extension environment."),(0,ze.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=ci.create("invalid-analytics-context",{errorInfo:e});qe.warn(t.message)}}();const r=n.options.appId;if(!r)throw ci.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ci.create("no-api-key");qe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=so[r])throw ci.create("already-exists",{id:r});if(!Fy){!function $C(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(gd);const{wrappedGtag:u,gtagCore:d}=function px(n,e,t,r,o){let u=function(...d){window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(u=window[o]),window[o]=function In(n,e,t,r){function u(){return(u=(0,W.Z)(function*(d,g,v){try{"event"===d?yield qf(n,e,t,g,v):"config"===d?yield zf(n,e,t,r,g,v):n("set",g)}catch(D){qe.error(D)}})).apply(this,arguments)}return function o(d,g,v){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[o]}}(so,Fw,Py,gd,"gtag");_l=u,Lw=d,Fy=!0}return so[r]=function pd(n,e,t,r,o,u,d){return Ja.apply(this,arguments)}(n,Fw,Py,e,Lw,gd,t),new zC(n)}function Vw(){return(Vw=(0,W.Z)(function*(n,e,t,r,o){if(o&&o.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}})).apply(this,arguments)}function YC(){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,W.Z)(function*(){if((0,ze.ru)()||!(0,ze.zI)()||!(0,ze.hl)())return!1;try{return yield(0,ze.eu)()}catch(n){return!1}})).apply(this,arguments)}const $w="@firebase/analytics";!function QC(){(0,Ft._registerComponent)(new Ki.wA(Ty,(e,{options:t})=>yx(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Ft._registerComponent)(new Ki.wA("analytics-internal",function n(e){try{const t=e.getProvider(Ty).getImmediate();return{logEvent:(r,o,u)=>function jw(n,e,t,r){n=(0,ze.m9)(n),function _x(n,e,t,r,o){return Vw.apply(this,arguments)}(_l,so[n.app.options.appId],e,t,r).catch(o=>qe.error(o))}(t,r,o,u)}}catch(t){throw ci.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Ft.registerVersion)($w,"0.7.8"),(0,Ft.registerVersion)($w,"0.7.8","esm2017")}();class Hw extends Jg.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Yf={setInterval(n,e,...t){const{delegate:r}=Yf;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Yf;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};var By=F(8737);class Gw extends Hw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Yf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;Yf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(u){r=!0,o=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,By.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Qf={now:()=>(Qf.delegate||Date).now(),delegate:void 0};class yd{constructor(e,t=yd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}yd.now=Qf.now;class zw extends yd{constructor(e,t=yd.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const jy=new class JC extends zw{}(class Ww extends Gw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),$y=new zw(Gw);var _d=F(9468),El=F(5363);const Jf=new p.GfV("7.3.0"),Hy="__angularfire_symbol__analyticsIsSupportedValue",Gy="__angularfire_symbol__analyticsIsSupported",Wy="__angularfire_symbol__remoteConfigIsSupportedValue",zy="__angularfire_symbol__remoteConfigIsSupported",Xf="__angularfire_symbol__messagingIsSupportedValue",ep="__angularfire_symbol__messagingIsSupported";globalThis[Gy]||(globalThis[Gy]=YC().then(n=>globalThis[Hy]=n).catch(()=>globalThis[Hy]=!1)),globalThis[ep]||(globalThis[ep]=by().then(n=>globalThis[Xf]=n).catch(()=>globalThis[Xf]=!1)),globalThis[zy]||(globalThis[zy]=QE().then(n=>globalThis[Wy]=n).catch(()=>globalThis[Wy]=!1));const Ky=(n,e)=>{const t=e?[e]:(0,Ft.getApps)(),r=[];return t.forEach(o=>{o.container.getProvider(n).instances.forEach(d=>{r.includes(d)||r.push(d)})}),r};function Ko(){}class tp{constructor(e,t=jy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const o=this.zone;return this.delegate.schedule(function(d){o.runGuarded(()=>{e.apply(this,[d])})},t,r)}}class qw{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),t.pipe(ai({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tp(Zone.current)),this.insideAngular=t.run(()=>new tp(Zone.current,$y)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function eT(n){return eu().ngZone.runOutsideAngular(()=>n())}function oo(n){return eu().ngZone.run(()=>n())}function di(n){return eu(),function Zw(n){return function(t){return(t=t.lift(new qw(n.ngZone))).pipe((0,_d.R)(n.outsideAngular),(0,El.Q)(n.insideAngular))}}(eu())(n)}const nT=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),oo(()=>n.apply(void 0,r))},Yo=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=oo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)))),r[u]=nT(r[u],t));const o=eT(()=>n.apply(this,r));if(!e){if(o instanceof Ei.y){const u=eu();return o.pipe((0,_d.R)(u.outsideAngular),(0,El.Q)(u.insideAngular))}return oo(()=>o)}return o instanceof Ei.y?o.pipe(di):o instanceof Promise?oo(()=>new Promise((u,d)=>o.then(g=>oo(()=>u(g)),g=>oo(()=>d(g))))):"function"==typeof o&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),o.apply(this,arguments)}:oo(()=>o)};class vd{constructor(e){return e}}class Kw{constructor(){return(0,Ft.getApps)()}}const Qo=new p.OlP("angularfire2._apps"),Ed={provide:vd,useFactory:function rT(n){return n&&1===n.length?n[0]:new vd((0,Ft.getApp)())},deps:[[new p.FiY,Qo]]},iT={provide:Kw,deps:[[new p.FiY,Qo]]};function Sx(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vd(r)}}let Yw=(()=>{class n{constructor(t){(0,Ft.registerVersion)("angularfire",Jf.full,"core"),(0,Ft.registerVersion)("angularfire",Jf.full,"app"),(0,Ft.registerVersion)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Ed,iT]}),n})();function sT(n,...e){return{ngModule:Yw,providers:[{provide:Qo,useFactory:Sx(n),multi:!0,deps:[p.R0b,p.zs3,wl,...e]}]}}const Qw=Yo(Ft.initializeApp,!0);F(573);class Jy{constructor(){return Ky("auth")}}const IT=new Map,r_={activated:!1,tokenObservers:[]},i_={initialized:!1,enabled:!1};function kn(n){return IT.get(n)||r_}function hi(n,e){IT.set(n,e)}function Il(){return i_}class iI{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,W.Z)(function*(){t.stop();try{t.pending=new ze.BH,yield function TT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ze.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vr=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function u_(n){if(!kn(n).activated)throw vr.create("use-before-activation",{appName:n.name})}function c_(n,e){return ir.apply(this,arguments)}function ir(){return(ir=(0,W.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,u)}catch(S){throw vr.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==d.status)throw vr.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(S){throw vr.create("fetch-parse-error",{originalErrorMessage:S.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(v[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+D,issuedAtTimeMillis:A}})).apply(this,arguments)}function ST(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Cd="firebase-app-check-store";let lp=null;function d_(){return lp||(lp=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(vr.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Cd,{keyPath:"compositeKey"})}}catch(t){e(vr.create("storage-open",{originalErrorMessage:t.message}))}}),lp)}function bl(){return(bl=(0,W.Z)(function*(n,e){const r=(yield d_()).transaction(Cd,"readwrite"),u=r.objectStore(Cd).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var D;g(vr.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Td=new Yi.Yd("@firebase/app-check");function g_(n,e){return(0,ze.hl)()?function xT(n,e){return function f_(n,e){return bl.apply(this,arguments)}(function p_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Td.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dp(){return Il().enabled}function NT(){return m_.apply(this,arguments)}function m_(){return(m_=(0,W.Z)(function*(){const n=Il();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cI={error:"UNKNOWN_ERROR"};function dI(n){return ze.US.encodeString(JSON.stringify(n),!1)}function hp(n){return fp.apply(this,arguments)}function fp(){return(fp=(0,W.Z)(function*(n,e=!1){const t=n.app;u_(t);const r=kn(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&Sd(v)&&(o=v)}if(!e&&o&&Sd(o))return{token:o.token};let g,d=!1;if(dp()){r.exchangeTokenPromise||(r.exchangeTokenPromise=c_(ST(t,yield NT()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const v=yield r.exchangeTokenPromise;return yield g_(t,v),hi(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),d=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Td.warn(v.message):Td.error(v),u=v}return o?(g={token:o.token},hi(t,Object.assign(Object.assign({},r),{token:o})),yield g_(t,o)):g=gI(u),d&&pI(t,g),g})).apply(this,arguments)}function y_(n,e){const t=kn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),hi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function hI(n){const{app:e}=n,t=kn(e);let r=t.tokenRefresher;r||(r=function fI(n){const{app:e}=n;return new iI((0,W.Z)(function*(){let r;if(r=kn(e).token?yield hp(n,!0):yield hp(n),r.error)throw r.error}),()=>!0,()=>{const t=kn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),hi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function pI(n,e){const t=kn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Sd(n){return n.expireTimeMillis-Date.now()>0}function gI(n){return{token:dI(cI),error:n}}class mI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kn(this.app);for(const t of e)y_(this.app,t.next);return Promise.resolve()}}const yp="app-check-internal";!function jT(){(0,Ft._registerComponent)(new Ki.wA("app-check",n=>function yI(n,e){return new mI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yp).initialize()})),(0,Ft._registerComponent)(new Ki.wA(yp,n=>function PT(n){return{getToken:e=>hp(n,e),addTokenListener:e=>function pp(n,e,t,r){const{app:o}=n,u=kn(o),d={next:t,error:r,type:e};if(hi(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Sd(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),hI(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>hI(n))}(n,"INTERNAL",e),removeTokenListener:e=>y_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ft.registerVersion)("@firebase/app-check","0.5.7")}();class I_{constructor(){return Ky("app-check")}}"undefined"!=typeof window&&window;var Je,zT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ts={},T_=T_||{},mt=zT||self;function Tl(){}function uo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Al(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var A_="closure_uid_"+(1e9*Math.random()>>>0),IR=0;function qT(n,e,t){return n.call.apply(n.bind,arguments)}function ZT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function sr(n,e,t){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qT:ZT).apply(null,arguments)}function Md(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function or(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function Jo(){this.s=this.s,this.o=this.o}var S_={};Jo.prototype.s=!1,Jo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function CI(n){return Object.prototype.hasOwnProperty.call(n,A_)&&n[A_]||(n[A_]=++IR)}(this);delete S_[n]}},Jo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const M_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},TI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function x_(n){return Array.prototype.concat.apply([],arguments)}function xd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sl(n){return/^[\s\xa0]*$/.test(n)}var Er,R_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fr(n,e){return-1!=n.indexOf(e)}function _p(n,e){return n<e?-1:n>e?1:0}e:{var AI=mt.navigator;if(AI){var SI=AI.userAgent;if(SI){Er=SI;break e}}Er=""}function MI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function YT(n){const e={};for(const t in n)e[t]=n[t];return e}var N_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<N_.length;u++)t=N_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function O_(n){return O_[" "](n),n}O_[" "]=Tl;var vp,n,bR=Fr(Er,"Opera"),Rd=Fr(Er,"Trident")||Fr(Er,"MSIE"),JT=Fr(Er,"Edge"),RI=JT||Rd,XT=Fr(Er,"Gecko")&&!(Fr(Er.toLowerCase(),"webkit")&&!Fr(Er,"Edge"))&&!(Fr(Er,"Trident")||Fr(Er,"MSIE"))&&!Fr(Er,"Edge"),eA=Fr(Er.toLowerCase(),"webkit")&&!Fr(Er,"Edge");function Nd(){var n=mt.document;return n?n.documentMode:void 0}e:{var P_="",Ep=(n=Er,XT?/rv:([^\);]+)(\)|;)/.exec(n):JT?/Edge\/([\d\.]+)/.exec(n):Rd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eA?/WebKit\/(\S+)/.exec(n):bR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ep&&(P_=Ep?Ep[1]:""),Rd){var lo=Nd();if(null!=lo&&lo>parseFloat(P_)){vp=String(lo);break e}}vp=P_}var NI={};var F_=mt.document&&Rd&&(Nd()||parseInt(vp,10))||void 0,L_=function(){if(!mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{mt.addEventListener("test",Tl,e),mt.removeEventListener("test",Tl,e)}catch(t){}return n}();function Fn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wp(n,e){if(Fn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XT){e:{try{O_(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:CR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wp.Z.h.call(this)}}Fn.prototype.h=function(){this.defaultPrevented=!0},or(wp,Fn);var CR={2:"touch",3:"pen",4:"mouse"};wp.prototype.h=function(){wp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ip="closure_listenable_"+(1e6*Math.random()|0),TR=0;function PI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++TR,this.ca=this.fa=!1}function Dp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function bp(n){this.src=n,this.g={},this.h=0}function V_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=M_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Dp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function U_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}bp.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=U_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new PI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Cp="closure_lm_"+(1e6*Math.random()|0),Tp={};function B_(n,e,t,r,o){if(r&&r.once)return j_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)B_(n,e[u],t,r,o);return null}return t=LI(t),n&&n[Ip]?n.N(e,t,Al(r)?!!r.capture:!!r,o):kI(n,e,t,!1,r,o)}function kI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Al(o)?!!o.capture:!!o,g=G_(n);if(g||(n[Cp]=g=new bp(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function tA(){var e=H_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)L_||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent($_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function j_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)j_(n,e[u],t,r,o);return null}return t=LI(t),n&&n[Ip]?n.O(e,t,Al(r)?!!r.capture:!!r,o):kI(n,e,t,!0,r,o)}function Ap(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ap(n,e[u],t,r,o);else r=Al(r)?!!r.capture:!!r,t=LI(t),n&&n[Ip]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=U_(u=n.g[e],t,r,o))&&(Dp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=G_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=U_(e,t,r,o)),(t=-1<n?e[n]:null)&&FI(t))}function FI(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ip])V_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=G_(e))?(V_(t,n),0==t.h&&(t.src=null,e[Cp]=null)):Dp(n)}}}function $_(n){return n in Tp?Tp[n]:Tp[n]="on"+n}function H_(n,e){if(n.ca)n=!0;else{e=new wp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&FI(n),n=t.call(r,e)}return n}function G_(n){return(n=n[Cp])instanceof bp?n:null}var W_="__closure_events_fn_"+(1e9*Math.random()>>>0);function LI(n){return"function"==typeof n?n:(n[W_]||(n[W_]=function(e){return n.handleEvent(e)}),n[W_])}function ar(){Jo.call(this),this.i=new bp(this),this.P=this,this.I=null}function ur(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fn(e,n);else if(e instanceof Fn)e.target=e.target||n;else{var o=e;xI(e=new Fn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Sp(d,r,!0,e)&&o}if(o=Sp(d=e.g=n,r,!0,e)&&o,o=Sp(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Sp(d=e.g=t[u],r,!1,e)&&o}function Sp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var g=d.listener,v=d.ia||d.src;d.fa&&V_(n.i,d),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}or(ar,Jo),ar.prototype[Ip]=!0,ar.prototype.removeEventListener=function(n,e,t,r){Ap(this,n,e,t,r)},ar.prototype.M=function(){if(ar.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dp(t[r]);delete n.g[e],n.h--}}this.I=null},ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var VI=mt.JSON.stringify;function AR(){var n=i;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var BI,nA=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new MR,n=>n.reset());class MR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rA(n){mt.setTimeout(()=>{throw n},0)}function UI(n,e){BI||function xR(){var n=mt.Promise.resolve(void 0);BI=function(){n.then(s)}}(),jI||(BI(),jI=!0),i.add(n,e)}var jI=!1,i=new class SR{constructor(){this.h=this.g=null}add(e,t){const r=nA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function s(){for(var n;n=AR();){try{n.h.call(n.g)}catch(t){rA(t)}var e=nA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jI=!1}function a(n,e){ar.call(this),this.h=n||1,this.g=e||mt,this.j=sr(this.kb,this),this.l=Date.now()}function l(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function c(n,e,t){if("function"==typeof n)t&&(n=sr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=sr(n.handleEvent,n)}return 2147483647<Number(e)?-1:mt.setTimeout(n,e||0)}function h(n){n.g=c(()=>{n.g=null,n.i&&(n.i=!1,h(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}or(a,ar),(Je=a.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ur(this,"tick"),this.da&&(l(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){a.Z.M.call(this),l(this),delete this.g};class y extends Jo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:h(this)}M(){super.M(),this.g&&(mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function E(n){Jo.call(this),this.h=n,this.g={}}or(E,Jo);var I=[];function b(n,e,t,r){Array.isArray(t)||(t&&(I[0]=t.toString()),t=I);for(var o=0;o<t.length;o++){var u=B_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function T(n){MI(n.g,function(e,t){this.g.hasOwnProperty(t)&&FI(e)},n),n.g={}}function R(){this.g=!0}function se(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Oe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return VI(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}E.prototype.M=function(){E.Z.M.call(this),T(this)},E.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R.prototype.Aa=function(){this.g=!1},R.prototype.info=function(){};var Ge={},he=null;function rt(){return he=he||new ar}function Ot(n){Fn.call(this,Ge.Ma,n)}function $t(n){const e=rt();ur(e,new Ot(e,n))}function qr(n,e){Fn.call(this,Ge.STAT_EVENT,n),this.stat=e}function Sn(n){const e=rt();ur(e,new qr(e,n))}function Mp(n,e){Fn.call(this,Ge.Na,n),this.size=e}function tu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return mt.setTimeout(function(){n()},e)}Ge.Ma="serverreachability",or(Ot,Fn),Ge.STAT_EVENT="statevent",or(qr,Fn),Ge.Na="timingevent",or(Mp,Fn);var Ml={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pd(){}function Np(){}Pd.prototype.h=null;var sA,nu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function kd(){Fn.call(this,"d")}function iA(){Fn.call(this,"c")}function $I(){}function z_(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new E(this),this.P=tk,this.W=new a(n=RI?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new RR}function RR(){this.i=null,this.g="",this.h=!1}or(kd,Fn),or(iA,Fn),or($I,Pd),$I.prototype.g=function(){return new XMLHttpRequest},$I.prototype.i=function(){return{}},sA=new $I;var tk=45e3,oA={},HI={};function aA(n,e,t){n.K=1,n.v=ZI(ru(e)),n.s=t,n.U=!0,NR(n,null)}function NR(n,e){n.F=Date.now(),q_(n),n.A=ru(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jR(t.h,"t",r),n.C=0,t=n.l.H,n.h=new RR,n.g=cN(n.l,t?e:null,!n.s),0<n.O&&(n.L=new y(sr(n.Ia,n,n.g),n.O)),b(n.V,n.g,"readystatechange",n.gb),e=n.H?YT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),$t(1),function V(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),v=0;v<g.length;v++){var D=g[v].split("=");if(1<D.length){var A=D[0];D=D[1];var S=A.split("_");d=2<=S.length&&"type"==S[1]?d+(A+"=")+D+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function OR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function PR(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=nk(n,t),o==HI){4==e&&(n.o=4,Sn(14),r=!1),se(n.j,n.m,null,"[Incomplete Response]");break}if(o==oA){n.o=4,Sn(15),se(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}se(n.j,n.m,o,null),uA(n,o)}OR(n)&&o!=HI&&o!=oA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Sn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),vA(e),e.L=!0,Sn(11))):(se(n.j,n.m,t,"[Invalid Chunked Response]"),Fd(n),Z_(n))}function nk(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?HI:(t=Number(e.substring(t,r)),isNaN(t)?oA:(r+=1)+t>e.length?HI:(e=e.substr(r,t),n.C=r+t,e))}function q_(n){n.Y=Date.now()+n.P,kR(n,n.P)}function kR(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=tu(sr(n.eb,n),e)}function GI(n){n.B&&(mt.clearTimeout(n.B),n.B=null)}function Z_(n){0==n.l.G||n.I||oN(n.l,n)}function Fd(n){GI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,l(n.W),T(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function uA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dA(t.i,n)))if(t.I=n.N,!n.J&&dA(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=tu(sr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;eD(t),JI(t)}_A(t),Sn(18)}if(1>=GR(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else Ud(t,11)}else if((n.J||t.g==n)&&eD(t),!Sl(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const A=D[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const S=D[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const B=D[5];null!=B&&"number"==typeof B&&0<B&&(t.K=r=1.5*B,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const te=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.i;!u.g&&(Fr(te,"spdy")||Fr(te,"quic")||Fr(te,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(hA(u,u.h),u.h=null))}if(r.D){const Se=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.sa=Se,Dn(r.F,r.D,Se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=lN(r,r.H?r.la:null,r.W),d.J){WR(r.i,d);var g=d,v=r.K;v&&g.setTimeout(v),g.B&&(GI(g),q_(g)),r.g=d}else iN(r);0<t.l.length&&XI(t)}else"stop"!=D[0]&&"close"!=D[0]||Ud(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Ud(t,7):mA(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}$t(4)}catch(D){}}function lA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(uo(n)||"string"==typeof n)TI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(uo(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function rk(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(uo(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Op(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Op)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function cA(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ld(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ld(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ld(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=z_.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==iu(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const A=iu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>A)&&(3!=A||RI||this.g&&(this.h.h||this.g.ga()||XR(this.g)))){this.I||4!=A||7==e||$t(8==e||0>=S?3:2),GI(this);var t=this.g.ba();this.N=t;t:if(OR(this)){var r=XR(this.g);n="";var o=r.length,u=4==iu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fd(this),Z_(this);var d="";break t}this.h.i=new mt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function z(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sl(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Sn(12),Fd(this),Z_(this);break e}se(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uA(this,t)}this.U?(PR(this,A,d),RI&&this.i&&3==A&&(b(this.V,this.W,"tick",this.fb),this.W.start())):(se(this.j,this.m,d,null),uA(this,d)),4==A&&Fd(this),this.i&&!this.I&&(4==A?oN(this.l,this):(this.i=!1,q_(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Sn(12)):(this.o=0,Sn(13)),Fd(this),Z_(this)}}}catch(A){}},Je.fb=function(){if(this.g){var n=iu(this.g),e=this.g.ga();this.C<e.length&&(GI(this),PR(this,n,e),this.i&&4!=n&&q_(this))}},Je.cancel=function(){this.I=!0,Fd(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ae(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($t(3),Sn(17)),Fd(this),this.o=2,Z_(this)):kR(this,this.Y-n)},(Je=Op.prototype).R=function(){cA(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return cA(this),this.g.concat()},Je.get=function(n,e){return Ld(this.h,n)?this.h[n]:e},Je.set=function(n,e){Ld(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var FR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vd){this.g=void 0!==e?e:n.g,WI(this,n.j),this.s=n.s,zI(this,n.i),qI(this,n.m),this.l=n.l,e=n.h;var t=new Q_;t.i=e.i,e.g&&(t.g=new Op(e.g),t.h=e.h),LR(this,t),this.o=n.o}else n&&(t=String(n).match(FR))?(this.g=!!e,WI(this,t[1]||"",!0),this.s=K_(t[2]||""),zI(this,t[3]||"",!0),qI(this,t[4]),this.l=K_(t[5]||"",!0),LR(this,t[6]||"",!0),this.o=K_(t[7]||"")):(this.g=!!e,this.h=new Q_(null,this.g))}function ru(n){return new Vd(n)}function WI(n,e,t){n.j=t?K_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zI(n,e,t){n.i=t?K_(e,!0):e}function qI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function LR(n,e,t){e instanceof Q_?(n.h=e,function hk(n,e){e&&!n.j&&(xl(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(UR(this,r),jR(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Y_(e,ck)),n.h=new Q_(e,n.g))}function Dn(n,e,t){n.h.set(e,t)}function ZI(n){return Dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function K_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Y_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ak),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ak(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Y_(e,VR,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Y_(e,VR,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Y_(t,"/"==t.charAt(0)?lk:uk,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Y_(t,dk)),n.join("")};var VR=/[#\/\?@]/g,uk=/[#\?:]/g,lk=/[#\?]/g,ck=/[#\?@]/g,dk=/#/g;function Q_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xl(n){n.g||(n.g=new Op,n.h=0,n.i&&function ik(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UR(n,e){xl(n),e=Pp(n,e),Ld(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ld((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&cA(n)))}function BR(n,e){return xl(n),e=Pp(n,e),Ld(n.g.h,e)}function jR(n,e,t){UR(n,e),0<t.length&&(n.i=null,n.g.set(Pp(n,e),xd(t)),n.h+=t.length)}function Pp(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $R(n){this.l=n||pk,n=mt.PerformanceNavigationTiming?0<(n=mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(mt.g&&mt.g.Ea&&mt.g.Ea()&&mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Q_.prototype).add=function(n,e){xl(this),this.i=null,n=Pp(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){xl(this),this.g.forEach(function(t,r){TI(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){xl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){xl(this);var e=[];if("string"==typeof n)BR(this,n)&&(e=x_(e,this.g.get(Pp(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=x_(e,n[t])}return e},Je.set=function(n,e){return xl(this),this.i=null,BR(this,n=Pp(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var pk=10;function HR(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GR(n){return n.h?1:n.g?n.g.size:0}function dA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function hA(n,e){n.g?n.g.add(e):n.h=e}function WR(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function zR(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xd(n.i)}function fA(){}function gk(){this.g=new fA}function mk(n,e,t){const r=t||"";try{lA(n,function(o,u){let d=o;Al(o)&&(d=VI(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function KI(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function J_(n){this.l=n.$b||null,this.j=n.ib||!1}function YI(n,e){ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=pA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$R.prototype.cancel=function(){if(this.i=zR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},fA.prototype.stringify=function(n){return mt.JSON.stringify(n,void 0)},fA.prototype.parse=function(n){return mt.JSON.parse(n,void 0)},or(J_,Pd),J_.prototype.g=function(){return new YI(this.l,this.j)},J_.prototype.i=function(n){return function(){return n}}({}),or(YI,ar);var pA=0;function qR(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function X_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ev(n)}function ev(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=YI.prototype).open=function(n,e){if(this.readyState!=pA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ev(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,X_(this)),this.readyState=pA},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ev(this)),this.g&&(this.readyState=3,ev(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qR(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?X_(this):ev(this),3==this.readyState&&qR(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,X_(this))},Je.Ta=function(n){this.g&&(this.response=n,X_(this))},Je.ha=function(){this.g&&X_(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(YI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _k=mt.JSON.parse;function Kn(n){ar.call(this),this.headers=new Op,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ZR,this.K=this.L=!1}or(Kn,ar);var ZR="",vk=/^https?$/i,Ek=["POST","PUT"];function Ik(n){return"content-type"==n.toLowerCase()}function KR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,YR(n),QI(n)}function YR(n){n.D||(n.D=!0,ur(n,"complete"),ur(n,"error"))}function QR(n){if(n.h&&void 0!==T_&&(!n.C[1]||4!=iu(n)||2!=n.ba()))if(n.v&&4==iu(n))c(n.Fa,0,n);else if(ur(n,"readystatechange"),4==iu(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(FR)[1]||null;if(!o&&mt.self&&mt.self.location){var u=mt.self.location.protocol;o=u.substr(0,u.length-1)}r=!vk.test(o?o.toLowerCase():"")}t=r}if(t)ur(n,"complete"),ur(n,"success");else{n.m=6;try{var d=2<iu(n)?n.g.statusText:""}catch(v){d=""}n.j=d+" ["+n.ba()+"]",YR(n)}}finally{QI(n)}}}function QI(n,e){if(n.g){JR(n);const t=n.g,r=n.C[0]?Tl:null;n.g=null,n.C=null,e||ur(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function JR(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(mt.clearTimeout(n.A),n.A=null)}function iu(n){return n.g?n.g.readyState:0}function XR(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ZR:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Dk(n){let e="";return MI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dn(n,e,t))}function tv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function eN(n){this.za=0,this.l=[],this.h=new R,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tv("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tv("baseRetryDelayMs",5e3,n),this.$a=tv("retryDelaySeedMs",1e4,n),this.Ya=tv("forwardChannelMaxRetries",2,n),this.ra=tv("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $R(n&&n.concurrentRequestLimit),this.Ca=new gk,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function mA(n){if(tN(n),3==n.G){var e=n.V++,t=ru(n.F);Dn(t,"SID",n.J),Dn(t,"RID",e),Dn(t,"TYPE","terminate"),nv(n,t),(e=new z_(n,n.h,e,void 0)).K=2,e.v=ZI(ru(t)),t=!1,mt.navigator&&mt.navigator.sendBeacon&&(t=mt.navigator.sendBeacon(e.v.toString(),"")),!t&&mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cN(e.l,null),e.g.ea(e.v)),e.F=Date.now(),q_(e)}uN(n)}function JI(n){n.g&&(vA(n),n.g.cancel(),n.g=null)}function tN(n){JI(n),n.u&&(mt.clearTimeout(n.u),n.u=null),eD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&mt.clearTimeout(n.m),n.m=null)}function yA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&XI(n)}function XI(n){HR(n.i)||n.m||(n.m=!0,UI(n.Ha,n),n.C=0)}function nN(n,e){var t;t=e?e.m:n.V++;const r=ru(n.F);Dn(r,"SID",n.J),Dn(r,"RID",t),Dn(r,"AID",n.U),nv(n,r),n.o&&n.s&&gA(r,n.o,n.s),t=new z_(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=rN(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),hA(n.i,t),aA(t,r,e)}function nv(n,e){n.j&&lA({},function(t,r){Dn(e,r,t)})}function rN(n,e,t){t=Math.min(n.l.length,t);var r=n.j?sr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let D=o[v].h;const A=o[v].g;if(D-=u,0>D)u=Math.max(0,o[v].h-100),g=!1;else try{mk(A,d,"req"+D+"_")}catch(S){r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function iN(n){n.g||n.u||(n.Y=1,UI(n.Ga,n),n.A=0)}function _A(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=tu(sr(n.Ga,n),aN(n,n.A)),n.A++,0))}function vA(n){null!=n.B&&(mt.clearTimeout(n.B),n.B=null)}function sN(n){n.g=new z_(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ru(n.oa);Dn(e,"RID","rpc"),Dn(e,"SID",n.J),Dn(e,"CI",n.N?"0":"1"),Dn(e,"AID",n.U),nv(n,e),Dn(e,"TYPE","xmlhttp"),n.o&&n.s&&gA(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ZI(ru(e)),t.s=null,t.U=!0,NR(t,n)}function eD(n){null!=n.v&&(mt.clearTimeout(n.v),n.v=null)}function oN(n,e){var t=null;if(n.g==e){eD(n),vA(n),n.g=null;var r=2}else{if(!dA(n.i,e))return;t=e.D,WR(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ur(r=rt(),new Mp(r,t,e,o)),XI(n)}else iN(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function bk(n,e){return!(GR(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=tu(sr(n.Ha,n,e),aN(n,n.C)),n.C++,0)))}(n,e)||2==r&&_A(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ud(n,5);break;case 4:Ud(n,10);break;case 3:Ud(n,6);break;default:Ud(n,2)}}function aN(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ud(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=sr(n.jb,n);t||(t=new Vd("//www.google.com/images/cleardot.gif"),mt.location&&"http"==mt.location.protocol||WI(t,"https"),ZI(t)),function yk(n,e){const t=new R;if(mt.Image){const r=new Image;r.onload=Md(KI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Md(KI,t,r,"TestLoadImage: error",!1,e),r.onabort=Md(KI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Md(KI,t,r,"TestLoadImage: timeout",!1,e),mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Sn(2);n.G=0,n.j&&n.j.va(e),uN(n),tN(n)}function uN(n){n.G=0,n.I=-1,n.j&&((0!=zR(n.i).length||0!=n.l.length)&&(n.i.i.length=0,xd(n.l),n.l.length=0),n.j.ua())}function lN(n,e,t){let r=function sk(n){return n instanceof Vd?ru(n):new Vd(n,void 0)}(t);if(""!=r.i)e&&zI(r,e+"."+r.i),qI(r,r.m);else{const o=mt.location;r=function ok(n,e,t,r){var o=new Vd(null,void 0);return n&&WI(o,n),e&&zI(o,e),t&&qI(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&MI(n.aa,function(o,u){Dn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Dn(r,e,t),Dn(r,"VER",n.ma),nv(n,r),r}function cN(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Ba&&!n.qa?new J_({ib:!0}):n.qa)).L=n.H,e}function dN(){}function tD(){if(Rd&&!(10<=Number(F_)))throw Error("Environmental error: no available transport.")}function Xi(n,e){ar.call(this),this.g=new eN(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Sl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new kp(this)}function hN(n){kd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fN(){iA.call(this),this.status=1}function kp(n){this.g=n}(Je=Kn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sA.g(),this.C=function Rp(n){return n.h||(n.h=n.i())}(this.u?this.u:sA),this.g.onreadystatechange=sr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void KR(this,u)}n=t||"";const o=new Op(this.headers);r&&lA(r,function(u,d){o.set(d,u)}),r=function KT(n){e:{var e=Ik;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=mt.FormData&&n instanceof mt.FormData,!(0<=M_(Ek,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{JR(this),0<this.B&&((this.K=function wk(n){return Rd&&function k_(){return function QT(n){var e=NI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=R_(String(vp)).split("."),t=R_("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=_p(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||_p(0==o[2].length,0==u[2].length)||_p(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.pa,this)):this.A=c(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){KR(this,u)}},Je.pa=function(){void 0!==T_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ur(this,"complete"),ur(this,"abort"),QI(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),QI(this,!0)),Kn.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?QR(this):this.cb())},Je.cb=function(){QR(this)},Je.ba=function(){try{return 2<iu(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_k(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=eN.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new z_(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=YT(u),xI(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rN(this,o,e),Dn(t=ru(this.F),"RID",n),Dn(t,"CVER",22),this.D&&Dn(t,"X-HTTP-Session-Id",this.D),nv(this,t),this.o&&u&&gA(t,this.o,u),hA(this.i,o),this.Ra&&Dn(t,"TYPE","init"),this.ja?(Dn(t,"$req",e),Dn(t,"SID","null"),o.$=!0,aA(o,t,null)):aA(o,t,e),this.G=2}}else 3==this.G&&(n?nN(this,n):0==this.l.length||HR(this.i)||nN(this))},Je.Ga=function(){if(this.u=null,sN(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=tu(sr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sn(10),JI(this),sN(this))},Je.ab=function(){null!=this.v&&(this.v=null,JI(this),_A(this),Sn(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Sn(2)):(this.h.info("Failed to ping google.com"),Sn(1))},(Je=dN.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},tD.prototype.g=function(n,e){return new Xi(n,e)},or(Xi,ar),Xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),UI(sr(n.hb,n,e))),Sn(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=lN(n,null,n.W),XI(n)},Xi.prototype.close=function(){mA(this.g)},Xi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,yA(this.g,e)}else this.v?((e={}).__data__=VI(n),yA(this.g,e)):yA(this.g,n)},Xi.prototype.M=function(){this.g.j=null,delete this.j,mA(this.g),delete this.g,Xi.Z.M.call(this)},or(hN,kd),or(fN,iA),or(kp,dN),kp.prototype.xa=function(){ur(this.g,"a")},kp.prototype.wa=function(n){ur(this.g,new hN(n))},kp.prototype.va=function(n){ur(this.g,new fN(n))},kp.prototype.ua=function(){ur(this.g,"b")},tD.prototype.createWebChannel=tD.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,xp.COMPLETE="complete",Np.EventType=nu,nu.OPEN="a",nu.CLOSE="b",nu.ERROR="c",nu.MESSAGE="d",ar.prototype.listen=ar.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.La,Kn.prototype.getLastErrorCode=Kn.prototype.Da,Kn.prototype.getStatus=Kn.prototype.ba,Kn.prototype.getResponseJson=Kn.prototype.Qa,Kn.prototype.getResponseText=Kn.prototype.ga,Kn.prototype.send=Kn.prototype.ea;var Ck=Ts.createWebChannelTransport=function(){return new tD},Tk=Ts.getStatEventTarget=function(){return rt()},EA=Ts.ErrorCode=Ml,Ak=Ts.EventType=xp,Sk=Ts.Event=Ge,pN=Ts.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Mk=Ts.FetchXmlHttpFactory=J_,nD=Ts.WebChannel=Np,xk=Ts.XhrIo=Kn;const gN="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let Fp="9.6.11";const Rl=new Yi.Yd("@firebase/firestore");function wA(){return Rl.logLevel}function Me(n,...e){if(Rl.logLevel<=Yi.in.DEBUG){const t=e.map(IA);Rl.debug(`Firestore (${Fp}): ${n}`,...t)}}function Yn(n,...e){if(Rl.logLevel<=Yi.in.ERROR){const t=e.map(IA);Rl.error(`Firestore (${Fp}): ${n}`,...t)}}function rv(n,...e){if(Rl.logLevel<=Yi.in.WARN){const t=e.map(IA);Rl.warn(`Firestore (${Fp}): ${n}`,...t)}}function IA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Fp}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function yt(n,e){n||tt()}function $e(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class Pk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kk{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new wr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=d;e.enqueueRetryable((0,W.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},v=D=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new wr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new mN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Lr(e)}}class Fk{constructor(e,t,r){this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Lk{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Fk(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vk{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.p=t.token,new yN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Uk(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}es.A=-1;class _N{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Uk(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function Lp(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function vN(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Ln(0,0))}static max(){return new ht(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function EN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class iv{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===iv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends iv{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const Bk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends iv{construct(e,t,r){return new Ir(e,t,r)}static isValidIdentifier(e){return Bk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ee(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Ee(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ee(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Ee(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ir(t)}static emptyPath(){return new Ir([])}}class Vp{constructor(e){this.fields=e,e.sort(Ir.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const $k=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nl(n){if(yt(!!n),"string"==typeof n){let e=0;const t=$k.exec(n);if(yt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(n.seconds),nanos:On(n.nanos)}}function On(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jd(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function DA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IN(n){const e=n.mapValue.fields.__previous_value__;return DA(e)?IN(e):e}function sv(n){const e=Nl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class Hk{constructor(e,t,r,o,u,d,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class su{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new su("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}function $d(n){return null==n}function ov(n){return 0===n&&1/n==-1/0}function DN(n){return"number"==typeof n&&Number.isInteger(n)&&!ov(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Wt.fromString(e))}static fromName(e){return new Fe(Wt.fromString(e).popFirst(5))}static empty(){return new Fe(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Wt(e.slice()))}}const bN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CN={nullValue:"NULL_VALUE"};function Hd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DA(n)?4:MN(n)?9:10:tt()}function Xo(n,e){if(n===e)return!0;const t=Hd(n);if(t!==Hd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sv(n).isEqual(sv(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Nl(r.timestampValue),d=Nl(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,jd(n.bytesValue).isEqual(jd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return On(r.geoPointValue.latitude)===On(o.geoPointValue.latitude)&&On(r.geoPointValue.longitude)===On(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return On(r.integerValue)===On(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=On(r.doubleValue),d=On(o.doubleValue);return u===d?ov(u)===ov(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Lp(n.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(EN(u)!==EN(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!Xo(u[g],d[g])))return!1;return!0}(n,e);default:return tt()}var o}function av(n,e){return void 0!==(n.values||[]).find(t=>Xo(t,e))}function Ol(n,e){if(n===e)return 0;const t=Hd(n),r=Hd(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=On(o.integerValue||o.doubleValue),g=On(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return TN(n.timestampValue,e.timestampValue);case 4:return TN(sv(n),sv(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(o,u){const d=jd(o),g=jd(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let v=0;v<d.length&&v<g.length;v++){const D=St(d[v],g[v]);if(0!==D)return D}return St(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=St(On(o.latitude),On(u.latitude));return 0!==d?d:St(On(o.longitude),On(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let v=0;v<d.length&&v<g.length;++v){const D=Ol(d[v],g[v]);if(D)return D}return St(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},g=Object.keys(d),v=u.fields||{},D=Object.keys(v);g.sort(),D.sort();for(let A=0;A<g.length&&A<D.length;++A){const S=St(g[A],D[A]);if(0!==S)return S;const B=Ol(d[g[A]],v[D[A]]);if(0!==B)return B}return St(g.length,D.length)}(n.mapValue,e.mapValue);default:throw tt()}}function TN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=Nl(n),r=Nl(e),o=St(t.seconds,r.seconds);return 0!==o?o:St(t.nanos,r.nanos)}function Up(n){return bA(n)}function bA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Nl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jd(n.bytesValue).toBase64():"referenceValue"in n?Fe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=bA(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${bA(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function Gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CA(n){return!!n&&"integerValue"in n}function uv(n){return!!n&&"arrayValue"in n}function AN(n){return!!n&&"nullValue"in n}function SN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rD(n){return!!n&&"mapValue"in n}function lv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gk(n){return"nullValue"in n?CN:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gd(su.empty(),Fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function Wk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gd(su.empty(),Fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bN:tt()}function xN(n,e){return void 0===n?e:void 0===e||Ol(n,e)>0?n:e}function RN(n,e){return void 0===n?e:void 0===e||Ol(n,e)<0?n:e}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lv(t)}setAll(e){let t=Ir.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=lv(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());rD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];rD(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Bd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Zr(lv(this.value))}}function NN(n){const e=[];return Bd(n.fields,(t,r)=>{const o=new Ir([t]);if(rD(r)){const u=NN(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Vp(e)}class gn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new gn(e,0,ht.min(),ht.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new gn(e,1,t,ht.min(),r,0)}static newNoDocument(e,t){return new gn(e,2,t,ht.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,ht.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iD{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function TA(n){return n.fields.find(e=>2===e.kind)}function Wd(n){return n.fields.filter(e=>2!==e.kind)}iD.UNKNOWN_ID=-1;class sD{constructor(e,t){this.fieldPath=e,this.kind=t}}class cv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cv(0,ou.min())}}function ON(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ht.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new ou(o,Fe.empty(),e)}function zk(n){return new ou(n.readTime,n.key,-1)}class ou{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ou(ht.min(),Fe.empty(),-1)}static max(){return new ou(ht.max(),Fe.empty(),-1)}}function qk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fe.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}class Zk{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.P=null}}function PN(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Zk(n,e,t,r,o,u,d)}function zd(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Up(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),$d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Up(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Up(r)).join(",")),e.P=t}return e.P}function dv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!rF(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Xo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UN(n.startAt,e.startAt)&&UN(n.endAt,e.endAt)}function oD(n){return Fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function aD(n,e){return n.filters.filter(t=>t instanceof Vr&&t.field.isEqual(e))}function kN(n,e,t){let r,o=!0;for(const u of aD(n,e)){let d,g=!0;switch(u.op){case"<":case"<=":d=Gk(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=CN}xN(r,d)===d&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];xN(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function FN(n,e,t){let r,o=!0;for(const u of aD(n,e)){let d,g=!0;switch(u.op){case">=":case">":d=Wk(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=bN}RN(r,d)===d&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];RN(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Vr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Yk(e,t,r):"array-contains"===t?new Xk(e,r):"in"===t?new eF(e,r):"not-in"===t?new tF(e,r):"array-contains-any"===t?new nF(e,r):new Vr(e,t,r)}static V(e,t,r){return"in"===t?new Qk(e,r):new Jk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ol(t,this.value)):null!==t&&Hd(this.value)===Hd(t)&&this.v(Ol(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yk extends Vr{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.v(t)}}class Qk extends Vr{constructor(e,t){super(e,"in",t),this.keys=LN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jk extends Vr{constructor(e,t){super(e,"not-in",t),this.keys=LN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class Xk extends Vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uv(t)&&av(t.arrayValue,this.value)}}class eF extends Vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&av(this.value.arrayValue,t)}}class tF extends Vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(av(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!av(this.value.arrayValue,t)}}class nF extends Vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>av(this.value.arrayValue,r))}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}class Bp{constructor(e,t="asc"){this.field=e,this.dir=t}}function rF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function VN(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Fe.comparator(Fe.fromName(d.referenceValue),t.key):Ol(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function UN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xo(n.position[t],e.position[t]))return!1;return!0}class au{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=v,this.D=null,this.C=null}}function BN(n,e,t,r,o,u,d,g){return new au(n,e,t,r,o,u,d,g)}function jp(n){return new au(n)}function uD(n){return!$d(n.limit)&&"F"===n.limitType}function lD(n){return!$d(n.limit)&&"L"===n.limitType}function AA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function SA(n){for(const e of n.filters)if(e.S())return e.field;return null}function MA(n){return null!==n.collectionGroup}function $p(n){const e=$e(n);if(null===e.D){e.D=[];const t=SA(e),r=AA(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Bp(t)),e.D.push(new Bp(Ir.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Bp(Ir.keyField(),u))}}}return e.D}function As(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=PN(e.path,e.collectionGroup,$p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of $p(e))t.push(new Bp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Pl(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Pl(e.startAt.position,!e.startAt.inclusive):null;e.C=PN(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function jN(n,e,t){return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hv(n,e){return dv(As(n),As(e))&&n.limitType===e.limitType}function $N(n){return`${zd(As(n))}|lt:${n.limitType}`}function xA(n){return`Query(target=${function Kk(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Up(r.value)}`;var r}).join(", ")}]`),$d(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Up(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Up(t)).join(",")),`Target(${e})`}(As(n))}; limitType=${n.limitType})`}function RA(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Fe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=VN(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,$p(t),r)||t.endAt&&!function(o,u,d){const g=VN(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,$p(t),r)));var t,r}function HN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GN(n){return(e,t)=>{let r=!1;for(const o of $p(n)){const u=iF(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function iF(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),v=d.data.field(o);return null!==g&&null!==v?Ol(g,v):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function WN(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ov(e)?"-0":e}}function zN(n){return{integerValue:""+n}}function qN(n,e){return DN(e)?zN(e):WN(n,e)}class cD{constructor(){this._=void 0}}function sF(n,e,t){return n instanceof Hp?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof qd?KN(n,e):n instanceof Zd?YN(n,e):function(r,o){const u=ZN(r,o),d=QN(u)+QN(r.k);return CA(u)&&CA(r.k)?zN(d):WN(r.M,d)}(n,e)}function oF(n,e,t){return n instanceof qd?KN(n,e):n instanceof Zd?YN(n,e):t}function ZN(n,e){return n instanceof Gp?CA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hp extends cD{}class qd extends cD{constructor(e){super(),this.elements=e}}function KN(n,e){const t=JN(e);for(const r of n.elements)t.some(o=>Xo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Zd extends cD{constructor(e){super(),this.elements=e}}function YN(n,e){let t=JN(e);for(const r of n.elements)t=t.filter(o=>!Xo(o,r));return{arrayValue:{values:t}}}class Gp extends cD{constructor(e,t){super(),this.M=e,this.k=t}}function QN(n){return On(n.integerValue||n.doubleValue)}function JN(n){return uv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fv{constructor(e,t){this.field=e,this.transform=t}}class uF{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hD{}function lF(n,e,t){n instanceof pv?function(r,o,u){const d=r.value.clone(),g=nO(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Kd?function(r,o,u){if(!dD(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=nO(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(tO(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function NA(n,e,t){var o;n instanceof pv?function(r,o,u){if(!dD(r.precondition,o))return;const d=r.value.clone(),g=rO(r.fieldTransforms,u,o);d.setAll(g),o.convertToFoundDocument(eO(o),d).setHasLocalMutations()}(n,e,t):n instanceof Kd?function(r,o,u){if(!dD(r.precondition,o))return;const d=rO(r.fieldTransforms,u,o),g=o.data;g.setAll(tO(r)),g.setAll(d),o.convertToFoundDocument(eO(o),g).setHasLocalMutations()}(n,e,t):dD(n.precondition,o=e)&&o.convertToNoDocument(ht.min())}function cF(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=ZN(r.transform,o||null);null!=u&&(null==t&&(t=Zr.empty()),t.set(r.field,u))}return t||null}function XN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lp(t,r,(o,u)=>function aF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof qd&&r instanceof qd||t instanceof Zd&&r instanceof Zd?Lp(t.elements,r.elements,Xo):t instanceof Gp&&r instanceof Gp?Xo(t.k,r.k):t instanceof Hp&&r instanceof Hp);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function eO(n){return n.isFoundDocument()?n.version:ht.min()}class pv extends hD{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Kd extends hD{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function tO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nO(n,e,t){const r=new Map;yt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,oF(d,g,t[o]))}return r}function rO(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,sF(u,d,e))}return r}class gv extends hD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class OA extends hD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class dF{constructor(e){this.count=e}}var Jn,zt;function iO(n){switch(n){default:return tt();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function sO(n){if(void 0===n)return Yn("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Jn.OK:return ne.OK;case Jn.CANCELLED:return ne.CANCELLED;case Jn.UNKNOWN:return ne.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ne.INTERNAL;case Jn.UNAVAILABLE:return ne.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ne.NOT_FOUND;case Jn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Jn.ABORTED:return ne.ABORTED;case Jn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Jn.DATA_LOSS:return ne.DATA_LOSS;default:return tt()}}(zt=Jn||(Jn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Bd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return wN(this.inner)}size(){return this.innerSize}}class Vn{constructor(e,t){this.comparator=e,this.root=t||Ur.EMPTY}insert(e,t){return new Vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fD(this.root,e,this.comparator,!1)}getReverseIterator(){return new fD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fD(this.root,e,this.comparator,!0)}}class fD{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Ur.RED,this.left=null!=o?o:Ur.EMPTY,this.right=null!=u?u:Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ur(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ur.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oO(this.data.getIterator())}getIteratorFrom(e){return new oO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class oO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wp(n){return n.hasNext()?n.getNext():void 0}const hF=new Vn(Fe.comparator);function Ss(){return hF}const fF=new Vn(Fe.comparator);function PA(){return fF}function mv(){return new kl(n=>n.toString(),(n,e)=>n.isEqual(e))}const pF=new Vn(Fe.comparator),gF=new mn(Fe.comparator);function en(...n){let e=gF;for(const t of n)e=e.add(t);return e}const mF=new mn(St);function pD(){return mF}class yv{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,_v.createSynthesizedTargetChangeForCurrentChange(e,t)),new yv(ht.min(),r,pD(),Ss(),en())}}class _v{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new _v(lr.EMPTY_BYTE_STRING,t,en(),en(),en())}}class gD{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class aO{constructor(e,t){this.targetId=e,this.$=t}}class uO{constructor(e,t,r=lr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class lO{constructor(){this.B=0,this.L=dO(),this.U=lr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=en(),t=en(),r=en();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new _v(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=dO()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class yF{constructor(e){this.nt=e,this.st=new Map,this.it=Ss(),this.rt=cO(),this.ot=new mn(St)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(oD(u))if(0===r){const d=new Fe(u.path);this.ct(t,d,gn.newNoDocument(d,ht.min()))}else yt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const g=this.wt(d);if(g){if(u.current&&oD(g.target)){const v=new Fe(g.target.path);null!==this.it.get(v)||this.It(d,v)||this.ct(d,v,gn.newNoDocument(v,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=en();this.rt.forEach((u,d)=>{let g=!0;d.forEachWhile(v=>{const D=this.wt(v);return!D||2===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new yv(e,t,this.ot,this.it,r);return this.it=Ss(),this.rt=cO(),this.ot=new mn(St),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new lO,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new mn(St),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new lO),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function cO(){return new Vn(Fe.comparator)}function dO(){return new Vn(Fe.comparator)}const _F={asc:"ASCENDING",desc:"DESCENDING"},vF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class EF{constructor(e,t){this.databaseId=e,this.N=t}}function vv(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hO(n,e){return n.N?e.toBase64():e.toUint8Array()}function wF(n,e){return vv(n,e.toTimestamp())}function Dr(n){return yt(!!n),ht.fromTimestamp(function(e){const t=Nl(e);return new Ln(t.seconds,t.nanos)}(n))}function kA(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fO(n){const e=Wt.fromString(n);return yt(IO(e)),e}function Ev(n,e){return kA(n.databaseId,e.path)}function ea(n,e){const t=fO(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(gO(t))}function FA(n,e){return kA(n.databaseId,e)}function pO(n){const e=fO(n);return 4===e.length?Wt.emptyPath():gO(e)}function wv(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gO(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mO(n,e,t){return{name:Ev(n,e),fields:t.value.mapValue.fields}}function yO(n,e,t){const r=ea(n,e.name),o=Dr(e.updateTime),u=new Zr({mapValue:{fields:e.fields}}),d=gn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Iv(n,e){let t;if(e instanceof pv)t={update:mO(n,e.key,e.value)};else if(e instanceof gv)t={delete:Ev(n,e.key)};else if(e instanceof Kd)t={update:mO(n,e.key,e.data),updateMask:xF(e.fieldMask)};else{if(!(e instanceof OA))return tt();t={verify:Ev(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Hp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof qd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Zd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gp)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:wF(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function LA(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Qn.updateTime(Dr(o.updateTime)):void 0!==o.exists?Qn.exists(o.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(yt("REQUEST_TIME"===d.setToServerValue),g=new Hp):"appendMissingElements"in d?g=new qd(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Zd(d.removeAllFromArray.values||[]):"increment"in d?g=new Gp(u,d.increment):tt();const v=Ir.fromServerFormat(d.fieldPath);return new fv(v,g)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),u=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Vp((e.updateMask.fieldPaths||[]).map(D=>Ir.fromServerFormat(D)));return new Kd(o,u,d,t,r)}return new pv(o,u,t,r)}if(e.delete){const o=ea(n,e.delete);return new gv(o,t)}if(e.verify){const o=ea(n,e.verify);return new OA(o,t)}return tt()}function _O(n,e){return{documents:[FA(n,e.path)]}}function vO(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=FA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=FA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const D=v.map(A=>function(S){if("=="===S.op){if(SN(S.value))return{unaryFilter:{field:zp(S.field),op:"IS_NAN"}};if(AN(S.value))return{unaryFilter:{field:zp(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(SN(S.value))return{unaryFilter:{field:zp(S.field),op:"IS_NOT_NAN"}};if(AN(S.value))return{unaryFilter:{field:zp(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zp(S.field),op:AF(S.op),value:S.value}}}(A));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(D=>{return{field:zp((A=D).field),direction:TF(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(D=e.limit,n.N||$d(D)?D:{value:D});var D,g,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function EO(n){let e=pO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){yt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=wO(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Bp(qp((S=A).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(A){let S;return S="object"==typeof A?A.value:A,$d(S)?null:S}(t.limit));let v=null;var A;t.startAt&&(v=new Pl((A=t.startAt).values||[],!!A.before));let D=null;return t.endAt&&(D=function(A){return new Pl(A.values||[],!A.before)}(t.endAt)),BN(e,o,d,u,g,"F",v,D)}function wO(n){return n?void 0!==n.unaryFilter?[MF(n)]:void 0!==n.fieldFilter?[SF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wO(e)).reduce((e,t)=>e.concat(t)):tt():[]}function TF(n){return _F[n]}function AF(n){return vF[n]}function zp(n){return{fieldPath:n.canonicalString()}}function qp(n){return Ir.fromServerFormat(n.fieldPath)}function SF(n){return Vr.create(qp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function MF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=qp(n.unaryFilter.field);return Vr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=qp(n.unaryFilter.field);return Vr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qp(n.unaryFilter.field);return Vr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qp(n.unaryFilter.field);return Vr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function xF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DO(e)),e=RF(n.get(t),e);return DO(e)}function RF(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function DO(n){return n+"\x01\x01"}function ta(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Wt(r)}const bO=["userId","batchId"];function mD(n,e){return[n,fi(e)]}function CO(n,e,t){return[n,fi(e),t]}const NF={},OF=["prefixPath","collectionGroup","readTime","documentId"],PF=["prefixPath","collectionGroup","documentId"],kF=["collectionGroup","readTime","prefixPath","documentId"],FF=["canonicalId","targetId"],LF=["targetId","path"],VF=["path","targetId"],UF=["collectionId","parent"],BF=["indexId","uid"],jF=["uid","sequenceNumber"],$F=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HF=["indexId","uid","orderedDocumentKey"],GF=["userId","collectionPath","documentId"],WF=["userId","collectionPath","largestBatchId"],zF=["userId","collectionGroup","largestBatchId"],TO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qF=[...TO,"documentOverlays"],AO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZF=[...AO,"indexConfiguration","indexState","indexEntries"],SO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class yD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new wr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Dv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=VA(r.target.error);this.At.reject(new Dv(e,o))}}static open(e,t,r,o){try{return new yD(t,e.transaction(o,r))}catch(u){throw new Dv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YF(t)}}class co{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===co.Vt((0,ze.z$)())&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Qd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,ze.hl)())return!1;if(co.St())return!0;const e=(0,ze.z$)(),t=co.Vt(e),r=0<t&&t<10,o=co.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,W.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Dv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Ee(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ee(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Dv(e,g))},u.onupgradeneeded=d=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,W.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const v=yD.open(u.db,e,d?"readonly":"readwrite",r),D=o(v).next(A=>(v.Pt(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return D.catch(()=>{}),yield v.Rt,D}catch(v){const D="FirebaseError"!==v.name&&g<3;if(Me("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),u.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class KF{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Qd(this.Ft.delete())}}class Dv extends Ee{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yd(n){return"IndexedDbTransactionError"===n.name}class YF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qd(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Qd(this.store.add(e))}get(e){return Qd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Qd(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Qd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const d=VA(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new oe((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const v=new KF(g),D=t(g.primaryKey,g.value,v);if(D instanceof oe){const A=D.catch(S=>(v.done(),oe.reject(S)));r.push(A)}v.isDone?o():null===v.Lt?g.continue():g.continue(v.Lt)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qd(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=VA(r.target.error);t(o)}})}let xO=!1;function VA(n){const e=co.Vt((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xO||(xO=!0,setTimeout(()=>{throw r},0)),r}}return n}class RO extends MO{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function br(n,e){const t=$e(n);return co.xt(t.Ht,e)}class UA{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&lF(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&NA(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&NA(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(ht.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Lp(this.mutations,e.mutations,(t,r)=>XN(t,r))&&Lp(this.baseMutations,e.baseMutations,(t,r)=>XN(t,r))}}class BA{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){yt(e.mutations.length===r.length);let o=pF;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new BA(e,t,r,o)}}class jA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fl{constructor(e,t,r,o,u=ht.min(),d=ht.min(),g=lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class NO{constructor(e){this.Jt=e}}function OO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_D(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ev(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:vv(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jd(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Jd(e.version)}}var o,u;return r}function _D(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xd(n){const e=new Ln(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Zp(n,e){const t=(e.baseMutations||[]).map(u=>LA(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>LA(n.Jt,u)),o=Ln.fromMillis(e.localWriteTimeMs);return new UA(e.batchId,o,t,r)}function bv(n){const e=Xd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xd(n.lastLimboFreeSnapshotVersion):ht.min();let r;var o;return void 0!==n.query.documents?(yt(1===(o=n.query).documents.length),r=As(jp(pO(o.documents[0])))):r=As(EO(n.query)),new Fl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,lr.fromBase64String(n.resumeToken))}function PO(n,e){const t=Jd(e.snapshotVersion),r=Jd(e.lastLimboFreeSnapshotVersion);let o;o=oD(e.target)?_O(n.Jt,e.target):vO(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function $A(n){const e=EO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jN(e,e.limit,"L"):e}function HA(n,e){return new jA(e.largestBatchId,LA(n.Jt,e.overlayMutation))}function kO(n,e){const t=e.path.lastSegment();return[n,fi(e.path.popLast()),t]}class JF{getBundleMetadata(e,t){return FO(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Xd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return FO(e).put({bundleId:(r=t).id,createTime:Jd(Dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return LO(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:$A(o.bundledQuery),readTime:Xd(o.readTime)};var o})}saveNamedQuery(e,t){return LO(e).put({name:(r=t).name,readTime:Jd(Dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function FO(n){return br(n,"bundles")}function LO(n){return br(n,"namedQueries")}class GA{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new GA(e,t.uid||"")}getOverlay(e,t){return Cv(e).get(kO(this.userId,t)).next(r=>r?HA(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new jA(t,d);o.push(this.Xt(e,g))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(fi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Cv(e).Qt("collectionPathOverlayIndex",g))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=mv(),u=fi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Cv(e).qt("collectionPathOverlayIndex",d).next(g=>{for(const v of g){const D=HA(this.M,v);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=mv();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cv(e).Wt({index:"collectionGroupOverlayIndex",range:g},(v,D,A)=>{const S=HA(this.M,D);u.size()<o||S.largestBatchId===d?(u.set(S.getKey(),S),d=S.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Cv(e).put(function(r,o,u){const[d,g,v]=kO(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Iv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Cv(n){return br(n,"documentOverlays")}class eh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),ov(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(jd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?MN(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Fe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function XF(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VO(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=XF(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}eh.fe=new eh;class eL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=VO(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=VO(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class tL{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class nL{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Tv{constructor(){this.De=new eL,this.Ce=new tL(this.De),this.xe=new nL(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ll{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ll(this.indexId,this.documentKey,this.arrayValue,r)}}function th(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=UO(n.arrayValue,e.arrayValue),0!==t?t:(t=UO(n.directionalValue,e.directionalValue),0!==t?t:Fe.comparator(n.documentKey,e.documentKey)))}function UO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class rL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=TA(e);if(void 0!==t&&!this.Be(t))return!1;const r=Wd(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class iL{constructor(){this.qe=new WA}addToCollectionParentIndex(e,t){return this.qe.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getFieldIndex(e,t){return oe.resolve(null)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class WA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new mn(Wt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mn(Wt.comparator)).toArray()}}const Kp=new Uint8Array(0);class sL{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new WA,this.Ge=new kl(r=>zd(r),(r,o)=>dv(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:fi(o)};return BO(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[vN(t),""],!1,!0);return BO(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ta(d.parent))}return r})}addFieldIndex(e,t){const r=vD(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=vD(e),o=ED(e),u=Av(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Av(e);let o=!0;const u=new Map;return oe.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=en();const g=[];return oe.forEach(u,(v,D)=>{var A;Me("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Pt=>`${Pt.fieldPath}:${Pt.kind}`).join(",")}`} to execute ${zd(t)}`);const S=function(Pt,bt){const Vt=TA(bt);if(void 0===Vt)return null;for(const Jt of aD(Pt,Vt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(D,v),B=function(Pt,bt){const Vt=new Map;for(const Jt of Wd(bt))for(const Yr of aD(Pt,Jt.fieldPath))switch(Yr.op){case"==":case"in":Vt.set(Jt.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Vt.set(Jt.fieldPath.canonicalString(),Yr.value),Array.from(Vt.values())}return null}(D,v),G=function(Pt,bt){const Vt=[];let Jt=!0;for(const Yr of Wd(bt)){const fh=0===Yr.kind?kN(Pt,Yr.fieldPath,Pt.startAt):FN(Pt,Yr.fieldPath,Pt.startAt);if(!fh.value)return null;Vt.push(fh.value),Jt&&(Jt=fh.inclusive)}return new Pl(Vt,Jt)}(D,v),te=function(Pt,bt){const Vt=[];let Jt=!0;for(const Yr of Wd(bt)){const fh=0===Yr.kind?FN(Pt,Yr.fieldPath,Pt.endAt):kN(Pt,Yr.fieldPath,Pt.endAt);if(!fh.value)return null;Vt.push(fh.value),Jt&&(Jt=fh.inclusive)}return new Pl(Vt,Jt)}(D,v),Se=this.je(v,D,G),Ze=this.je(v,D,te),Et=this.We(v,D,B),wt=this.ze(v.indexId,S,Se,!!G&&G.inclusive,Ze,!!te&&te.inclusive,Et);return oe.forEach(wt,Pt=>r.Gt(Pt,t.limit).next(bt=>{bt.forEach(Vt=>{const Jt=Fe.fromSegments(Vt.documentKey);d.has(Jt)||(d=d.add(Jt),g.push(Jt))})}))}).next(()=>g)}return oe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,d,g){const v=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),D=v/(null!=t?t.length:1),A=[];for(let S=0;S<v;++S){const B=t?this.He(t[S/D]):Kp,G=r?this.Je(e,B,r[S%D],o):this.Ye(e),te=u?this.Xe(e,B,u[S%D],d):this.Ye(e+1);A.push(...this.createRange(G,te,g.map(Se=>this.Je(e,B,Se,!0))))}return A}Je(e,t,r,o){const u=new Ll(e,Fe.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Ll(e,Fe.empty(),t,r);return o?u.ke():u}Ye(e){return new Ll(e,Fe.empty(),Kp,Kp)}getFieldIndex(e,t){const r=new rL(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(g=>r.$e(g));return d.sort((g,v)=>v.fields.length-g.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Tv;for(const o of Wd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);eh.fe.Zt(u,d)}return r.Se()}He(e){const t=new Tv;return eh.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Tv;return eh.fe.Zt(Gd(this.databaseId,t),r.Ne(function(o){const u=Wd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Tv);let u=0;for(const d of Wd(e)){const g=r[u++];for(const v of o)if(this.en(t,d.fieldPath)&&uv(g))o=this.nn(o,d,g);else{const D=v.Ne(d.kind);eh.fe.Zt(g,D)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const v=new Tv;v.seed(g.Se()),eh.fe.Zt(d,v.Ne(t.kind)),u.push(v)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Vr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vD(e),o=ED(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return oe.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{d.push(function(D,A){const S=A?new cv(A.sequenceNumber,new ou(Xd(A.readTime),new Fe(ta(A.documentKey)),A.largestBatchId)):cv.empty(),B=D.fields.map(([G,te])=>new sD(Ir.fromServerFormat(G),te));return new iD(D.indexId,D.collectionGroup,B,S)}(g,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:St(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=vD(e),u=ED(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>oe.forEach(g,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Jd((B=r).readTime),documentKey:fi(B.documentKey.path),largestBatchId:B.largestBatchId});var B})))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),oe.forEach(g,v=>this.on(e,o,v).next(D=>{const A=this.un(u,v);return D.isEqual(A)?oe.resolve():this.an(e,u,v,D,A)}))))})}cn(e,t,r,o){return Av(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Av(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Av(e);let u=new mn(th);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,g)=>{u=u.add(new Ll(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new mn(th);const o=this.Ze(t,e);if(null==o)return r;const u=TA(t);if(null!=u){const d=e.data.field(u.fieldPath);if(uv(d))for(const g of d.arrayValue.values||[])r=r.add(new Ll(t.indexId,e.key,this.He(g),o))}else r=r.add(new Ll(t.indexId,e.key,Kp,o));return r}an(e,t,r,o,u){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,v,D,A,S){const B=g.getIterator(),G=v.getIterator();let te=Wp(B),Se=Wp(G);for(;te||Se;){let Ze=!1,Et=!1;if(te&&Se){const wt=D(te,Se);wt<0?Et=!0:wt>0&&(Ze=!0)}else null!=te?Et=!0:Ze=!0;Ze?(A(Se),Se=Wp(G)):Et?(S(te),te=Wp(B)):(te=Wp(B),Se=Wp(G))}}(o,u,th,g=>{d.push(this.cn(e,t,r,g))},g=>{d.push(this.hn(e,t,r,g))}),oe.waitFor(d)}rn(e){let t=1;return ED(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>th(d,g)).filter((d,g,v)=>!g||0!==th(d,v[g-1]));const o=[];o.push(e);for(const d of r){const g=th(d,e),v=th(d,t);if(0===g)o[0]=e.ke();else if(g>0&&v<0)o.push(d),o.push(d.ke());else if(v>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Kp,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Kp,[]]));return u}}function BO(n){return br(n,"collectionParents")}function Av(n){return br(n,"indexEntries")}function vD(n){return br(n,"indexConfiguration")}function ED(n){return br(n,"indexState")}const jO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $O(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const v=r.Wt({range:d},(A,S,B)=>(g++,B.delete()));u.push(v.next(()=>{yt(1===g)}));const D=[];for(const A of t.mutations){const S=CO(e,A.key.path,t.batchId);u.push(o.delete(S)),D.push(A.key)}return oe.waitFor(u).next(()=>D)}function wD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class zA{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){yt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new zA(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Yp(e),d=Vl(e);return d.add({}).next(g=>{yt("number"==typeof g);const v=new UA(g,t,r,o),D=function(B,G,te){const Se=te.baseMutations.map(Et=>Iv(B.Jt,Et)),Ze=te.mutations.map(Et=>Iv(B.Jt,Et));return{userId:G,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Se,mutations:Ze}}(this.M,this.userId,v),A=[];let S=new mn((B,G)=>St(B.canonicalString(),G.canonicalString()));for(const B of o){const G=CO(this.userId,B.key.path,g);S=S.add(B.key.path.popLast()),A.push(d.put(D)),A.push(u.put(G,NF))}return S.forEach(B=>{A.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.ln[g]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Vl(e).get(t).next(r=>r?(yt(r.userId===this.userId),Zp(this.M,r)):null)}fn(e,t){return this.ln[t]?oe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vl(e).Wt({index:"userMutationsIndex",range:o},(d,g,v)=>{g.userId===this.userId&&(yt(g.batchId>=r),u=Zp(this.M,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Zp(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mD(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Yp(e).Wt({range:o},(d,g,v)=>{const[D,A,S]=d,B=ta(A);if(D===this.userId&&t.path.isEqual(B))return Vl(e).get(S).next(G=>{if(!G)throw tt();yt(G.userId===this.userId),u.push(Zp(this.M,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(St);const o=[];return t.forEach(u=>{const d=mD(this.userId,u.path),g=IDBKeyRange.lowerBound(d),v=Yp(e).Wt({range:g},(D,A,S)=>{const[B,G,te]=D,Se=ta(G);B===this.userId&&u.path.isEqual(Se)?r=r.add(te):S.done()});o.push(v)}),oe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=mD(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new mn(St);return Yp(e).Wt({range:d},(v,D,A)=>{const[S,B,G]=v,te=ta(B);S===this.userId&&r.isPrefixOf(te)?te.length===o&&(g=g.add(G)):A.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Vl(e).get(u).next(d=>{if(null===d)throw tt();yt(d.userId===this.userId),r.push(Zp(this.M,d))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return $O(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Yp(e).Wt({range:r},(u,d,g)=>{if(u[0]===this.userId){const v=ta(u[1]);o.push(v)}else g.done()}).next(()=>{yt(0===o.length)})})}containsKey(e,t){return HO(e,this.userId,t)}wn(e){return GO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function HO(n,e,t){const r=mD(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Yp(n).Wt({range:u,jt:!0},(g,v,D)=>{const[A,S,B]=g;A===e&&S===o&&(d=!0),D.done()}).next(()=>d)}function Vl(n){return br(n,"mutations")}function Yp(n){return br(n,"documentMutations")}function GO(n){return br(n,"mutationQueues")}class nh{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new nh(0)}static yn(){return new nh(-1)}}class oL{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new nh(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>ht.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qp(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Qp(e).Wt((d,g)=>{const v=bv(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Qp(e).Wt((r,o)=>{const u=bv(o);t(u)})}pn(e){return WO(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}In(e,t){return WO(e).put("targetGlobalKey",t)}Tn(e,t){return Qp(e).put(PO(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Qp(e).Wt({range:o,index:"queryTargetsIndex"},(d,g,v)=>{const D=bv(g);dv(t,D.target)&&(u=D,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ul(e);return t.forEach(d=>{const g=fi(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ul(e);return oe.forEach(t,u=>{const d=fi(u.path);return oe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ul(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ul(e);let u=en();return o.Wt({range:r,jt:!0},(d,g,v)=>{const D=ta(d[1]),A=new Fe(D);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=fi(t.path),o=IDBKeyRange.bound([r],[vN(r)],!1,!0);let u=0;return Ul(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,g],v,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return Qp(e).get(t).next(r=>r?bv(r):null)}}function Qp(n){return br(n,"targets")}function WO(n){return br(n,"targetGlobal")}function Ul(n){return br(n,"targetDocuments")}function rh(n){return qA.apply(this,arguments)}function qA(){return qA=(0,W.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==SO)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),qA.apply(this,arguments)}function zO([n,e],[t,r]){const o=St(n,t);return 0===o?St(e,r):o}class aL{constructor(e){this.An=e,this.buffer=new mn(zO),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uL{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,W.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yd(o)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield rh(o)}yield t.Sn(e)}))}}class lL{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(es.A);const r=new aL(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(jO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jO):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,g,v,D;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(D=Date.now(),wA()<=Yi.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${S} documents in `+(D-v)+`ms\nTotal Duration: ${D-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class cL{constructor(e,t){this.db=e,this.garbageCollector=new lL(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return ID(e,r)}removeReference(e,t,r){return ID(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ID(e,t)}On(e,t){return function(r,o){let u=!1;return GO(r).zt(d=>HO(r,d,o).next(g=>(g&&(u=!0),oe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,g)=>{if(g<=t){const v=this.On(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,ht.min()),Ul(e).delete([0,fi(d.path)])))});o.push(v)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ID(e,t)}Mn(e,t){const r=Ul(e);let o,u=es.A;return r.Wt({index:"documentTargetsIndex"},([d,g],{path:v,sequenceNumber:D})=>{0===d?(u!==es.A&&t(new Fe(ta(o)),u),u=D,o=v):u=es.A}).next(()=>{u!==es.A&&t(new Fe(ta(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ID(n,e){return Ul(n).put((r=n.currentSequenceNumber,{targetId:0,path:fi(e.path),sequenceNumber:r}));var r}class qO{constructor(){this.changes=new kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dL{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ih(e).put(r)}removeEntry(e,t,r){return ih(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],_D(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=gn.newInvalidDocument(t);return ih(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:gn.newInvalidDocument(t)};return ih(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sv(t))},(o,u)=>{r={document:this.$n(t,u),size:wD(u)}}).next(()=>r)}getEntries(e,t){let r=Ss();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Ss(),o=new Vn(Fe.comparator);return this.Ln(e,t,(u,d)=>{const g=this.$n(u,d);r=r.insert(u,g),o=o.insert(u,wD(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return oe.resolve();let o=new mn(YO);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Sv(o.first()),Sv(o.last())),d=o.getIterator();let g=d.getNext();return ih(e).Wt({index:"documentKeyIndex",range:u},(v,D,A)=>{const S=Fe.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&YO(g,S)<0;)r(g,null),g=d.getNext();g&&g.isEqual(S)&&(r(g,D),g=d.hasNext()?d.getNext():null),g?A.Ut(Sv(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),_D(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ih(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=Ss();for(const v of d){const D=this.$n(Fe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(D.key,D)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Ss();const d=KO(t,r),g=KO(t,ou.max());return ih(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(v,D,A)=>{const S=this.$n(Fe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(S.key,S),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new hL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ZO(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Fn(e,t){return ZO(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function QF(n,e){let t;if(e.document)t=yO(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Fe.fromSegments(e.noDocument.path),o=Xd(e.noDocument.readTime);t=gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Fe.fromSegments(e.unknownDocument.path),o=Xd(e.unknownDocument.version);t=gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Ln(r[0],r[1]);return ht.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return gn.newInvalidDocument(e)}}class hL extends qO{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new kl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new mn((u,d)=>St(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const v=OO(this.Kn.M,d);o=o.add(u.path.popLast()),r+=wD(v)-g.size,t.push(this.Kn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=OO(this.Kn.M,d.convertToNoDocument(ht.min()));t.push(this.Kn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function ZO(n){return br(n,"remoteDocumentGlobal")}function ih(n){return br(n,"remoteDocumentsV14")}function Sv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function KO(n,e){const t=e.documentKey.path.toArray();return[n,_D(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function YO(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=St(t[u],r[u]),o)return o;return o=St(t.length,r.length),o||(o=St(t[t.length-2],r[r.length-2]),o||St(t[t.length-1],r[r.length-1]))}class fL{constructor(e){this.M=e}kt(e,t,r,o){const u=new yD("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bO,{unique:!0}),g.createObjectStore("documentMutations"),QO(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),QO(e)),d=d.next(()=>function(g){const v=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,v){return v.store("mutations").qt().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bO,{unique:!0});const A=v.store("mutations"),S=D.map(B=>A.put(B));return oe.waitFor(S)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:GF});v.createIndex("collectionPathOverlayIndex",WF,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",zF,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:OF});v.createIndex("documentKeyIndex",PF),v.createIndex("collectionGroupIndex",kF)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:BF}).createIndex("sequenceNumberIndex",jF,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:$F}).createIndex("documentKeyIndex",HF,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=wD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>oe.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(g=>oe.forEach(g,v=>{yt(v.userId===u.userId);const D=Zp(this.M,v);return $O(e,u.userId,D).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,g)=>{const v=new Wt(d),D=[0,fi(v)];u.push(t.get(D).next(A=>A?oe.resolve():t.put({targetId:0,path:fi(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:UF});const r=t.store("collectionParents"),o=new WA,u=d=>{if(o.add(d)){const g=d.lastSegment(),v=d.popLast();return r.put({collectionId:g,parent:fi(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,g)=>{const v=new Wt(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,g,v],D)=>{const A=ta(g);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=bv(o),d=PO(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const g=t.store("remoteDocumentsV14"),v=(D=d,D.document?new Fe(Wt.fromString(D.document.name).popFirst(5)):D.noDocument?Fe.fromSegments(D.noDocument.path):D.unknownDocument?Fe.fromSegments(D.unknownDocument.path):tt()).path.toArray();var D;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>oe.waitFor(o))}}function QO(n){n.createObjectStore("targetDocuments",{keyPath:LF}).createIndex("documentTargetsIndex",VF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FF,{unique:!0}),n.createObjectStore("targetGlobal")}const ZA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KA{constructor(e,t,r,o,u,d,g,v,D,A,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=g,this.Xn=D,this.Zn=A,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=B=>Promise.resolve(),!KA.vt())throw new Ee(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cL(this,o),this.hs=t+"main",this.M=new NO(v),this.ls=new co(this.hs,this.ts,new fL(this.M)),this.fs=new oL(this.referenceDelegate,this.M),this.ds=new dL(this.M),this._s=new JF,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&Yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(ne.FAILED_PRECONDITION,ZA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new es(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,W.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,W.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>DD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Yd(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Mv(e).get("owner").next(t=>oe.resolve(this.bs(t)))}Vs(e){return DD(e).delete(this.clientId)}vs(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=br(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),g=u.filter(v=>-1===d.indexOf(v));return oe.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?oe.resolve(!0):Mv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ee(ne.FAILED_PRECONDITION,ZA);return!1}}return!(!this.networkEnabled||!this.inForeground)||DD(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,W.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new RO(t,es.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>DD(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return zA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new sL(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return GA.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?ZF:13===d?AO:12===d?qF:11===d?TO:void tt();var d;let g;return this.ls.runTransaction(e,o,u,v=>(g=new RO(v,this.es?this.es.next():es.A),"readwrite-primary"===t?this.Es(g).next(D=>!!D||this.As(g)).next(D=>{if(!D)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ee(ne.FAILED_PRECONDITION,SO);return r(g)}).next(D=>this.Ps(g).next(()=>D)):this.$s(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}$s(e){return Mv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ee(ne.FAILED_PRECONDITION,ZA)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mv(e).put("owner",t)}static vt(){return co.vt()}Rs(e){const t=Mv(e);return t.get("owner").next(r=>this.bs(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,ze.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mv(n){return br(n,"owner")}function DD(n){return br(n,"clientMetadata")}function YA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pL{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Fe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):MA(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Fe(t)).next(r=>{let o=PA();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=PA();return this.indexManager.getCollectionParents(e,o).next(d=>oe.forEach(d,g=>{const v=(D=t,A=g.child(o),new au(A,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,A;return this.zs(e,v,r).next(D=>{D.forEach((A,S)=>{u=u.insert(A,S)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const g of d.mutations){const v=g.key;let D=o.get(v);null==D&&(D=gn.newInvalidDocument(v),o=o.insert(v,D)),NA(g,D,d.localWriteTime),D.isFoundDocument()||(o=o.remove(v))}}).next(()=>(o.forEach((u,d)=>{RA(t,d)||(o=o.remove(u))}),o))}}class QA{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=en(),o=en();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new QA(e,t.fromCache,r,o)}}class JO{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(ht.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const d=this.ei(t,u);return(uD(t)||lD(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(wA()<=Yi.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xA(t)),this.Zs.Qs(e,t,ON(r,-1)).next(g=>(d.forEach(v=>{g=g.insert(v.key,v)}),g)))});var u}ei(e,t){let r=new mn(GN(e));return t.forEach((o,u)=>{RA(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return wA()<=Yi.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",xA(t)),this.Zs.Qs(e,t,ou.min())}}class gL{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Vn(St),this.ri=new kl(u=>zd(u),dv),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new pL(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function XO(n,e,t,r){return new gL(n,e,t,r)}function eP(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,W.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let v=en();for(const D of o){d.push(D.batchId);for(const A of D.mutations)v=v.add(A.key)}for(const D of u){g.push(D.batchId);for(const A of D.mutations)v=v.add(A.key)}return t.ci.Ks(r,v).next(D=>({hi:D,removedBatchIds:d,addedBatchIds:g}))})})}),JA.apply(this,arguments)}function mL(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,g,v,D){const A=v.batch,S=A.keys();let B=oe.resolve();return S.forEach(G=>{B=B.next(()=>D.getEntry(g,G)).next(te=>{const Se=v.docVersions.get(G);yt(null!==Se),te.version.compareTo(Se)<0&&(A.applyToRemoteDocument(te,v),te.isValidDocument()&&(te.setReadTime(v.commitVersion),D.addEntry(te)))})}),B.next(()=>d.Bs.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function tP(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function yL(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const g=[];e.targetChanges.forEach((D,A)=>{const S=o.get(A);if(!S)return;g.push(t.fs.removeMatchingKeys(u,D.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,D.addedDocuments,A)));let B=S.withSequenceNumber(u.currentSequenceNumber);var G,te,Se;e.targetMismatches.has(A)?B=B.withResumeToken(lr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):D.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(D.resumeToken,r)),o=o.insert(A,B),te=B,Se=D,(0===(G=S).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,B))});let v=Ss();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),g.push(nP(u,d,e.documentUpdates).next(D=>{v=D})),!r.isEqual(ht.min())){const D=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(D)}return oe.waitFor(g).next(()=>d.apply(u)).next(()=>t.ci.Gs(u,v)).next(()=>v)}).then(u=>(t.ii=o,u))}function nP(n,e,t){let r=en();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Ss();return t.forEach((d,g)=>{const v=o.get(d);g.isNoDocument()&&g.version.isEqual(ht.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):Me("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",g.version)}),u})}function _L(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Jp(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Fl(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Xp(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,W.Z)(function*(n,e,t){const r=$e(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Yd(d))throw d;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),XA.apply(this,arguments)}function bD(n,e,t){const r=$e(n);let o=ht.min(),u=en();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,v,D){const A=$e(g),S=A.ri.get(D);return void 0!==S?oe.resolve(A.ii.get(S)):A.fs.getTargetData(v,D)}(r,d,As(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,g.targetId).next(v=>{u=v})}).next(()=>r.si.Qs(d,e,t?o:ht.min(),t?u:en())).next(g=>(sP(r,HN(e),g),{documents:g,li:u})))}function rP(n,e){const t=$e(n),r=$e(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function iP(n,e){const t=$e(n),r=t.oi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,ON(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(sP(t,e,o),o))}function sP(n,e,t){let r=ht.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function eS(){return eS=(0,W.Z)(function*(n,e,t,r){const o=$e(n);let u=en(),d=Ss();for(const D of t){const A=e.fi(D.metadata.name);D.document&&(u=u.add(A));const S=e.di(D);S.setReadTime(e._i(D.metadata.readTime)),d=d.insert(A,S)}const g=o.ui.newChangeBuffer({trackRemovals:!0}),v=yield Jp(o,(D=r,As(jp(Wt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>nP(D,g,d).next(A=>(g.apply(D),A)).next(A=>o.fs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>o.fs.addMatchingKeys(D,u,v.targetId)).next(()=>o.ci.Gs(D,A)).next(()=>A)))}),eS.apply(this,arguments)}function EL(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,W.Z)(function*(n,e,t=en()){const r=yield Jp(n,As($A(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Dr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const g=r.withResumeToken(lr.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(g.targetId,g),o.fs.updateTargetData(u,g).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),tS.apply(this,arguments)}class wL{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return oe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:$A(r.bundledQuery),readTime:Dr(r.readTime)}),oe.resolve();var r}}class IL{constructor(){this.overlays=new Vn(Fe.comparator),this.gi=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=mv(),u=t.length+1,d=new Fe(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,D=v.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Vn((D,A)=>D-A);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let A=u.get(D.largestBatchId);null===A&&(A=mv(),u=u.insert(D.largestBatchId,A)),A.set(D.getKey(),D)}}const g=mv(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,A)=>g.set(D,A)),!(g.size()>=o)););return oe.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new jA(t,r));let u=this.gi.get(t);void 0===u&&(u=en(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class nS{constructor(){this.yi=new mn(Cr.pi),this.Ii=new mn(Cr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Cr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Fe(new Wt([])),r=new Cr(t,e),o=new Cr(t,e+1),u=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),u.push(d.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Fe(new Wt([])),r=new Cr(t,e),o=new Cr(t,e+1);let u=en();return this.Ii.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Cr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Fe.comparator(e.key,t.key)||St(e.vi,t.vi)}static Ti(e,t){return St(e.vi,t.vi)||Fe.comparator(e.key,t.key)}}class DL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new mn(Cr.pi)}checkEmpty(e){return oe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const d=new UA(u,t,r,o);this.Bs.push(d);for(const g of o)this.Di=this.Di.add(new Cr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return oe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return oe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),o=new Cr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],d=>{const g=this.Ci(d.vi);u.push(g)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(St);return t.forEach(o=>{const u=new Cr(o,0),d=new Cr(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,d],g=>{r=r.add(g.vi)})}),oe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Fe.isDocumentKey(u)||(u=u.child(""));const d=new Cr(new Fe(u),0);let g=new mn(St);return this.Di.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(g=g.add(v.vi)),!0)},d),oe.resolve(this.Ni(g))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){yt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return oe.forEach(t.mutations,o=>{const u=new Cr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Cr(t,0),o=this.Di.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class bL{constructor(e){this.Mi=e,this.docs=new Vn(Fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=Ss();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():gn.newInvalidDocument(o))}),oe.resolve(r)}getAllFromCollection(e,t,r){let o=Ss();const u=new Fe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:v}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||qk(zk(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Oi(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CL(this)}getSize(e){return oe.resolve(this.size)}}class CL extends qO{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class TL{constructor(e){this.persistence=e,this.Fi=new kl(t=>zd(t),dv),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.$i=0,this.Bi=new nS,this.targetCount=0,this.Li=nh.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),oe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new nh(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Tn(t),oe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Fi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Bi.containsKey(t))}}class AL{constructor(e,t){this.Ui={},this.overlays={},this.es=new es(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new TL(this),this.indexManager=new iL,this.ds=new bL(r=>this.referenceDelegate.qi(r)),this.M=new NO(t),this._s=new wL(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new DL(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new SL(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return oe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class SL extends MO{constructor(e){super(),this.currentSequenceNumber=e}}class rS{constructor(e){this.persistence=e,this.ji=new nS,this.Wi=null}static zi(e){return new rS(e)}get Hi(){if(this.Wi)return this.Wi;throw tt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Hi,r=>{const o=Fe.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,ht.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return oe.or([()=>oe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function oP(n,e){return`firestore_clients_${n}_${e}`}function aP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iS(n,e){return`firestore_targets_${n}_${e}`}class CD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ee(o.error.code,o.error.message))),d?new CD(e,t,o.state,u):(Yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ee(r.error.code,r.error.message))),u?new xv(e,r.state,o):(Yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=pD();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=DN(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new TD(e,u):(Yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sS{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sS(t.clientId,t.onlineState):(Yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oS{constructor(){this.activeTargetIds=pD()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aS{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Vn(St),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=oP(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new oS),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(oP(e.persistenceKey,o));if(u){const d=TD.Yi(o,u);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iS(this.persistenceKey,e));if(r){const o=xv.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,W.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let d=es.A;if(null!=u)try{const g=JSON.parse(u);yt("number"==typeof g),d=g}catch(g){Yn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==es.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new CD(this.currentUser,e,t,r),u=aP(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=aP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=iS(this.persistenceKey,e),u=new xv(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return TD.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return CD.Yi(new Lr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return xv.Yi(o,t)}mr(e){return sS.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,W.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),d=[],g=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Fr(d,g).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=pD();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class uP{constructor(){this.$r=new oS,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new oS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ML{Lr(e){}shutdown(){}}class lP{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class RL{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class NL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const d=this.uo(e,t);Me("RestConnection","Sending: ",d,r);const g={};return this.ao(g,o,u),this.co(e,d,g,r).then(v=>(Me("RestConnection","Received: ",v),v),v=>{throw rv("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${xL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const g=new xk;g.listenOnce(Ak.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case EA.NO_ERROR:const D=g.getResponseJson();Me("Connection","XHR received:",JSON.stringify(D)),u(D);break;case EA.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),d(new Ee(ne.DEADLINE_EXCEEDED,"Request time out"));break;case EA.HTTP_ERROR:const A=g.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const S=g.getResponseJson().error;if(S&&S.status&&S.message){const B=function(G){const te=G.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(te)>=0?te:ne.UNKNOWN}(S.status);d(new Ee(B,S.message))}else d(new Ee(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Ee(ne.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ck(),d=Tk(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Mk({})),this.ao(g.initMessageHeaders,t,r),(0,ze.uI)()||(0,ze.b$)()||(0,ze.d)()||(0,ze.w1)()||(0,ze.Mn)()||(0,ze.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Me("Connection","Creating WebChannel: "+v,g);const D=u.createWebChannel(v,g);let A=!1,S=!1;const B=new RL({Wr:te=>{S?Me("Connection","Not sending because WebChannel is closed:",te):(A||(Me("Connection","Opening WebChannel transport."),D.open(),A=!0),Me("Connection","WebChannel sending:",te),D.send(te))},zr:()=>D.close()}),G=(te,Se,Ze)=>{te.listen(Se,Et=>{try{Ze(Et)}catch(wt){setTimeout(()=>{throw wt},0)}})};return G(D,nD.EventType.OPEN,()=>{S||Me("Connection","WebChannel transport opened.")}),G(D,nD.EventType.CLOSE,()=>{S||(S=!0,Me("Connection","WebChannel transport closed"),B.no())}),G(D,nD.EventType.ERROR,te=>{S||(S=!0,rv("Connection","WebChannel transport errored:",te),B.no(new Ee(ne.UNAVAILABLE,"The operation could not be completed")))}),G(D,nD.EventType.MESSAGE,te=>{var Se;if(!S){const Ze=te.data[0];yt(!!Ze);const Et=Ze,wt=Et.error||(null===(Se=Et[0])||void 0===Se?void 0:Se.error);if(wt){Me("Connection","WebChannel received error:",wt);const Pt=wt.status;let bt=function(Jt){const Yr=Jn[Jt];if(void 0!==Yr)return sO(Yr)}(Pt),Vt=wt.message;void 0===bt&&(bt=ne.INTERNAL,Vt="Unknown error status: "+Pt+" with message "+wt.message),S=!0,B.no(new Ee(bt,Vt)),D.close()}else Me("Connection","WebChannel received:",Ze),B.so(Ze)}}),G(d,Sk.STAT_EVENT,te=>{te.stat===pN.PROXY?Me("Connection","Detected buffering proxy"):te.stat===pN.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.eo()},0),B}}function cP(){return"undefined"!=typeof window?window:null}function AD(){return"undefined"!=typeof document?document:null}function Rv(n){return new EF(n,!0)}class uS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class dP{constructor(e,t,r,o,u,d,g,v){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new uS(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,W.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,W.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Ee(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,W.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OL extends dP{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function DF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:tt(),o=e.targetChange.targetIds||[],u=function(v,D){return v.N?(yt(void 0===D||"string"==typeof D),lr.fromBase64String(D||"")):(yt(void 0===D||D instanceof Uint8Array),lr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const D=void 0===v.code?ne.UNKNOWN:sO(v.code);return new Ee(D,v.message||"")}(d);t=new uO(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),u=Dr(r.document.updateTime),d=new Zr({mapValue:{fields:r.document.fields}}),g=gn.newFoundDocument(o,u,d);t=new gD(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),u=r.readTime?Dr(r.readTime):ht.min(),d=gn.newNoDocument(o,u);t=new gD([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new gD([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new dF(r.count||0);t=new aO(r.targetId,u)}}var v;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return ht.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?Dr(u.readTime):ht.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=wv(this.M),t.addTarget=function(o,u){let d;const g=u.target;return d=oD(g)?{documents:_O(o,g)}:{query:vO(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=hO(o,u.resumeToken):u.snapshotVersion.compareTo(ht.min())>0&&(d.readTime=vv(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function CF(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=wv(this.M),t.removeTarget=e,this.Fo(t)}}class PL extends dP{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function bF(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,o){let u=Dr(r.updateTime?r.updateTime:o);return u.isEqual(ht.min())&&(u=Dr(o)),new uF(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.Yo(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=wv(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Iv(this.M,r))};this.Fo(t)}}class kL extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ne.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ne.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class FL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Yn(t),this.iu=!1):Me("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class LL{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(g=>{r.enqueueAndForget((0,W.Z)(function*(){var v;Bl(d)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,W.Z)(function*(D){const A=$e(D);A.fu.add(4),yield eg(A),A.wu.set("Unknown"),A.fu.delete(4),yield Nv(A)}),function(D){return v.apply(this,arguments)})(d))}))}),this.wu=new FL(r,o)}}function Nv(n){return lS.apply(this,arguments)}function lS(){return lS=(0,W.Z)(function*(n){if(Bl(n))for(const e of n.du)yield e(!0)}),lS.apply(this,arguments)}function eg(n){return cS.apply(this,arguments)}function cS(){return cS=(0,W.Z)(function*(n){for(const e of n.du)yield e(!1)}),cS.apply(this,arguments)}function SD(n,e){const t=$e(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),fS(t)?hS(t):ng(t).xo()&&dS(t,e))}function Ov(n,e){const t=$e(n),r=ng(t);t.lu.delete(e),r.xo()&&hP(t,e),0===t.lu.size&&(r.xo()?r.Mo():Bl(t)&&t.wu.set("Unknown"))}function dS(n,e){n.mu.Z(e.targetId),ng(n).jo(e)}function hP(n,e){n.mu.Z(e),ng(n).Wo(e)}function hS(n){n.mu=new yF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),ng(n).start(),n.wu.ru()}function fS(n){return Bl(n)&&!ng(n).Co()&&n.lu.size>0}function Bl(n){return 0===$e(n).fu.size}function fP(n){n.mu=void 0}function VL(n){return pS.apply(this,arguments)}function pS(){return pS=(0,W.Z)(function*(n){n.lu.forEach((e,t)=>{dS(n,e)})}),pS.apply(this,arguments)}function UL(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,W.Z)(function*(n,e){fP(n),fS(n)?(n.wu.au(e),hS(n)):n.wu.set("Unknown")}),gS.apply(this,arguments)}function BL(n,e,t){return mS.apply(this,arguments)}function mS(){return mS=(0,W.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof uO&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.lu.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.lu.delete(g),o.mu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield MD(n,r)}else if(e instanceof gD?n.mu.ut(e):e instanceof aO?n.mu._t(e):n.mu.ht(e),!t.isEqual(ht.min()))try{const r=yield tP(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.mu.yt(u);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const D=o.lu.get(v);D&&o.lu.set(v,D.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const v=o.lu.get(g);if(!v)return;o.lu.set(g,v.withResumeToken(lr.EMPTY_BYTE_STRING,v.snapshotVersion)),hP(o,g);const D=new Fl(v.target,g,1,v.sequenceNumber);dS(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield MD(n,r)}var r}),mS.apply(this,arguments)}function MD(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,W.Z)(function*(n,e,t){if(!Yd(e))throw e;n.fu.add(1),yield eg(n),n.wu.set("Offline"),t||(t=()=>tP(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Nv(n)}))}),yS.apply(this,arguments)}function pP(n,e){return e().catch(t=>MD(n,t,e))}function tg(n){return _S.apply(this,arguments)}function _S(){return _S=(0,W.Z)(function*(n){const e=$e(n),t=jl(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;jL(e);)try{const o=yield _L(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,$L(e,o)}catch(o){yield MD(e,o)}gP(e)&&mP(e)}),_S.apply(this,arguments)}function jL(n){return Bl(n)&&n.hu.length<10}function $L(n,e){n.hu.push(e);const t=jl(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function gP(n){return Bl(n)&&!jl(n).Co()&&n.hu.length>0}function mP(n){jl(n).start()}function HL(n){return vS.apply(this,arguments)}function vS(){return vS=(0,W.Z)(function*(n){jl(n).Zo()}),vS.apply(this,arguments)}function GL(n){return ES.apply(this,arguments)}function ES(){return ES=(0,W.Z)(function*(n){const e=jl(n);for(const t of n.hu)e.Jo(t.mutations)}),ES.apply(this,arguments)}function WL(n,e,t){return wS.apply(this,arguments)}function wS(){return wS=(0,W.Z)(function*(n,e,t){const r=n.hu.shift(),o=BA.from(r,e,t);yield pP(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield tg(n)}),wS.apply(this,arguments)}function zL(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,W.Z)(function*(n,e){var t;e&&jl(n).Ho&&(yield(t=(0,W.Z)(function*(r,o){if(iO(u=o.code)&&u!==ne.ABORTED){const d=r.hu.shift();jl(r).ko(),yield pP(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield tg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),gP(n)&&mP(n)}),IS.apply(this,arguments)}function yP(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,W.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=Bl(t);t.fu.add(3),yield eg(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Nv(t)}),DS.apply(this,arguments)}function bS(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,W.Z)(function*(n,e){const t=$e(n);e?(t.fu.delete(2),yield Nv(t)):e||(t.fu.add(2),yield eg(t),t.wu.set("Unknown"))}),CS.apply(this,arguments)}function ng(n){return n.gu||(n.gu=function(e,t,r){const o=$e(e);return o.eu(),new OL(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:VL.bind(null,n),Yr:UL.bind(null,n),Qo:BL.bind(null,n)}),n.du.push(function(){var e=(0,W.Z)(function*(t){t?(n.gu.ko(),fS(n)?hS(n):n.wu.set("Unknown")):(yield n.gu.stop(),fP(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function jl(n){return n.yu||(n.yu=function(e,t,r){const o=$e(e);return o.eu(),new PL(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:HL.bind(null,n),Yr:zL.bind(null,n),Xo:GL.bind(null,n),Yo:WL.bind(null,n)}),n.du.push(function(){var e=(0,W.Z)(function*(t){t?(n.yu.ko(),yield tg(n)):(yield n.yu.stop(),n.hu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class TS{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new TS(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ee(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),Yd(n))return new Ee(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class ig{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=PA(),this.sortedSet=new Vn(this.comparator)}static emptySet(e){return new ig(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ig)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ig;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _P{constructor(){this.pu=new Vn(Fe.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):tt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sg{constructor(e,t,r,o,u,d,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new sg(e,t,ig.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class qL{constructor(){this.Tu=void 0,this.listeners=[]}}class ZL{constructor(){this.queries=new kl(e=>$N(e),hv),this.onlineState="Unknown",this.Eu=new Set}}function AS(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,W.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new qL),o)try{u.Tu=yield t.onListen(r)}catch(d){const g=rg(d,`Initialization of query '${xA(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&RS(t)}),SS.apply(this,arguments)}function MS(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,W.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),xS.apply(this,arguments)}function KL(n,e){const t=$e(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Ru(o)&&(r=!0);d.Tu=o}}r&&RS(t)}function YL(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function RS(n){n.Eu.forEach(e=>{e.next()})}class NS{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new sg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=sg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class QL{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class vP{constructor(e){this.M=e}fi(e){return ea(this.M,e)}di(e){return e.metadata.exists?yO(this.M,e.document,!1):gn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Dr(e)}}class JL{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EP(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new vP(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||en()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,W.Z)(function*(){const t=yield function vL(n,e,t,r){return eS.apply(this,arguments)}(e.localStore,new vP(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield EL(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function EP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wP{constructor(e){this.key=e}}class IP{constructor(e){this.key=e}}class DP{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=en(),this.mutatedKeys=en(),this.Uu=GN(e),this.qu=new ig(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new _P,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v=uD(this.query)&&o.size===this.query.limit?o.last():null,D=lD(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,S)=>{const B=o.get(A),G=RA(this.query,S)?S:null,te=!!B&&this.mutatedKeys.has(B.key),Se=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ze=!1;B&&G?B.data.isEqual(G.data)?te!==Se&&(r.track({type:3,doc:G}),Ze=!0):this.ju(B,G)||(r.track({type:2,doc:G}),Ze=!0,(v&&this.Uu(G,v)>0||D&&this.Uu(G,D)<0)&&(g=!0)):!B&&G?(r.track({type:0,doc:G}),Ze=!0):B&&!G&&(r.track({type:1,doc:B}),Ze=!0,(v||D)&&(g=!0)),Ze&&(G?(d=d.add(G),u=Se?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),uD(this.query)||lD(this.query))for(;d.size>this.query.limit;){const A=uD(this.query)?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{qu:d,Qu:r,ni:g,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((D,A)=>function(S,B){const G=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return G(S)-G(B)}(D.type,A.type)||this.Uu(D.doc,A.doc)),this.Wu(r);const d=t?this.zu():[],g=0===this.Lu.size&&this.current?1:0,v=g!==this.Bu;return this.Bu=g,0!==u.length||v?{snapshot:new sg(this.query,e.qu,o,u,e.mutatedKeys,0===g,v,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new _P,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=en(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new IP(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new wP(r))}),t}Yu(e){this.$u=e.li,this.Lu=en();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return sg.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class XL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eV{constructor(e){this.key=e,this.Zu=!1}}class tV{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new kl(g=>$N(g),hv),this.na=new Map,this.sa=new Set,this.ia=new Vn(Fe.comparator),this.ra=new Map,this.oa=new nS,this.ua={},this.aa=new Map,this.ca=nh.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function nV(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,W.Z)(function*(n,e){const t=nM(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const d=yield Jp(t.localStore,As(e));t.isPrimaryClient&&SD(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield PS(t,e,r,"current"===g)}return o}),OS.apply(this,arguments)}function PS(n,e,t,r){return kS.apply(this,arguments)}function kS(){return kS=(0,W.Z)(function*(n,e,t,r){n.la=(A,S,B)=>{return(G=(0,W.Z)(function*(te,Se,Ze,Et){let wt=Se.view.Gu(Ze);wt.ni&&(wt=yield bD(te.localStore,Se.query,!1).then(({documents:Vt})=>Se.view.Gu(Vt,wt)));const Pt=Et&&Et.targetChanges.get(Se.targetId),bt=Se.view.applyChanges(wt,te.isPrimaryClient,Pt);return WS(te,Se.targetId,bt.Hu),bt.snapshot}),function(te,Se,Ze,Et){return G.apply(this,arguments)})(n,A,S,B);var G};const o=yield bD(n.localStore,e,!0),u=new DP(e,o.li),d=u.Gu(o.documents),g=_v.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(d,n.isPrimaryClient,g);WS(n,t,v.Hu);const D=new XL(e,t,u);return n.ea.set(e,D),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),v.snapshot}),kS.apply(this,arguments)}function rV(n,e){return FS.apply(this,arguments)}function FS(){return FS=(0,W.Z)(function*(n,e){const t=$e(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!hv(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ov(t.remoteStore,r.targetId),og(t,r.targetId)}).catch(rh))):(og(t,r.targetId),yield Xp(t.localStore,r.targetId,!0))}),FS.apply(this,arguments)}function LS(){return LS=(0,W.Z)(function*(n,e,t){const r=rM(n);try{const o=yield function(u,d){const g=$e(u),v=Ln.now(),D=d.reduce((S,B)=>S.add(B.key),en());let A;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>g.ci.Ks(S,D).next(B=>{A=B;const G=[];for(const te of d){const Se=cF(te,A.get(te.key));null!=Se&&G.push(new Kd(te.key,Se,NN(Se.value.mapValue),Qn.exists(!0)))}return g.Bs.addMutationBatch(S,v,G,d)})).then(S=>(S.applyToLocalDocumentSet(A),{batchId:S.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let v=u.ua[u.currentUser.toKey()];v||(v=new Vn(St)),v=v.insert(d,g),u.ua[u.currentUser.toKey()]=v}(r,o.batchId,t),yield uu(r,o.changes),yield tg(r.remoteStore)}catch(o){const u=rg(o,"Failed to persist write");t.reject(u)}}),LS.apply(this,arguments)}function bP(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,W.Z)(function*(n,e){const t=$e(n);try{const r=yield yL(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ra.get(u);d&&(yt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?yt(d.Zu):o.removedDocuments.size>0&&(yt(d.Zu),d.Zu=!1))}),yield uu(t,r,e)}catch(r){yield rh(r)}}),VS.apply(this,arguments)}function CP(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,d)=>{const g=d.view.Au(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=$e(u);g.onlineState=d;let v=!1;g.queries.forEach((D,A)=>{for(const S of A.listeners)S.Au(d)&&(v=!0)}),v&&RS(g)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sV(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,W.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let d=new Vn(Fe.comparator);d=d.insert(u,gn.newNoDocument(u,ht.min()));const g=en().add(u),v=new yv(ht.min(),new Map,new mn(St),d,g);yield bP(r,v),r.ia=r.ia.remove(u),r.ra.delete(e),zS(r)}else yield Xp(r.localStore,e,!1).then(()=>og(r,e,t)).catch(rh)}),US.apply(this,arguments)}function oV(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,W.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield mL(t.localStore,e);GS(t,r,null),HS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield uu(t,o)}catch(o){yield rh(o)}}),BS.apply(this,arguments)}function aV(n,e,t){return jS.apply(this,arguments)}function jS(){return jS=(0,W.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(u,d){const g=$e(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return g.Bs.lookupMutationBatch(v,d).next(A=>(yt(null!==A),D=A.keys(),g.Bs.removeMutationBatch(v,A))).next(()=>g.Bs.performConsistencyCheck(v)).next(()=>g.ci.Ks(v,D))})}(r.localStore,e);GS(r,e,t),HS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield uu(r,o)}catch(o){yield rh(o)}}),jS.apply(this,arguments)}function $S(){return $S=(0,W.Z)(function*(n,e){const t=$e(n);Bl(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=$e(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=rg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),$S.apply(this,arguments)}function HS(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function GS(n,e,t){const r=$e(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||TP(n,r)})}function TP(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Ov(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),zS(n))}function WS(n,e,t){for(const r of t)r instanceof wP?(n.oa.addReference(r.key,e),lV(n,r)):r instanceof IP?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||TP(n,r.key)):tt()}function lV(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.sa.add(r),zS(n))}function zS(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Fe(Wt.fromString(e)),r=n.ca.next();n.ra.set(r,new eV(t)),n.ia=n.ia.insert(t,r),SD(n.remoteStore,new Fl(As(jp(t.path)),r,2,es.A))}}function uu(n,e,t){return qS.apply(this,arguments)}function qS(){return qS=(0,W.Z)(function*(n,e,t){const r=$e(n),o=[],u=[],d=[];var g;r.ea.isEmpty()||(r.ea.forEach((g,v)=>{d.push(r.la(v,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D.fromCache?"not-current":"current"),o.push(D);const A=QA.Ys(v.targetId,D);u.push(A)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(g=(0,W.Z)(function*(v,D){const A=$e(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(D,B=>oe.forEach(B.Hs,G=>A.persistence.referenceDelegate.addReference(S,B.targetId,G)).next(()=>oe.forEach(B.Js,G=>A.persistence.referenceDelegate.removeReference(S,B.targetId,G)))))}catch(S){if(!Yd(S))throw S;Me("LocalStore","Failed to update sequence numbers: "+S)}for(const S of D){const B=S.targetId;if(!S.fromCache){const G=A.ii.get(B),Se=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);A.ii=A.ii.insert(B,Se)}}}),function(v,D){return g.apply(this,arguments)})(r.localStore,u))}),qS.apply(this,arguments)}function cV(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,W.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield eP(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(g=>{g.reject(new Ee(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uu(t,r.hi)}var o}),ZS.apply(this,arguments)}function dV(n,e){const t=$e(n),r=t.ra.get(e);if(r&&r.Zu)return en().add(r.key);{let o=en();const u=t.na.get(e);if(!u)return o;for(const d of u){const g=t.ea.get(d);o=o.unionWith(g.view.Ku)}return o}}function hV(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,W.Z)(function*(n,e){const t=$e(n),r=yield bD(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&WS(t,e.targetId,o.Hu),o}),KS.apply(this,arguments)}function fV(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,W.Z)(function*(n,e){const t=$e(n);return iP(t.localStore,e).then(r=>uu(t,r))}),YS.apply(this,arguments)}function pV(n,e,t,r){return QS.apply(this,arguments)}function QS(){return QS=(0,W.Z)(function*(n,e,t,r){const o=$e(n),u=yield function(d,g){const v=$e(d),D=$e(v.Bs);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>D.fn(A,g).next(S=>S?v.ci.Ks(A,S):oe.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield tg(o.remoteStore):"acknowledged"===t||"rejected"===t?(GS(o,e,r||null),HS(o,e),g=e,$e($e(o.localStore).Bs)._n(g)):tt(),yield uu(o,u)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),QS.apply(this,arguments)}function JS(){return JS=(0,W.Z)(function*(n,e){const t=$e(n);if(nM(t),rM(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield AP(t,r.toArray());t.ha=!0,yield bS(t.remoteStore,!0);for(const u of o)SD(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(og(t,d),Xp(t.localStore,d,!0))),Ov(t.remoteStore,d)}),yield o,yield AP(t,r),function(u){const d=$e(u);d.ra.forEach((g,v)=>{Ov(d.remoteStore,v)}),d.oa.bi(),d.ra=new Map,d.ia=new Vn(Fe.comparator)}(t),t.ha=!1,yield bS(t.remoteStore,!1)}}),JS.apply(this,arguments)}function AP(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,W.Z)(function*(n,e,t){const r=$e(n),o=[],u=[];for(const d of e){let g;const v=r.na.get(d);if(v&&0!==v.length){g=yield Jp(r.localStore,As(v[0]));for(const D of v){const A=r.ea.get(D),S=yield hV(r,A);S.snapshot&&u.push(S.snapshot)}}else{const D=yield rP(r.localStore,d);g=yield Jp(r.localStore,D),yield PS(r,SP(D),d,!1)}o.push(g)}return r.ta.Qo(u),o}),XS.apply(this,arguments)}function SP(n){return BN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mV(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function yV(n,e,t,r){return eM.apply(this,arguments)}function eM(){return eM=(0,W.Z)(function*(n,e,t,r){const o=$e(n);if(o.ha)return void Me("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield iP(o.localStore,HN(u[0])),g=yv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield uu(o,d,g);break}case"rejected":yield Xp(o.localStore,e,!0),og(o,e,r);break;default:tt()}}),eM.apply(this,arguments)}function _V(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,W.Z)(function*(n,e,t){const r=nM(n);if(r.ha){for(const o of e){if(r.na.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const u=yield rP(r.localStore,o),d=yield Jp(r.localStore,u);yield PS(r,SP(u),d.targetId,!1),SD(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield Xp(r.localStore,o,!1).then(()=>{Ov(r.remoteStore,o),og(r,o)}).catch(rh))}}),tM.apply(this,arguments)}function nM(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sV.bind(null,e),e.ta.Qo=KL.bind(null,e.eventManager),e.ta.fa=YL.bind(null,e.eventManager),e}function rM(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aV.bind(null,e),e}class MP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.M=Rv(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return XO(this.persistence,new JO,e.initialUser,this.M)}wa(e){return new AL(rS.zi,this.M)}_a(e){return new uP}terminate(){var e=this;return(0,W.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xP extends MP{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield rM(r.ya.syncEngine),yield tg(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return XO(this.persistence,new JO,e.initialUser,this.M)}ma(e){return new uL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=YA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new KA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cP(),AD(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new uP}}class EV extends xP{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof aS&&(r.sharedClientState.syncEngine={Mr:pV.bind(null,o),Or:yV.bind(null,o),Fr:_V.bind(null,o),Fs:mV.bind(null,o),kr:fV.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,W.Z)(function*(d){yield function gV(n,e){return JS.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}_a(e){const t=cP();if(!aS.vt(t))throw new Ee(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iM{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>CP(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,r.syncEngine),yield bS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZL}createDatastore(e){const t=Rv(e.databaseInfo.databaseId),r=new NL(e.databaseInfo);return new kL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>CP(this.syncEngine,g,0),d=lP.vt()?new lP:new ML,new LL(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,v,D){const A=new tV(r,o,u,d,g,v);return D&&(A.ha=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,W.Z)(function*(t){const r=$e(t);Me("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield eg(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function RP(n,e=10240){let t=0;return{read:()=>(0,W.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wV{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new wr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new QL(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,W.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,W.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,W.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ee(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,W.Z)(function*(u,d){const g=$e(u),v=wv(g.M)+"/documents",D={documents:d.map(G=>Ev(g.M,G))},A=yield g.ho("BatchGetDocuments",v,D),S=new Map;A.forEach(G=>{const te=function IF(n,e){return"found"in e?function(t,r){yt(!!r.found);const o=ea(t,r.found.name),u=Dr(r.found.updateTime),d=new Zr({mapValue:{fields:r.found.fields}});return gn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const o=ea(t,r.missing),u=Dr(r.readTime);return gn.newNoDocument(o,u)}(n,e):tt()}(g.M,G);S.set(te.key.toString(),te)});const B=[];return d.forEach(G=>{const te=S.get(G.toString());yt(!!te),B.push(te)}),B}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Fe.fromPath(o);e.mutations.push(new OA(u,e.precondition(u)))}),yield(r=(0,W.Z)(function*(o,u){const d=$e(o),g=wv(d.M)+"/documents",v={writes:u.map(D=>Iv(d.M,D))};yield d.oo("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ee(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Ee(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DV{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new uS(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,W.Z)(function*(){const t=new IV(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!$d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!iO(t)}return!1}}class bV{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Lr.UNAUTHENTICATED,this.clientId=_N.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,W.Z)(function*(g){Me("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Me("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,W.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ee(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=rg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function NP(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,W.Z)(function*(u){r.isEqual(u)||(yield eP(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sM.apply(this,arguments)}function OP(n,e){return oM.apply(this,arguments)}function oM(){return oM=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aM(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>yP(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>yP(e.remoteStore,u)),n.onlineComponents=e}),oM.apply(this,arguments)}function aM(n){return uM.apply(this,arguments)}function uM(){return uM=(0,W.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield NP(n,new MP)),n.offlineComponents}),uM.apply(this,arguments)}function RD(n){return lM.apply(this,arguments)}function lM(){return lM=(0,W.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield OP(n,new iM)),n.onlineComponents}),lM.apply(this,arguments)}function PP(n){return aM(n).then(e=>e.persistence)}function cM(n){return aM(n).then(e=>e.localStore)}function kP(n){return RD(n).then(e=>e.remoteStore)}function dM(n){return RD(n).then(e=>e.syncEngine)}function ag(n){return hM.apply(this,arguments)}function hM(){return hM=(0,W.Z)(function*(n){const e=yield RD(n),t=e.eventManager;return t.onListen=nV.bind(null,e.syncEngine),t.onUnlisten=rV.bind(null,e.syncEngine),t}),hM.apply(this,arguments)}function FP(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,u,d,g,v){const D=new xD({next:S=>{u.enqueueAndForget(()=>MS(o,A));const B=S.docs.has(d);!B&&S.fromCache?v.reject(new Ee(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&S.fromCache&&g&&"server"===g.source?v.reject(new Ee(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),A=new NS(jp(d.path),D,{includeMetadataChanges:!0,Cu:!0});return AS(o,A)}(yield ag(n),n.asyncQueue,e,t,r)})),r.promise}function LP(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(o,u,d,g,v){const D=new xD({next:S=>{u.enqueueAndForget(()=>MS(o,A)),S.fromCache&&"server"===g.source?v.reject(new Ee(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),A=new NS(d,D,{includeMetadataChanges:!0,Cu:!0});return AS(o,A)}(yield ag(n),n.asyncQueue,e,t,r)})),r.promise}const VP=new Map;function fM(n,e,t){if(!t)throw new Ee(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UP(n,e,t,r){if(!0===e&&!0===r)throw new Ee(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BP(n){if(!Fe.isDocumentKey(n))throw new Ee(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jP(n){if(Fe.isDocumentKey(n))throw new Ee(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ND(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ND(n);throw new Ee(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $P(n,e){if(e<=0)throw new Ee(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class HP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ee(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ee(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,UP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HP({}),this._settingsFrozen=!1,e instanceof su?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ee(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ee(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ee(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ok;switch(t.type){case"gapi":const r=t.client;return yt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Lk(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ee(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=VP.get(e);t&&(Me("ComponentProvider","Removing Datastore"),VP.delete(e),t.terminate())}(this),Promise.resolve()}}class yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Kr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class na extends Kr{constructor(e,t,r){super(e,t,jp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Fe(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function pM(n,e,...t){if(n=(0,ze.m9)(n),fM("collection","path",e),n instanceof Pv){const r=Wt.fromString(e,...t);return jP(r),new na(n,null,r)}{if(!(n instanceof yn||n instanceof na))throw new Ee(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return jP(r),new na(n.firestore,null,r)}}function kv(n,e,...t){if(n=(0,ze.m9)(n),1===arguments.length&&(e=_N.R()),fM("doc","path",e),n instanceof Pv){const r=Wt.fromString(e,...t);return BP(r),new yn(n,null,new Fe(r))}{if(!(n instanceof yn||n instanceof na))throw new Ee(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return BP(r),new yn(n.firestore,n instanceof na?n.converter:null,new Fe(r))}}function GP(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),(n instanceof yn||n instanceof na)&&(e instanceof yn||e instanceof na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WP(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),n instanceof Kr&&e instanceof Kr&&n.firestore===e.firestore&&hv(n._query,e._query)&&n.converter===e.converter}class kV{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new uS(this,"async_queue_retry"),this.qa=()=>{const t=AD();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=AD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=AD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new wr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,W.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Yd(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=TS.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&tt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function gM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class FV{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bn extends Pv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zP(this),this._firestoreClient.terminate()}}function VV(n=(0,Ft.getApp)()){return(0,Ft._getProvider)(n,"firestore").getImmediate()}function Xn(n){return n._firestoreClient||zP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zP(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hk(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new bV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function qP(n,e,t){const r=new wr;return n.asyncQueue.enqueue((0,W.Z)(function*(){try{yield NP(n,t),yield OP(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ne.FAILED_PRECONDITION||u.code===ne.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function ZP(n){if(n._initialized||n._terminated)throw new Ee(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ee(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(lr.fromBase64String(e))}catch(t){throw new Ee(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sh{constructor(e){this._methodName=e}}class OD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const qV=/^__.*__$/;class ZV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new pv(e,this.data,t,this.fieldTransforms)}}class KP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class PD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new PD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return LD(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(YP(this.Xa)&&qV.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class KV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Rv(e)}ac(e,t,r,o=!1){return new PD({Xa:e,methodName:t,uc:r,path:Ir.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function oh(n){const e=n._freezeSettings(),t=Rv(n._databaseId);return new KV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kD(n,e,t,r,o,u={}){const d=n.ac(u.merge||u.mergeFields?2:0,e,t,o);vM("Data must be an object, but it was:",d,r);const g=XP(r,d);let v,D;if(u.merge)v=new Vp(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const S of u.mergeFields){const B=EM(e,S,t);if(!d.contains(B))throw new Ee(ne.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);t1(A,B)||A.push(B)}v=new Vp(A),D=d.fieldTransforms.filter(S=>v.covers(S.field))}else v=null,D=d.fieldTransforms;return new ZV(new Zr(g),v,D)}class Fv extends sh{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fv}}function QP(n,e,t){return new PD({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class mM extends sh{_toFieldTransform(e){return new fv(e.path,new Hp)}isEqual(e){return e instanceof mM}}class YV extends sh{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=QP(this,e,!0),r=this.cc.map(u=>ah(u,t)),o=new qd(r);return new fv(e.path,o)}isEqual(e){return this===e}}class QV extends sh{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=QP(this,e,!0),r=this.cc.map(u=>ah(u,t)),o=new Zd(r);return new fv(e.path,o)}isEqual(e){return this===e}}class JV extends sh{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Gp(e.M,qN(e.M,this.hc));return new fv(e.path,t)}isEqual(e){return this===e}}function yM(n,e,t,r){const o=n.ac(1,e,t);vM("Data must be an object, but it was:",o,r);const u=[],d=Zr.empty();Bd(r,(v,D)=>{const A=FD(e,v,t);D=(0,ze.m9)(D);const S=o.sc(A);if(D instanceof Fv)u.push(A);else{const B=ah(D,S);null!=B&&(u.push(A),d.set(A,B))}});const g=new Vp(u);return new KP(d,g,o.fieldTransforms)}function _M(n,e,t,r,o,u){const d=n.ac(1,e,t),g=[EM(e,r,t)],v=[o];if(u.length%2!=0)throw new Ee(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<u.length;B+=2)g.push(EM(e,u[B])),v.push(u[B+1]);const D=[],A=Zr.empty();for(let B=g.length-1;B>=0;--B)if(!t1(D,g[B])){const G=g[B];let te=v[B];te=(0,ze.m9)(te);const Se=d.sc(G);if(te instanceof Fv)D.push(G);else{const Ze=ah(te,Se);null!=Ze&&(D.push(G),A.set(G,Ze))}}const S=new Vp(D);return new KP(A,S,d.fieldTransforms)}function JP(n,e,t,r=!1){return ah(t,n.ac(r?4:3,e))}function ah(n,e){if(e1(n=(0,ze.m9)(n)))return vM("Unsupported field value:",e,n),XP(n,e);if(n instanceof sh)return function(t,r){if(!YP(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=ah(d,r.ic(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qN(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Ln.fromDate(t);return{timestampValue:vv(r.M,o)}}if(t instanceof Ln){const o=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vv(r.M,o)}}if(t instanceof OD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ra)return{bytesValue:hO(r.M,t._byteString)};if(t instanceof yn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${ND(t)}`)}(n,e)}function XP(n,e){const t={};return wN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bd(n,(r,o)=>{const u=ah(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function e1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof OD||n instanceof ra||n instanceof yn||n instanceof sh)}function vM(n,e,t){if(!e1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ND(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function EM(n,e,t){if((e=(0,ze.m9)(e))instanceof lu)return e._internalPath;if("string"==typeof e)return FD(n,e);throw LD("Field path arguments must be of type string or ",n,!1,void 0,t)}const XV=new RegExp("[~\\*/\\[\\]]");function FD(n,e,t){if(e.search(XV)>=0)throw LD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lu(...e.split("."))._internalPath}catch(r){throw LD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Ee(ne.INVALID_ARGUMENT,g+n+v)}function t1(n,e){return n.some(t=>t.isEqual(e))}class Lv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eU extends Lv{data(){return super.data()}}function VD(n,e){return"string"==typeof e?FD(n,e):e instanceof lu?e._internalPath:e._delegate._internalPath}class uh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cu extends Lv{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vv extends cu{data(e={}){return super.data(e)}}class $l{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new uh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vv(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Vv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new uh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new Vv(r._firestore,r._userDataWriter,d.doc.key,d.doc,new uh(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:tU(d.type),doc:g,oldIndex:v,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function n1(n,e){return n instanceof cu&&e instanceof cu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $l&&e instanceof $l&&n._firestore===e._firestore&&WP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function r1(n){if(lD(n)&&0===n.explicitOrderBy.length)throw new Ee(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uv{}function Hl(n,...e){for(const t of e)n=t._apply(n);return n}class nU extends Uv{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=oh(e.firestore),r=function(o,u,d,g,v,D,A){let S;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ee(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){l1(A,D);const G=[];for(const te of A)G.push(u1(g,o,te));S={arrayValue:{values:G}}}else S=u1(g,o,A)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||l1(A,D),S=JP(d,"where",A,"in"===D||"not-in"===D);const B=Vr.create(v,D,S);return function(G,te){if(te.S()){const Ze=SA(G);if(null!==Ze&&!Ze.isEqual(te.field))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${te.field.toString()}'`);const Et=AA(G);null!==Et&&c1(0,te.field,Et)}const Se=function(Ze,Et){for(const wt of Ze.filters)if(Et.indexOf(wt.op)>=0)return wt.op;return null}(G,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Se)throw new Ee(ne.INVALID_ARGUMENT,Se===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Se.toString()}' filters.`)}(o,B),B}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Kr(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new au(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class iU extends Uv{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Bp(o,u);return function(g,v){if(null===AA(g)){const D=SA(g);null!==D&&c1(0,D,v.field)}}(r,d),d}(e._query,this.lc,this._c);return new Kr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new au(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class i1 extends Uv{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Kr(e.firestore,e.converter,jN(e._query,this.wc,this.mc))}}class s1 extends Uv{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=a1(e,this.type,this.gc,this.yc);return new Kr(e.firestore,e.converter,(o=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class o1 extends Uv{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=a1(e,this.type,this.gc,this.yc);return new Kr(e.firestore,e.converter,(o=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function a1(n,e,t,r){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof Lv)return function(o,u,d,g,v){if(!g)throw new Ee(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const A of $p(o))if(A.field.isKeyField())D.push(Gd(u,g.key));else{const S=g.data.field(A.field);if(DA(S))throw new Ee(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const B=A.field.canonicalString();throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}D.push(S)}return new Pl(D,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=oh(n.firestore);return function(u,d,g,v,D,A){const S=u.explicitOrderBy;if(D.length>S.length)throw new Ee(ne.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let G=0;G<D.length;G++){const te=D[G];if(S[G].field.isKeyField()){if("string"!=typeof te)throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof te}`);if(!MA(u)&&-1!==te.indexOf("/"))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${te}' contains a slash.`);const Se=u.path.child(Wt.fromString(te));if(!Fe.isDocumentKey(Se))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Ze=new Fe(Se);B.push(Gd(d,Ze))}else{const Se=JP(g,v,te);B.push(Se)}}return new Pl(B,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function u1(n,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new Ee(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MA(e)&&-1!==t.indexOf("/"))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!Fe.isDocumentKey(r))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gd(n,new Fe(r))}if(t instanceof yn)return Gd(n,t._key);throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ND(t)}.`)}function l1(n,e){if(!Array.isArray(n)||0===n.length)throw new Ee(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ee(ne.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function c1(n,e,t){if(!t.isEqual(e))throw new Ee(ne.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wM{convertValue(e,t="none"){switch(Hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Bd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new OD(On(e.latitude),On(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sv(e));default:return null}}convertTimestamp(e){const t=Nl(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);yt(IO(r));const o=new su(r.get(1),r.get(3)),u=new Fe(r.popFirst(5));return o.isEqual(t)||Yn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function UD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hU extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}class d1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,t,r){this._verifyNotCommitted();const o=Gl(e,this._firestore),u=UD(o.converter,t,r),d=kD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Qn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Gl(e,this._firestore);let d;return d="string"==typeof(t=(0,ze.m9)(t))||t instanceof lu?_M(this._dataReader,"WriteBatch.update",u._key,t,r,o):yM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gl(e,this._firestore);return this._mutations=this._mutations.concat(new gv(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gl(n,e){if((n=(0,ze.m9)(n)).firestore!==e)throw new Ee(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lh extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function IM(n,e,t){n=Ht(n,yn);const r=Ht(n.firestore,bn),o=UD(n.converter,e,t);return ug(r,[kD(oh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Qn.none())])}function DM(n,e,t,...r){n=Ht(n,yn);const o=Ht(n.firestore,bn),u=oh(o);let d;return d="string"==typeof(e=(0,ze.m9)(e))||e instanceof lu?_M(u,"updateDoc",n._key,e,t,r):yM(u,"updateDoc",n._key,e),ug(o,[d.toMutation(n._key,Qn.exists(!0))])}function bM(n,...e){var t,r,o;n=(0,ze.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||gM(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(gM(e[d])){const S=e[d];e[d]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[d+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let v,D,A;if(n instanceof yn)D=Ht(n.firestore,bn),A=jp(n._key.path),v={next:S=>{e[d]&&e[d](CM(D,n,S))},error:e[d+1],complete:e[d+2]};else{const S=Ht(n,Kr);D=Ht(S.firestore,bn),A=S._query;const B=new lh(D);v={next:G=>{e[d]&&e[d](new $l(D,B,S,G))},error:e[d+1],complete:e[d+2]},r1(n._query)}return function(S,B,G,te){const Se=new xD(te),Ze=new NS(B,Se,G);return S.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return AS(yield ag(S),Ze)})),()=>{Se.Ia(),S.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return MS(yield ag(S),Ze)}))}}(Xn(D),A,g,v)}function ug(n,e){return function(t,r){const o=new wr;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function iV(n,e,t){return LS.apply(this,arguments)}(yield dM(t),r,o)})),o.promise}(Xn(n),e)}function CM(n,e,t){const r=t.docs.get(e._key),o=new lh(n);return new cu(n,o,e._key,r,new uh(t.hasPendingWrites,t.fromCache),e.converter)}class IU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=oh(e)}get(e){const t=Gl(e,this._firestore),r=new hU(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new Lv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Lv(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Gl(e,this._firestore),u=UD(o.converter,t,r),d=kD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Gl(e,this._firestore);let d;return d="string"==typeof(t=(0,ze.m9)(t))||t instanceof lu?_M(this._dataReader,"Transaction.update",u._key,t,r,o):yM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Gl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gl(e,this._firestore),r=new lh(this._firestore);return super.get(e).then(o=>new cu(this._firestore,r,t._key,o._document,new uh(!1,!1),t.converter))}}!function(n,e=!0){Fp=Ft.SDK_VERSION,(0,Ft._registerComponent)(new Ki.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new bn(o,new kk(t.getProvider("auth-internal")),new Vk(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ft.registerVersion)(gN,"3.4.8",n),(0,Ft.registerVersion)(gN,"3.4.8","esm2017")}();var MU={includeMetadataChanges:!1};function y1(n){return function TM(n,e){return void 0===e&&(e=MU),new Ei.y(function(t){return{unsubscribe:bM(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}(n,{includeMetadataChanges:!0}).pipe((0,pt.U)(function(e){return e.docs}))}class BD{constructor(e){return e}}const _1="firestore",MM=new p.OlP("angularfire2.firestore-instances");function LU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new BD(r)}}const VU={provide:class kU{constructor(){return Ky(_1)}},deps:[[new p.FiY,MM]]},UU={provide:BD,useFactory:function FU(n,e){const t=function Zy(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(d=>d.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(_1,n,e);return t&&new BD(t)},deps:[[new p.FiY,MM],vd]};let BU=(()=>{class n{constructor(){(0,Ft.registerVersion)("angularfire",Jf.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[UU,VU]}),n})();function jU(n,...e){return{ngModule:BU,providers:[{provide:MM,useFactory:LU(n),multi:!0,deps:[p.R0b,p.zs3,wl,Kw,[new p.FiY,Jy],[new p.FiY,I_],...e]}]}}const $U=Yo(y1,!0),v1=Yo(pM,!0),E1=Yo(kv,!0),HU=Yo(VV,!0),GU=Yo(IM,!0),WU=Yo(DM,!0);let xM=(()=>{class n{constructor(t){this.db=t,this.space=!1,this.bat=!1,this.Angle=!1,this.Speed=!1}check(t){this.space="True"==t}changeBat(t){this.bat=t>=0&&t<=100}changeagl(t){this.Angle=t>=30&&t<=120}changespeed(t){this.Speed=t>=4&&t<=6}addNewDocumentWithSpecificID(t){console.log("hiiii",t.value.id);const r=v1(this.db,"Wheelchairs");return console.log("HELLO"),GU(E1(r,t.value.id),Object.assign({},t.form.value))}updateDocument(t){console.log("dataUpdate");const r=E1(this.db,"Wheelchairs",t.value.id);return WU(r,Object.assign({},t.form.value))}reset_form(t){return t.reset()}ngOnInit(){}getAll(){return v1(this.db,"Wheelchairs")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(BD))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],decls:91,vars:1,consts:[["action","/action_page.php",1,"modal-content"],["contactForm","ngForm"],["for","state"],["type","State","id","inputState","ngModel","","name","State","required","",1,"form-control"],["value","Moving"],["value","Stop"],["value","Charging"],["for","Obstacle"],["type","Obstacle","id","inputObstacle","ngModel","","name","Obstacle","required","",1,"form-control",3,"change"],["os",""],["value","False"],["value","True"],["for","Sense free space"],["type","Sense free space","id","inputSense free space","ngModel","","name","Sense free space","required","",1,"form-control",3,"disabled"],["for","Direction"],["type","Direction","id","inputDirection","ngModel","","name","Direction","required","",1,"form-control"],["value","Non"],["value","Left"],["value","Right"],["value","Forword"],["value","Back"],["for","Moter"],["type","Moter","id","inputMoter","ngModel","","name","Moter","required","",1,"form-control"],["value","On"],["value","Off"],["for","Battery"],["type","number","placeholder","Enter Battery","name","Battery","min","0","max","100","id","inputBttery","ngModel","","name","Battery","required","",1,"form-control"],["for","Angle"],["type","number","placeholder","Enter Angle","name","Angle","min","30","max","160","id","inputAngle","ngModel","","name","Angle","required","",1,"form-control"],["for","Speed"],["type","number","placeholder","Enter Speed","name","Speed","min","0","max","8","id","inputSpeed","ngModel","","name","Speed","required","",1,"form-control"],[1,"form-row"],["calss","form-group col-md-6"],["for","get_id"],["type","text","name","id","ngModel","","name","id","required","",1,"form-control"],["id_val","ngModel"],[3,"click"]],template:function(t,r){if(1&t){const o=p.EpF();p.TgZ(0,"form",0,1)(2,"p")(3,"b"),p._uU(4,"Please fill in this form to create Wheel Chair."),p.qZA()(),p.TgZ(5,"label",2)(6,"b"),p._uU(7,"State"),p.qZA()(),p.TgZ(8,"select",3)(9,"option",4),p._uU(10,"Moving"),p.qZA(),p.TgZ(11,"option",5),p._uU(12,"Stop"),p.qZA(),p.TgZ(13,"option",6),p._uU(14,"Charging"),p.qZA()(),p.TgZ(15,"div"),p._UZ(16,"hr"),p.TgZ(17,"label",7)(18,"b"),p._uU(19,"Obstacle"),p.qZA()(),p.TgZ(20,"select",8,9),p.NdJ("change",function(){p.CHM(o);const d=p.MAs(21);return r.check(d.value)}),p.TgZ(22,"option",10),p._uU(23,"False"),p.qZA(),p.TgZ(24,"option",11),p._uU(25,"True"),p.qZA()()(),p.TgZ(26,"div")(27,"label",12)(28,"b"),p._uU(29,"Sense free space"),p.qZA()(),p.TgZ(30,"select",13)(31,"option",10),p._uU(32,"False"),p.qZA(),p.TgZ(33,"option",11),p._uU(34,"True"),p.qZA()()(),p.TgZ(35,"div"),p._UZ(36,"hr"),p.TgZ(37,"label",14)(38,"b"),p._uU(39," Direction"),p.qZA()(),p.TgZ(40,"select",15)(41,"option",16),p._uU(42,"Non"),p.qZA(),p.TgZ(43,"option",17),p._uU(44,"Left"),p.qZA(),p.TgZ(45,"option",18),p._uU(46,"Right"),p.qZA(),p.TgZ(47,"option",19),p._uU(48,"Forword"),p.qZA(),p.TgZ(49,"option",20),p._uU(50,"Back"),p.qZA()()(),p.TgZ(51,"div"),p._UZ(52,"hr"),p.TgZ(53,"label",21)(54,"b"),p._uU(55," Moter"),p.qZA()(),p.TgZ(56,"select",22)(57,"option",23),p._uU(58,"On"),p.qZA(),p.TgZ(59,"option",24),p._uU(60,"Off"),p.qZA()()(),p.TgZ(61,"div"),p._UZ(62,"hr"),p.TgZ(63,"label",25)(64,"b"),p._uU(65,"Battery"),p.qZA()(),p._UZ(66,"input",26),p.qZA(),p.TgZ(67,"div"),p._UZ(68,"hr"),p.TgZ(69,"label",27)(70,"b"),p._uU(71,"Angle"),p.qZA()(),p._UZ(72,"input",28),p.qZA(),p.TgZ(73,"div"),p._UZ(74,"hr"),p.TgZ(75,"label",29)(76,"b"),p._uU(77,"Speed"),p.qZA()(),p._UZ(78,"input",30),p.qZA(),p.TgZ(79,"div",31)(80,"div",32)(81,"label",33),p._uU(82,"id"),p.qZA(),p._UZ(83,"input",34,35),p.qZA()(),p.TgZ(85,"button",36),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(1);return r.updateDocument(d)}),p._uU(86,"update"),p.qZA(),p.TgZ(87,"button",36),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(1);return r.addNewDocumentWithSpecificID(d)}),p._uU(88,"add chair"),p.qZA(),p.TgZ(89,"button",36),p.NdJ("click",function(){p.CHM(o);const d=p.MAs(1);return r.reset_form(d)}),p._uU(90,"reset"),p.qZA()()}2&t&&(p.xp6(30),p.Q6J("disabled",!r.space))},directives:[Uh,Ca,Mo,st,ba,Hu,Wu,vt,No,Gu,ka,Na,Bs],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid rgba(255,0,47,.659)}.errMsg[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zU(n,e){if(1&n&&(p.TgZ(0,"div"),p._UZ(1,"link",1),p.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"i",6)(7,"p"),p._uU(8),p.qZA(),p.TgZ(9,"h6"),p._uU(10),p.qZA(),p.TgZ(11,"h6"),p._uU(12),p.qZA(),p.TgZ(13,"h6"),p._uU(14),p.qZA(),p.TgZ(15,"h6"),p._uU(16),p.qZA(),p.TgZ(17,"h6"),p._uU(18),p.qZA(),p.TgZ(19,"h6"),p._uU(20),p.qZA(),p.TgZ(21,"h6"),p._uU(22),p.qZA()()()()()()()),2&n){const t=e.$implicit;p.xp6(8),p.Oqu(t.id),p.xp6(2),p.hij("State : ",t.State,""),p.xp6(2),p.hij("Battery : ",t.Battery,""),p.xp6(2),p.hij("Direction : ",t.Direction,""),p.xp6(2),p.hij("Obstacle : ",t.Obstacle,""),p.xp6(2),p.hij("Angle : ",t.Angle,""),p.xp6(2),p.hij("Moter : ",t.Moter,""),p.xp6(2),p.hij("Speed : ",t.Speed,"")}}let qU=(()=>{class n{constructor(t){this.Register=t,this.all_Chairs=[]}ngOnInit(){$U(this.Register.getAll()).pipe((0,pt.U)(t=>t.map(r=>Object.assign({id:r.id},r.data())))).subscribe(t=>{this.all_Chairs=t})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xM))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["href","//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css","rel","stylesheet"],[1,"container","bootstrap","snippets","bootdey"],[1,"row","margin-bottom-10"],[1,"col-md-4","col-sm-12"],[1,"servive-block","servive-block-dark-blue"],[1,"icon-2x","color-light","fa","fa-wheelchair"]],template:function(t,r){1&t&&p.YNc(0,zU,23,8,"div",0),2&t&&p.Q6J("ngForOf",r.all_Chairs)},directives:[xn],styles:["i.icon-2x[_ngcontent-%COMP%]{font-size:30px}.color-light[_ngcontent-%COMP%]{color:#fff}.servive-block[_ngcontent-%COMP%]{padding:20px 30px;text-align:center;margin-bottom:20px}.servive-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .servive-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.servive-block[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.servive-block-light[_ngcontent-%COMP%], .servive-block-default[_ngcontent-%COMP%]{background:#fafafa;border:solid 1px #eee}.servive-block-default[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px #eee}.servive-block-light[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .servive-block-light[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .servive-block-default[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .servive-block-default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#555}.servive-block-u[_ngcontent-%COMP%]{background:#72c02c}.servive-block-blue[_ngcontent-%COMP%]{background:#3498db}.servive-block-red[_ngcontent-%COMP%]{background:#e74c3c}.servive-block-sea[_ngcontent-%COMP%]{background:#1abc9c}.servive-block-grey[_ngcontent-%COMP%]{background:#95a5a6}.servive-block-yellow[_ngcontent-%COMP%]{background:#f1c40f}.servive-block-orange[_ngcontent-%COMP%]{background:#e67e22}.servive-block-green[_ngcontent-%COMP%]{background:#2ecc71}.servive-block-purple[_ngcontent-%COMP%]{background:#9b6bcc}.servive-block-aqua[_ngcontent-%COMP%]{background:#27d7e7}.servive-block-brown[_ngcontent-%COMP%]{background:#9c8061}.servive-block-dark-blue[_ngcontent-%COMP%]{background:#4765a0}.servive-block-light-green[_ngcontent-%COMP%]{background:#79d5b3}.servive-block-dark[_ngcontent-%COMP%]{background:#555}.servive-block-light[_ngcontent-%COMP%]{background:#ecf0f1}"]}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w1=function(){return{exact:!0}},ZU=function(){return["/main/dashboard"]},KU=function(){return["/main/register"]};let I1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-main-page"]],decls:16,vars:8,consts:[[1,"container"],[1,"row","text-center"],[1,"col-xs-12","col-sm-12","col-md-12","col-sm-offset-1","col-md-offset-2"],[1,"nav","nav-tabs"],["role","presentation","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"btn","btn-primary","mx-2",3,"routerLink"],[1,"row"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),p._uU(6,"go to dashboard"),p.qZA()(),p.TgZ(7,"li",4)(8,"a",5),p._uU(9,"register"),p.qZA()()()()(),p.TgZ(10,"div",6)(11,"div",2),p._UZ(12,"router-outlet"),p.qZA()(),p._UZ(13,"br")(14,"br")(15,"br"),p.qZA()),2&t&&(p.xp6(4),p.Q6J("routerLinkActiveOptions",p.DdM(4,w1)),p.xp6(1),p.Q6J("routerLink",p.DdM(5,ZU)),p.xp6(2),p.Q6J("routerLinkActiveOptions",p.DdM(6,w1)),p.xp6(1),p.Q6J("routerLink",p.DdM(7,KU)))},directives:[jb,Cf,ff],styles:[""]}),n})();const YU=[{path:"main",component:I1,children:[{path:"dashboard",component:qU},{path:"regiser",component:xM},{path:"",redirectTo:"main",pathMatch:"full"}]},{path:"",component:I1}];let QU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[dE.forRoot(YU)],dE]}),n})(),JU=(()=>{class n{constructor(){this.title="maha"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"app-register")},directives:[xM],styles:[""]}),n})();function RM(){return(0,rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,En.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function eB(n,e){return n===e}var ia=F(2011),tB=(F(5881),F(3942));function NM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ee("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function D1(){if("undefined"==typeof Uint8Array)throw new Ee("unimplemented","Uint8Arrays are not available in this environment.")}function b1(){if(!function jk(){return"undefined"!=typeof atob}())throw new Ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Bv{constructor(e){this._delegate=e}static fromBase64String(e){return b1(),new Bv(ra.fromBase64String(e))}static fromUint8Array(e){return D1(),new Bv(ra.fromUint8Array(e))}toBase64(){return b1(),this._delegate.toBase64()}toUint8Array(){return D1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OM(n){return function iB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sB{enableIndexedDbPersistence(e,t){return function UV(n,e){ZP(n=Ht(n,bn));const t=Xn(n),r=n._freezeSettings(),o=new iM;return qP(t,o,new xP(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function BV(n){ZP(n=Ht(n,bn));const e=Xn(n),t=n._freezeSettings(),r=new iM;return qP(e,r,new EV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jV(n){if(n._initialized&&!n._terminated)throw new Ee(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(t=(0,W.Z)(function*(r){if(!co.vt())return Promise.resolve();const o=r+"main";yield co.delete(o)}),function(r){return t.apply(this,arguments)})(YA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class C1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof su||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function OV(n,e,t,r={}){var o;const u=(n=Ht(n,Pv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&rv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Lr.MOCK_USER;else{d=(0,ze.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ee(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Lr(v)}n._authCredentials=new Pk(new mN(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function HV(n){return function CV(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield PP(n),t=yield kP(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.fu.delete(0),Nv(o)}(t)}))}(Xn(n=Ht(n,bn)))}(this._delegate)}disableNetwork(){return function GV(n){return function TV(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield PP(n),t=yield kP(n);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(o){const u=$e(o);u.fu.add(0),yield eg(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Xn(n=Ht(n,bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function $V(n){return function(e){const t=new wr;return e.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function uV(n,e){return $S.apply(this,arguments)}(yield dM(e),t)})),t.promise}(Xn(n=Ht(n,bn)))}(this._delegate)}onSnapshotsInSync(e){return function wU(n,e){return function MV(n,e){const t=new xD(e);return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield ag(n),o=t,$e(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return r=yield ag(n),o=t,void $e(r).Eu.delete(o);var r,o}))}}(Xn(n=Ht(n,bn)),gM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lg(this,pM(this._delegate,e))}catch(t){throw pi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ms(this,kv(this._delegate,e))}catch(t){throw pi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gi(this,function PV(n,e){if(n=Ht(n,Pv),fM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kr(n,null,(t=e,new au(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw pi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function DU(n,e){return function xV(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const r=yield(o=n,RD(o).then(u=>u.datastore));var o;new DV(n.asyncQueue,r,e,t).run()})),t.promise}(Xn(n=Ht(n,bn)),t=>e(new IU(n,t)))}(this._delegate,t=>e(new T1(this,t)))}batch(){return Xn(this._delegate),new A1(new d1(this._delegate,e=>ug(this._delegate,e)))}loadBundle(e){return function WV(n,e){const t=Xn(n=Ht(n,bn)),r=new FV;return function RV(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,D){if(v instanceof Uint8Array)return RP(v,D);if(v instanceof ArrayBuffer)return RP(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new wV(v,d);var v}(t,Rv(e));n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function vV(n,e,t){const r=$e(n);var o;(o=(0,W.Z)(function*(u,d,g){try{const v=yield d.getMetadata();if(yield function(B,G){const te=$e(B),Se=Dr(G.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Ze=>te._s.getBundleMetadata(Ze,G.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(Se)>=0)}(u.localStore,v))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(B=v).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);g._updateProgress(EP(v));const D=new JL(v,u.localStore,d.M);let A=yield d.da();for(;A;){const B=yield D.ku(A);B&&g._updateProgress(B),A=yield d.da()}const S=yield D.complete();return yield uu(u,S.Fu,void 0),yield function(B,G){const te=$e(B);return te.persistence.runTransaction("Save bundle","readwrite",Se=>te._s.saveBundleMetadata(Se,G))}(u.localStore,v),g._completeWith(S.progress),Promise.resolve(S.Ou)}catch(v){return rv("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var B}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield dM(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zV(n,e){return function NV(n,e){return n.asyncQueue.enqueue((0,W.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield cM(n),e)}))}(Xn(n=Ht(n,bn)),e).then(t=>t?new Kr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gi(this,t):null)}}class jD extends wM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bv(new ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ms.forKey(t,this.firestore,null)}}class T1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}get(e){const t=dh(e);return this._delegate.get(t).then(r=>new jv(this._firestore,new cu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=dh(e);return r?(NM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dh(e);return this._delegate.delete(t),this}}class A1{constructor(e){this._delegate=e}set(e,t,r){const o=dh(e);return r?(NM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ch{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $v(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ch.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new ch(e,new jD(e),t),o.set(t,u)),u}}ch.INSTANCES=new WeakMap;class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ms(t,new yn(t._delegate,r,new Fe(e)))}static forKey(e,t,r){return new Ms(t,new yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new lg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lg(this.firestore,pM(this._delegate,e))}catch(t){throw pi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof yn&&GP(this._delegate,e)}set(e,t){t=NM("DocumentReference.set",t);try{return t?IM(this._delegate,e,t):IM(this._delegate,e)}catch(r){throw pi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DM(this._delegate,e):DM(this._delegate,e,t,...r)}catch(o){throw pi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function vU(n){return ug(Ht(n.firestore,bn),[new gv(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=S1(e),r=M1(e,o=>new jv(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return bM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function pU(n){n=Ht(n,yn);const e=Ht(n.firestore,bn),t=Xn(e),r=new lh(e);return function AV(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,u,d){try{const g=yield function(v,D){const A=$e(v);return A.persistence.runTransaction("read document","readonly",S=>A.ci.Ls(S,D))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Ee(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=rg(g,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield cM(n),e,t);var r})),t.promise}(t,n._key).then(o=>new cu(e,r,n._key,o,new uh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function gU(n){n=Ht(n,yn);const e=Ht(n.firestore,bn);return FP(Xn(e),n._key,{source:"server"}).then(t=>CM(e,n,t))}(this._delegate):function fU(n){n=Ht(n,yn);const e=Ht(n.firestore,bn);return FP(Xn(e),n._key).then(t=>CM(e,n,t))}(this._delegate),t.then(r=>new jv(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?ch.getInstance(this.firestore,e):null))}}function pi(n,e,t){return n.message=n.message.replace(e,t),n}function S1(n){for(const e of n)if("object"==typeof e&&!OM(e))return e;return{}}function M1(n,e){var t,r;let o;return o=OM(n[0])?n[0]:OM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class jv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ms(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return n1(this._delegate,e._delegate)}}class $v extends jv{data(e){const t=this._delegate.data(e);return function Nk(n,e){n||tt()}(void 0!==t),t}}class gi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}where(e,t,r){try{return new gi(this.firestore,Hl(this._delegate,function rU(n,e,t){const r=e,o=VD("where",n);return new nU(o,r,t)}(e,t,r)))}catch(o){throw pi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gi(this.firestore,Hl(this._delegate,function sU(n,e="asc"){const t=e,r=VD("orderBy",n);return new iU(r,t)}(e,t)))}catch(r){throw pi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gi(this.firestore,Hl(this._delegate,function oU(n){return $P("limit",n),new i1("limit",n,"F")}(e)))}catch(t){throw pi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gi(this.firestore,Hl(this._delegate,function aU(n){return $P("limitToLast",n),new i1("limitToLast",n,"L")}(e)))}catch(t){throw pi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gi(this.firestore,Hl(this._delegate,function uU(...n){return new s1("startAt",n,!0)}(...e)))}catch(t){throw pi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gi(this.firestore,Hl(this._delegate,function lU(...n){return new s1("startAfter",n,!1)}(...e)))}catch(t){throw pi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gi(this.firestore,Hl(this._delegate,function cU(...n){return new o1("endBefore",n,!1)}(...e)))}catch(t){throw pi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gi(this.firestore,Hl(this._delegate,function dU(...n){return new o1("endAt",n,!0)}(...e)))}catch(t){throw pi(t,"endAt()","Query.endAt()")}}isEqual(e){return WP(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yU(n){n=Ht(n,Kr);const e=Ht(n.firestore,bn),t=Xn(e),r=new lh(e);return function SV(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(o,u,d){try{const g=yield bD(o,u,!0),v=new DP(u,g.li),D=v.Gu(g.documents),A=v.applyChanges(D,!1);d.resolve(A.snapshot)}catch(g){const v=rg(g,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield cM(n),e,t);var r})),t.promise}(t,n._query).then(o=>new $l(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function _U(n){n=Ht(n,Kr);const e=Ht(n.firestore,bn),t=Xn(e),r=new lh(e);return LP(t,n._query,{source:"server"}).then(o=>new $l(e,r,n,o))}(this._delegate):function mU(n){n=Ht(n,Kr);const e=Ht(n.firestore,bn),t=Xn(e),r=new lh(e);return r1(n._query),LP(t,n._query).then(o=>new $l(e,r,n,o))}(this._delegate),t.then(r=>new PM(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=S1(e),r=M1(e,o=>new PM(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return bM(this._delegate,t,r)}withConverter(e){return new gi(this.firestore,this._delegate.withConverter(e?ch.getInstance(this.firestore,e):null))}}class aB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $v(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $v(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $v(this._firestore,r))})}isEqual(e){return n1(this._delegate,e._delegate)}}class lg extends gi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ms(this.firestore,e):null}doc(e){try{return new Ms(this.firestore,void 0===e?kv(this._delegate):kv(this._delegate,e))}catch(t){throw pi(t,"doc()","CollectionReference.doc()")}}add(e){return function EU(n,e){const t=Ht(n.firestore,bn),r=kv(n),o=UD(n.converter,e);return ug(t,[kD(oh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ms(this.firestore,t))}isEqual(e){return GP(this._delegate,e._delegate)}withConverter(e){return new lg(this.firestore,this._delegate.withConverter(e?ch.getInstance(this.firestore,e):null))}}function dh(n){return Ht(n,yn)}class kM{constructor(...e){this._delegate=new lu(...e)}static documentId(){return new kM(Ir.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof lu&&this._delegate._internalPath.isEqual(e._internalPath)}}class hh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CU(){return new mM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hh(e)}static delete(){const e=function bU(){return new Fv("deleteField")}();return e._methodName="FieldValue.delete",new hh(e)}static arrayUnion(...e){const t=function TU(...n){return new YV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new hh(t)}static arrayRemove(...e){const t=function AU(...n){return new QV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new hh(t)}static increment(e){const t=function SU(n){return new JV("increment",n)}(e);return t._methodName="FieldValue.increment",new hh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uB={Firestore:C1,GeoPoint:OD,Timestamp:Ln,Blob:Bv,Transaction:T1,WriteBatch:A1,DocumentReference:Ms,DocumentSnapshot:jv,Query:gi,QueryDocumentSnapshot:$v,QuerySnapshot:PM,CollectionReference:lg,FieldPath:kM,FieldValue:hh,setLogLevel:function oB(n){!function Rk(n){Rl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cB(n){(function lB(n,e){n.INTERNAL.registerComponent(new Ki.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},uB)))})(n,(e,t)=>new C1(e,t,new sB)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(tB.Z);var dB=F(6451);class hB extends bi.x{constructor(e=1/0,t=1/0,r=Qf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)g=v;g&&r.splice(0,g+1)}}}var fB=F(3099);function x1(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,fB.B)({connector:()=>new hB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function R1(n,e){return(0,Zh.m)(e)?Pr(()=>n,e):Pr(()=>n)}var pB=F(127);const N1=new p.OlP("angularfire2.auth.use-emulator"),O1=new p.OlP("angularfire2.auth.settings"),P1=new p.OlP("angularfire2.auth.tenant-id"),k1=new p.OlP("angularfire2.auth.langugage-code"),F1=new p.OlP("angularfire2.auth.use-device-language"),L1=new p.OlP("angularfire.auth.persistence"),V1=(n,e,t,r,o,u,d,g)=>(0,ia.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[D,A]of Object.entries(d))v.settings[D]=A;return g&&v.setPersistence(g),v},[t,r,o,u,d,g]);let U1=(()=>{class n{constructor(t,r,o,u,d,g,v,D,A,S,B,G){const te=new bi.x,Se=et(void 0).pipe((0,El.Q)(d.outsideAngular),Pr(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,pt.U)(()=>(0,ia.on)(t,u,r)),(0,pt.U)(Ze=>V1(Ze,u,g,D,A,S,v,B)),x1({bufferSize:1,refCount:!1}));if(ca(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{Se.pipe(Ku()).subscribe();const Et=Se.pipe(Pr(bt=>bt.getRedirectResult().then(Vt=>Vt,()=>null)),di,x1({bufferSize:1,refCount:!1})),wt=Se.pipe(Pr(bt=>new Ei.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>bt.onAuthStateChanged(Jt=>Vt.next(Jt),Jt=>Vt.error(Jt),()=>Vt.complete()))})))),Pt=Se.pipe(Pr(bt=>new Ei.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>bt.onIdTokenChanged(Jt=>Vt.next(Jt),Jt=>Vt.error(Jt),()=>Vt.complete()))}))));this.authState=Et.pipe(R1(wt),(0,_d.R)(d.outsideAngular),(0,El.Q)(d.insideAngular)),this.user=Et.pipe(R1(Pt),(0,_d.R)(d.outsideAngular),(0,El.Q)(d.insideAngular)),this.idToken=this.user.pipe(Pr(bt=>bt?(0,hn.D)(bt.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Pr(bt=>bt?(0,hn.D)(bt.getIdTokenResult()):et(null))),this.credential=(0,dB.T)(Et,te,this.authState.pipe(Ys(bt=>!bt))).pipe((0,pt.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,_d.R)(d.outsideAngular),(0,El.Q)(d.insideAngular))}return(0,ia.pX)(this,Se,u,{spy:{apply:(Ze,Et,wt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&wt.then(Pt=>te.next(Pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ia.Dh),p.LFG(ia.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(wl),p.LFG(N1,8),p.LFG(O1,8),p.LFG(P1,8),p.LFG(k1,8),p.LFG(F1,8),p.LFG(L1,8),p.LFG(I_,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function B1(n,e){return function mB(n,e=$y){return new Ei.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function FM(n,e){return B1(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function $D(n,e){return FM(n,e).pipe(Qh(void 0),RM(),(0,pt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const v=o.find(A=>A.doc.ref.isEqual(d.ref)),D=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function j1(n,e,t){return $D(n,t).pipe(Bc((r,o)=>function _B(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return LM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return LM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function XU(n,e=zu.y){return n=null!=n?n:eB,(0,rr.e)((t,r)=>{let o,u=!0;t.subscribe((0,En.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,pt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function LM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function $1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class H1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$D(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Qh(void 0),RM(),Ys(([r,o])=>o.length>0||!r),(0,pt.U)(([r,o])=>o),di)}auditTrail(e){return this.stateChanges(e).pipe(Bc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$1(e);return j1(this.query,t,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return FM(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),di)}get(e){return(0,hn.D)(this.query.get(e)).pipe(di)}add(e){return this.ref.add(e)}doc(e){return new G1(this.ref.doc(e),this.afs)}}class G1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=q1(r,t);return new H1(o,u,this.afs)}snapshotChanges(){return function yB(n,e){return B1(n,e).pipe(Qh(void 0),RM(),(0,pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(di)}}class EB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$D(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ys(t=>t.length>0),di):$D(this.query,this.afs.schedulers.outsideAngular).pipe(di)}auditTrail(e){return this.stateChanges(e).pipe(Bc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$1(e);return j1(this.query,t,this.afs.schedulers.outsideAngular).pipe(di)}valueChanges(e={}){return FM(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),di)}get(e){return(0,hn.D)(this.query.get(e)).pipe(di)}}const W1=new p.OlP("angularfire2.enableFirestorePersistence"),z1=new p.OlP("angularfire2.firestore.persistenceSettings"),wB=new p.OlP("angularfire2.firestore.settings"),IB=new p.OlP("angularfire2.firestore.use-emulator");function q1(n,e=(t=>t)){return{query:e(n),ref:n}}let DB=(()=>{class n{constructor(t,r,o,u,d,g,v,D,A,S,B,G,te,Se,Ze,Et,wt){this.schedulers=v;const Pt=(0,ia.on)(t,g,r),bt=A;S&&V1(Pt,g,B,te,Se,Ze,G,Et),[this.firestore,this.persistenceEnabled$]=(0,ia.cc)(`${Pt.name}.firestore`,"AngularFirestore",Pt.name,()=>{const Vt=g.runOutsideAngular(()=>Pt.firestore());if(u&&Vt.settings(u),bt&&Vt.useEmulator(...bt),o&&!ca(d)){const Jt=()=>{try{return(0,hn.D)(Vt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Yr){return"undefined"!=typeof console&&console.warn(Yr),et(!1)}};return[Vt,g.runOutsideAngular(Jt)]}return[Vt,et(!1)]},[u,bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=q1(o,r),g=this.schedulers.ngZone.run(()=>u);return new H1(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new EB(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new G1(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ia.Dh),p.LFG(ia.xv,8),p.LFG(W1,8),p.LFG(wB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(wl),p.LFG(z1,8),p.LFG(IB,8),p.LFG(U1,8),p.LFG(N1,8),p.LFG(O1,8),p.LFG(P1,8),p.LFG(k1,8),p.LFG(F1,8),p.LFG(L1,8),p.LFG(I_,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bB=(()=>{class n{constructor(){pB.Z.registerVersion("angularfire",Jf.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:W1,useValue:!0},{provide:z1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[DB]}),n})();const Z1_firebase={projectId:"wheelchair-trials",appId:"1:85884534050:web:5905aea06d86e2e726397b",storageBucket:"wheelchair-trials.appspot.com",locationId:"us-central",apiKey:"AIzaSyA69PgNCmnXHKTumBLGNhR-U0MXeY2-hQw",authDomain:"wheelchair-trials.firebaseapp.com",messagingSenderId:"85884534050",measurementId:"G-4QZ0T8F470"};let CB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[JU]}),n.\u0275inj=p.cJS({providers:[],imports:[[ma,QU,Or,Vc,Yl,bB,sT(()=>Qw(Z1_firebase)),jU(()=>HU())]]}),n})();(0,p.G48)(),rc().bootstrapModule(CB).catch(n=>console.error(n))},127:(ut,Ie,F)=>{F.d(Ie,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.7.0","app-compat")},5881:(ut,Ie,F)=>{F.r(Ie);var p=F(5861),L=F(3942),O=F(573),ae=F(2090),_e=(F(9681),F(1877),F(4859));function le(){return window}function j(){return(j=(0,p.Z)(function*(M,N,k){var ee;const{BuildInfo:xe}=le();(0,O.ap)(N.sessionId,"AuthEvent did not contain a session ID");const Be=yield ve(N.sessionId),ct={};return(0,O.aq)()?ct.ibi=xe.packageName:(0,O.ar)()?ct.apn=xe.packageName:(0,O.as)(M,"operation-not-supported-in-this-environment"),xe.displayName&&(ct.appDisplayName=xe.displayName),ct.sessionId=Be,(0,O.at)(M,k,N.type,void 0,null!==(ee=N.eventId)&&void 0!==ee?ee:void 0,ct)})).apply(this,arguments)}function je(){return(je=(0,p.Z)(function*(M){const{BuildInfo:N}=le(),k={};(0,O.aq)()?k.iosBundleId=N.packageName:(0,O.ar)()?k.androidPackageName=N.packageName:(0,O.as)(M,"operation-not-supported-in-this-environment"),yield(0,O.au)(M,k)})).apply(this,arguments)}function Ce(){return(Ce=(0,p.Z)(function*(M,N,k){const{cordova:ee}=le();let xe=()=>{};try{yield new Promise((Be,ct)=>{let Ye=null;function dt(){var Nt;Be();const jn=null===(Nt=ee.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof jn&&jn(),"function"==typeof(null==k?void 0:k.close)&&k.close()}function tn(){Ye||(Ye=window.setTimeout(()=>{ct((0,O.av)(M,"redirect-cancelled-by-user"))},2e3))}function Bn(){"visible"===(null==document?void 0:document.visibilityState)&&tn()}N.addPassiveListener(dt),document.addEventListener("resume",tn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Bn,!1),xe=()=>{N.removePassiveListener(dt),document.removeEventListener("resume",tn,!1),document.removeEventListener("visibilitychange",Bn,!1),Ye&&window.clearTimeout(Ye)}})}finally{xe()}})).apply(this,arguments)}function ve(M){return He.apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(M){const N=Ve(M),k=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(k)).map(xe=>xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ve(M){if((0,O.ap)(/[0-9a-zA-Z]+/.test(M),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(M);const N=new ArrayBuffer(M.length),k=new Uint8Array(N);for(let ee=0;ee<M.length;ee++)k[ee]=M.charCodeAt(ee);return k}class me extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(N)),super.onEvent(N)}initialized(){var N=this;return(0,p.Z)(function*(){yield N.initPromise})()}}function K(M){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(M){const N=yield Y()._get(X(M));return N&&(yield Y()._remove(X(M))),N})).apply(this,arguments)}function J(){const M=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<20;k++){const ee=Math.floor(Math.random()*N.length);M.push(N.charAt(ee))}return M.join("")}function Y(){return(0,O.ax)(O.b)}function X(M){return(0,O.ay)("authEvent",M.config.apiKey,M.name)}function Te(M){if(!(null==M?void 0:M.includes("?")))return{};const[N,...k]=M.split("?");return(0,ae.zd)(k.join("?"))}function Ne(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function Lt(){var M;return(null===(M=null==self?void 0:self.location)||void 0===M?void 0:M.protocol)||null}function ln(M=(0,ae.z$)()){return!("file:"!==Lt()&&"ionic:"!==Lt()||!M.toLowerCase().match(/iphone|ipad|ipod|android/))}function Br(){try{const M=self.localStorage,N=O.aG();if(M)return M.setItem(N,"1"),M.removeItem(N),!function mi(M=(0,ae.z$)()){return function cr(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function er(M=(0,ae.z$)()){return/Edge\/\d+/.test(M)}(M)}()||(0,ae.hl)()}catch(M){return Jr()&&(0,ae.hl)()}return!1}function Jr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function dr(){return(function jt(){return"http:"===Lt()||"https:"===Lt()}()||(0,ae.ru)()||ln())&&!function Qr(){return(0,ae.b$)()||(0,ae.UG)()}()&&Br()&&!Jr()}function xs(){return ln()&&"undefined"!=typeof document}function Ar(){return(Ar=(0,p.Z)(function*(){return!!xs()&&new Promise(M=>{const N=setTimeout(()=>{M(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),M(!0)})})})).apply(this,arguments)}const Zt={LOCAL:"local",NONE:"none",SESSION:"session"},Un=O.aw,yi="persistence";function _n(M){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(M){yield M._initializationPromise;const N=Ct(),k=O.ay(yi,M.config.apiKey,M.name);N&&N.setItem(k,M._getPersistence())})).apply(this,arguments)}function Ct(){var M;try{return(null===(M=function Cn(){return"undefined"!=typeof window?window:null}())||void 0===M?void 0:M.sessionStorage)||null}catch(N){return null}}const it=O.aw;class Qe{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class Bt{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(N){var k=this;return(0,p.Z)(function*(){const ee=N._key();let xe=k.eventManagers.get(ee);return xe||(xe=new me(N),k.eventManagers.set(ee,xe),k.attachCallbackListeners(N,xe)),xe})()}_openPopup(N){(0,O.as)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,k,ee,xe){var Be=this;return(0,p.Z)(function*(){!function Q(M){var N,k,ee,xe,Be,ct,Ye,dt,tn,Bn;const Nt=le();(0,O.aw)("function"==typeof(null===(N=null==Nt?void 0:Nt.universalLinks)||void 0===N?void 0:N.subscribe),M,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(k=null==Nt?void 0:Nt.BuildInfo)||void 0===k?void 0:k.packageName),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(Be=null===(xe=null===(ee=null==Nt?void 0:Nt.cordova)||void 0===ee?void 0:ee.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===Be?void 0:Be.openUrl),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(dt=null===(Ye=null===(ct=null==Nt?void 0:Nt.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===dt?void 0:dt.isAvailable),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Bn=null===(tn=null==Nt?void 0:Nt.cordova)||void 0===tn?void 0:tn.InAppBrowser)||void 0===Bn?void 0:Bn.open),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const ct=yield Be._initialize(N);yield ct.initialized(),ct.resetRedirect(),(0,O.aB)(),yield Be._originValidation(N);const Ye=function ue(M,N,k=null){return{type:N,eventId:k,urlResponse:null,sessionId:J(),postBody:null,tenantId:M.tenantId,error:(0,O.av)(M,"no-auth-event")}}(N,ee,xe);yield function ke(M,N){return Y()._set(X(M),N)}(N,Ye);const dt=yield function $(M,N,k){return j.apply(this,arguments)}(N,Ye,k),tn=yield function be(M){const{cordova:N}=le();return new Promise(k=>{N.plugins.browsertab.isAvailable(ee=>{let xe=null;ee?N.plugins.browsertab.openUrl(M):xe=N.InAppBrowser.open(M,(0,O.ao)()?"_blank":"_system","location=yes"),k(xe)})})}(dt);return function Re(M,N,k){return Ce.apply(this,arguments)}(N,ct,tn)})()}_isIframeWebStorageSupported(N,k){throw new Error("Method not implemented.")}_originValidation(N){const k=N._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function Z(M){return je.apply(this,arguments)}(N)),this.originValidationPromises[k]}attachCallbackListeners(N,k){const{universalLinks:ee,handleOpenURL:xe,BuildInfo:Be}=le(),ct=setTimeout((0,p.Z)(function*(){yield K(N),k.onEvent(Ne())}),500),Ye=function(){var Bn=(0,p.Z)(function*(Nt){clearTimeout(ct);const jn=yield K(N);let ei=null;jn&&(null==Nt?void 0:Nt.url)&&(ei=function Ke(M,N){var k,ee;const xe=function ie(M){const N=Te(M),k=N.link?decodeURIComponent(N.link):void 0,ee=Te(k).link,xe=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return Te(xe).link||xe||ee||k||M}(N);if(xe.includes("/__/auth/callback")){const Be=Te(xe),ct=Be.firebaseError?function ce(M){try{return JSON.parse(M)}catch(N){return null}}(decodeURIComponent(Be.firebaseError)):null,Ye=null===(ee=null===(k=null==ct?void 0:ct.code)||void 0===k?void 0:k.split("auth/"))||void 0===ee?void 0:ee[1],dt=Ye?(0,O.av)(Ye):null;return dt?{type:M.type,eventId:M.eventId,tenantId:M.tenantId,error:dt,urlResponse:null,sessionId:null,postBody:null}:{type:M.type,eventId:M.eventId,tenantId:M.tenantId,sessionId:M.sessionId,urlResponse:xe,postBody:null}}return null}(jn,Nt.url)),k.onEvent(ei||Ne())});return function(jn){return Bn.apply(this,arguments)}}();void 0!==ee&&"function"==typeof ee.subscribe&&ee.subscribe(null,Ye);const dt=xe,tn=`${Be.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var Bn=(0,p.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(tn)&&Ye({url:Nt}),"function"==typeof dt)try{dt(Nt)}catch(jn){console.error(jn)}});return function(Nt){return Bn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(N){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,k,ee,xe){var Be=this;return(0,p.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(N,k,ee,xe)})()}_openRedirect(N,k,ee,xe){var Be=this;return(0,p.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(N,k,ee,xe)})()}_isIframeWebStorageSupported(N,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,k)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return xs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,p.Z)(function*(){if(N.underlyingResolver)return;const k=yield function ot(){return Ar.apply(this,arguments)}();N.underlyingResolver=k?N.cordovaResolver:N.browserResolver})()}}function Xr(M){return M.unwrap()}function Rt(M){return pn(M)}function pn(M){const{_tokenResponse:N}=M instanceof ae.ZR?M.customData:M;if(!N)return null;if(!(M instanceof ae.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return O.P.credentialFromResult(M);const k=N.providerId;if(!k||k===O.o.PASSWORD)return null;let ee;switch(k){case O.o.GOOGLE:ee=O.N;break;case O.o.FACEBOOK:ee=O.M;break;case O.o.GITHUB:ee=O.Q;break;case O.o.TWITTER:ee=O.V;break;default:const{oauthIdToken:xe,oauthAccessToken:Be,oauthTokenSecret:ct,pendingToken:Ye,nonce:dt}=N;return Be||ct||xe||Ye?Ye?k.startsWith("saml.")?O.aJ._create(k,Ye):O.I._fromParams({providerId:k,signInMethod:k,pendingToken:Ye,idToken:xe,accessToken:Be}):new O.T(k).credential({idToken:xe,accessToken:Be,rawNonce:dt}):null}return M instanceof ae.ZR?ee.credentialFromError(M):ee.credentialFromResult(M)}function Kt(M,N){return N.catch(k=>{throw k instanceof ae.ZR&&function _i(M,N){var k;const ee=null===(k=N.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===N.code)N.resolver=new kt(M,O.am(M,N));else if(ee){const xe=pn(N),Be=N;xe&&(Be.credential=xe,Be.tenantId=ee.tenantId||void 0,Be.email=ee.email||void 0,Be.phoneNumber=ee.phoneNumber||void 0)}}(M,k),k}).then(k=>{const xe=k.user;return{operationType:k.operationType,credential:Rt(k),additionalUserInfo:O.ak(k),user:Pe.getOrCreate(xe)}})}function at(M,N){return An.apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(M,N){const k=yield N;return{verificationId:k.verificationId,confirm:ee=>Kt(M,k.confirm(ee))}})).apply(this,arguments)}class kt{constructor(N,k){this.resolver=k,this.auth=function Ni(M){return M.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Kt(Xr(this.auth),this.resolver.resolveSignIn(N))}}class Pe{constructor(N){this._delegate=N,this.multiFactor=O.an(N)}static getOrCreate(N){return Pe.USER_MAP.has(N)||Pe.USER_MAP.set(N,new Pe(N)),Pe.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var k=this;return(0,p.Z)(function*(){return Kt(k.auth,O.Y(k._delegate,N))})()}linkWithPhoneNumber(N,k){var ee=this;return(0,p.Z)(function*(){return at(ee.auth,O.l(ee._delegate,N,k))})()}linkWithPopup(N){var k=this;return(0,p.Z)(function*(){return Kt(k.auth,O.d(k._delegate,N,Qe))})()}linkWithRedirect(N){var k=this;return(0,p.Z)(function*(){return yield _n(O.aC(k.auth)),O.g(k._delegate,N,Qe)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var k=this;return(0,p.Z)(function*(){return Kt(k.auth,O.Z(k._delegate,N))})()}reauthenticateWithPhoneNumber(N,k){return at(this.auth,O.r(this._delegate,N,k))}reauthenticateWithPopup(N){return Kt(this.auth,O.e(this._delegate,N,Qe))}reauthenticateWithRedirect(N){var k=this;return(0,p.Z)(function*(){return yield _n(O.aC(k.auth)),O.h(k._delegate,N,Qe)})()}sendEmailVerification(N){return O.aa(this._delegate,N)}unlink(N){var k=this;return(0,p.Z)(function*(){return yield O.aj(k._delegate,N),k})()}updateEmail(N){return O.af(this._delegate,N)}updatePassword(N){return O.ag(this._delegate,N)}updatePhoneNumber(N){return O.u(this._delegate,N)}updateProfile(N){return O.ae(this._delegate,N)}verifyBeforeUpdateEmail(N,k){return O.ab(this._delegate,N,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Pe.USER_MAP=new WeakMap;const de=O.aw;let We=(()=>{class M{constructor(k,ee){if(this.app=k,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:xe}=k.options;de(xe,"invalid-api-key",{appName:k.name}),de(xe,"invalid-api-key",{appName:k.name});const Be="undefined"!=typeof window?Qe:void 0;this._delegate=ee.initialize({options:{persistence:Dt(xe,k.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Pe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,ee){O.E(this._delegate,k,ee)}applyActionCode(k){return O.a1(this._delegate,k)}checkActionCode(k){return O.a2(this._delegate,k)}confirmPasswordReset(k,ee){return O.a0(this._delegate,k,ee)}createUserWithEmailAndPassword(k,ee){var xe=this;return(0,p.Z)(function*(){return Kt(xe._delegate,O.a4(xe._delegate,k,ee))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return O.a9(this._delegate,k)}isSignInWithEmailLink(k){return O.a7(this._delegate,k)}getRedirectResult(){var k=this;return(0,p.Z)(function*(){de(dr(),k._delegate,"operation-not-supported-in-this-environment");const ee=yield O.j(k._delegate,Qe);return ee?Kt(k._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function qt(M,N){(0,O.aC)(M)._logFramework(N)}(this._delegate,k)}onAuthStateChanged(k,ee,xe){const{next:Be,error:ct,complete:Ye}=nt(k,ee,xe);return this._delegate.onAuthStateChanged(Be,ct,Ye)}onIdTokenChanged(k,ee,xe){const{next:Be,error:ct,complete:Ye}=nt(k,ee,xe);return this._delegate.onIdTokenChanged(Be,ct,Ye)}sendSignInLinkToEmail(k,ee){return O.a6(this._delegate,k,ee)}sendPasswordResetEmail(k,ee){return O.$(this._delegate,k,ee||void 0)}setPersistence(k){var ee=this;return(0,p.Z)(function*(){let xe;switch(function Tn(M,N){Un(Object.values(Zt).includes(N),M,"invalid-persistence-type"),(0,ae.b$)()?Un(N!==Zt.SESSION,M,"unsupported-persistence-type"):(0,ae.UG)()?Un(N===Zt.NONE,M,"unsupported-persistence-type"):Jr()?Un(N===Zt.NONE||N===Zt.LOCAL&&(0,ae.hl)(),M,"unsupported-persistence-type"):Un(N===Zt.NONE||Br(),M,"unsupported-persistence-type")}(ee._delegate,k),k){case Zt.SESSION:xe=O.a;break;case Zt.LOCAL:xe=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case Zt.NONE:xe=O.K;break;default:return O.as("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(xe)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return Kt(this._delegate,O.W(this._delegate))}signInWithCredential(k){return Kt(this._delegate,O.X(this._delegate,k))}signInWithCustomToken(k){return Kt(this._delegate,O._(this._delegate,k))}signInWithEmailAndPassword(k,ee){return Kt(this._delegate,O.a5(this._delegate,k,ee))}signInWithEmailLink(k,ee){return Kt(this._delegate,O.a8(this._delegate,k,ee))}signInWithPhoneNumber(k,ee){return at(this._delegate,O.s(this._delegate,k,ee))}signInWithPopup(k){var ee=this;return(0,p.Z)(function*(){return de(dr(),ee._delegate,"operation-not-supported-in-this-environment"),Kt(ee._delegate,O.c(ee._delegate,k,Qe))})()}signInWithRedirect(k){var ee=this;return(0,p.Z)(function*(){return de(dr(),ee._delegate,"operation-not-supported-in-this-environment"),yield _n(ee._delegate),O.f(ee._delegate,k,Qe)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return O.a3(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return M.Persistence=Zt,M})();function nt(M,N,k){let ee=M;"function"!=typeof M&&({next:ee,error:N,complete:k}=M);const xe=ee;return{next:ct=>xe(ct&&Pe.getOrCreate(ct)),error:N,complete:k}}function Dt(M,N){const k=function Rs(M,N){const k=Ct();if(!k)return[];const ee=O.ay(yi,M,N);switch(k.getItem(ee)){case Zt.NONE:return[O.K];case Zt.LOCAL:return[O.i,O.a];case Zt.SESSION:return[O.a];default:return[]}}(M,N);if("undefined"!=typeof self&&!k.includes(O.i)&&k.push(O.i),"undefined"!=typeof window)for(const ee of[O.b,O.a])k.includes(ee)||k.push(ee);return k.includes(O.K)||k.push(O.K),k}class It{constructor(){this.providerId="phone",this._delegate=new O.P(Xr(L.Z.auth()))}static credential(N,k){return O.P.credential(N,k)}verifyPhoneNumber(N,k){return this._delegate.verifyPhoneNumber(N,k)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=O.P.PROVIDER_ID;const U=O.aw;class P{constructor(N,k,ee=L.Z.app()){var xe;U(null===(xe=ee.options)||void 0===xe?void 0:xe.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new O.R(N,k,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function re(M){M.INTERNAL.registerComponent(new _e.wA("auth-compat",N=>{const k=N.getProvider("app-compat").getImmediate(),ee=N.getProvider("auth");return new We(k,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:It,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:P,TwitterAuthProvider:O.V,Auth:We,AuthCredential:O.G,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M.registerVersion("@firebase/auth-compat","0.2.12")}(L.Z)},8306:(ut,Ie,F)=>{F.d(Ie,{y:()=>$});var p=F(2961),L=F(727),O=F(8822),ae=F(4671);var _e=F(2416),le=F(576),De=F(2806);let $=(()=>{class be{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Q=new be;return Q.source=this,Q.operator=Ce,Q}subscribe(Ce,Q,ve){const He=function je(be){return be&&be instanceof p.Lv||function Z(be){return be&&(0,le.m)(be.next)&&(0,le.m)(be.error)&&(0,le.m)(be.complete)}(be)&&(0,L.Nn)(be)}(Ce)?Ce:new p.Hp(Ce,Q,ve);return(0,De.x)(()=>{const{operator:Ve,source:we}=this;He.add(Ve?Ve.call(He,we):we?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Q){Ce.error(Q)}}forEach(Ce,Q){return new(Q=j(Q))((ve,He)=>{const Ve=new p.Hp({next:we=>{try{Ce(we)}catch(me){He(me),Ve.unsubscribe()}},error:He,complete:ve});this.subscribe(Ve)})}_subscribe(Ce){var Q;return null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(Ce)}[O.L](){return this}pipe(...Ce){return function ye(be){return 0===be.length?ae.y:1===be.length?be[0]:function(Ce){return be.reduce((Q,ve)=>ve(Q),Ce)}}(Ce)(this)}toPromise(Ce){return new(Ce=j(Ce))((Q,ve)=>{let He;this.subscribe(Ve=>He=Ve,Ve=>ve(Ve),()=>Q(He))})}}return be.create=Re=>new be(Re),be})();function j(be){var Re;return null!==(Re=null!=be?be:_e.v.Promise)&&void 0!==Re?Re:Promise}},7579:(ut,Ie,F)=>{F.d(Ie,{x:()=>_e});var p=F(8306),L=F(727);const ae=(0,F(3888).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(8737),ye=F(2806);let _e=(()=>{class De extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new le(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:je,observers:be}=this;return Z||je?L.Lc:(this.currentObservers=null,be.push(j),new L.w0(()=>{this.currentObservers=null,(0,ge.P)(be,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:je,isStopped:be}=this;Z?j.error(je):be&&j.complete()}asObservable(){const j=new p.y;return j.source=this,j}}return De.create=($,j)=>new le($,j),De})();class le extends _e{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,$)}error($){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==Z?Z:L.Lc}}},2961:(ut,Ie,F)=>{F.d(Ie,{Hp:()=>Ce,Lv:()=>Z});var p=F(576),L=F(727),O=F(2416),ae=F(7849);function ge(){}const ye=De("C",void 0,void 0);function De(we,me,ue){return{kind:we,value:me,error:ue}}var $=F(3410),j=F(2806);class Z extends L.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,L.Nn)(me)&&me.add(this)):this.destination=Ve}static create(me,ue,ke){return new Ce(me,ue,ke)}next(me){this.isStopped?He(function le(we){return De("N",we,void 0)}(me),this):this._next(me)}error(me){this.isStopped?He(function _e(we){return De("E",void 0,we)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?He(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function be(we,me){return je.call(we,me)}class Re{constructor(me){this.partialObserver=me}next(me){const{partialObserver:ue}=this;if(ue.next)try{ue.next(me)}catch(ke){Q(ke)}}error(me){const{partialObserver:ue}=this;if(ue.error)try{ue.error(me)}catch(ke){Q(ke)}else Q(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(ue){Q(ue)}}}class Ce extends Z{constructor(me,ue,ke){let K;if(super(),(0,p.m)(me)||!me)K={next:null!=me?me:void 0,error:null!=ue?ue:void 0,complete:null!=ke?ke:void 0};else{let Ue;this&&O.v.useDeprecatedNextContext?(Ue=Object.create(me),Ue.unsubscribe=()=>this.unsubscribe(),K={next:me.next&&be(me.next,Ue),error:me.error&&be(me.error,Ue),complete:me.complete&&be(me.complete,Ue)}):K=me}this.destination=new Re(K)}}function Q(we){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(we):(0,ae.h)(we)}function He(we,me){const{onStoppedNotification:ue}=O.v;ue&&$.z.setTimeout(()=>ue(we,me))}const Ve={closed:!0,next:ge,error:function ve(we){throw we},complete:ge}},727:(ut,Ie,F)=>{F.d(Ie,{Lc:()=>ye,w0:()=>ge,Nn:()=>_e});var p=F(576);const O=(0,F(3888).d)(De=>function(j){De(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,je)=>`${je+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=F(8737);class ge{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const be of j)be.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,p.m)(Z))try{Z()}catch(be){$=be instanceof O?be.errors:[be]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const be of je)try{le(be)}catch(Re){$=null!=$?$:[],Re instanceof O?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new O($)}}add($){var j;if($&&$!==this)if(this.closed)le($);else{if($ instanceof ge){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,ae.P)(j,$),$ instanceof ge&&$._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const ye=ge.EMPTY;function _e(De){return De instanceof ge||De&&"closed"in De&&(0,p.m)(De.remove)&&(0,p.m)(De.add)&&(0,p.m)(De.unsubscribe)}function le(De){(0,p.m)(De)?De():De.unsubscribe()}},2416:(ut,Ie,F)=>{F.d(Ie,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ie,F)=>{F.d(Ie,{E:()=>L});const L=new(F(8306).y)(ge=>ge.complete())},8996:(ut,Ie,F)=>{F.d(Ie,{D:()=>me});var p=F(8421),L=F(5363),O=F(9468),ye=F(8306),le=F(2202),De=F(576),$=F(9672);function Z(ue,ke){if(!ue)throw new Error("Iterable cannot be null");return new ye.y(K=>{(0,$.f)(K,ke,()=>{const Ue=ue[Symbol.asyncIterator]();(0,$.f)(K,ke,()=>{Ue.next().then(Ke=>{Ke.done?K.complete():K.next(Ke.value)})},0,!0)})})}var je=F(3670),be=F(8239),Re=F(1144),Ce=F(6495),Q=F(2206),ve=F(4532),He=F(3260);function me(ue,ke){return ke?function we(ue,ke){if(null!=ue){if((0,je.c)(ue))return function ae(ue,ke){return(0,p.Xf)(ue).pipe((0,O.R)(ke),(0,L.Q)(ke))}(ue,ke);if((0,Re.z)(ue))return function _e(ue,ke){return new ye.y(K=>{let Ue=0;return ke.schedule(function(){Ue===ue.length?K.complete():(K.next(ue[Ue++]),K.closed||this.schedule())})})}(ue,ke);if((0,be.t)(ue))return function ge(ue,ke){return(0,p.Xf)(ue).pipe((0,O.R)(ke),(0,L.Q)(ke))}(ue,ke);if((0,Q.D)(ue))return Z(ue,ke);if((0,Ce.T)(ue))return function j(ue,ke){return new ye.y(K=>{let Ue;return(0,$.f)(K,ke,()=>{Ue=ue[le.h](),(0,$.f)(K,ke,()=>{let Ke,J;try{({value:Ke,done:J}=Ue.next())}catch(Y){return void K.error(Y)}J?K.complete():K.next(Ke)},0,!0)}),()=>(0,De.m)(null==Ue?void 0:Ue.return)&&Ue.return()})}(ue,ke);if((0,He.L)(ue))return function Ve(ue,ke){return Z((0,He.Q)(ue),ke)}(ue,ke)}throw(0,ve.z)(ue)}(ue,ke):(0,p.Xf)(ue)}},8421:(ut,Ie,F)=>{F.d(Ie,{Xf:()=>je});var p=F(655),L=F(1144),O=F(8239),ae=F(8306),ge=F(3670),ye=F(2206),_e=F(4532),le=F(6495),De=F(3260),$=F(576),j=F(7849),Z=F(8822);function je(we){if(we instanceof ae.y)return we;if(null!=we){if((0,ge.c)(we))return function be(we){return new ae.y(me=>{const ue=we[Z.L]();if((0,$.m)(ue.subscribe))return ue.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,L.z)(we))return function Re(we){return new ae.y(me=>{for(let ue=0;ue<we.length&&!me.closed;ue++)me.next(we[ue]);me.complete()})}(we);if((0,O.t)(we))return function Ce(we){return new ae.y(me=>{we.then(ue=>{me.closed||(me.next(ue),me.complete())},ue=>me.error(ue)).then(null,j.h)})}(we);if((0,ye.D)(we))return ve(we);if((0,le.T)(we))return function Q(we){return new ae.y(me=>{for(const ue of we)if(me.next(ue),me.closed)return;me.complete()})}(we);if((0,De.L)(we))return function He(we){return ve((0,De.Q)(we))}(we)}throw(0,_e.z)(we)}function ve(we){return new ae.y(me=>{(function Ve(we,me){var ue,ke,K,Ue;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ue=(0,p.KL)(we);!(ke=yield ue.next()).done;)if(me.next(ke.value),me.closed)return}catch(Ke){K={error:Ke}}finally{try{ke&&!ke.done&&(Ue=ue.return)&&(yield Ue.call(ue))}finally{if(K)throw K.error}}me.complete()})})(we,me).catch(ue=>me.error(ue))})}},6451:(ut,Ie,F)=>{F.d(Ie,{T:()=>ye});var p=F(8189),L=F(8421),O=F(515),ae=F(7669),ge=F(8996);function ye(..._e){const le=(0,ae.yG)(_e),De=(0,ae._6)(_e,1/0),$=_e;return $.length?1===$.length?(0,L.Xf)($[0]):(0,p.J)(De)((0,ge.D)($,le)):O.E}},5403:(ut,Ie,F)=>{F.d(Ie,{x:()=>L});var p=F(2961);function L(ae,ge,ye,_e,le){return new O(ae,ge,ye,_e,le)}class O extends p.Lv{constructor(ge,ye,_e,le,De,$){super(ge),this.onFinalize=De,this.shouldUnsubscribe=$,this._next=ye?function(j){try{ye(j)}catch(Z){ge.error(Z)}}:super._next,this._error=le?function(j){try{le(j)}catch(Z){ge.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(j){ge.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(ut,Ie,F)=>{F.d(Ie,{U:()=>O});var p=F(4482),L=F(5403);function O(ae,ge){return(0,p.e)((ye,_e)=>{let le=0;ye.subscribe((0,L.x)(_e,De=>{_e.next(ae.call(ge,De,le++))}))})}},8189:(ut,Ie,F)=>{F.d(Ie,{J:()=>O});var p=F(5577),L=F(4671);function O(ae=1/0){return(0,p.z)(L.y,ae)}},5577:(ut,Ie,F)=>{F.d(Ie,{z:()=>le});var p=F(4004),L=F(8421),O=F(4482),ae=F(9672),ge=F(5403),_e=F(576);function le(De,$,j=1/0){return(0,_e.m)($)?le((Z,je)=>(0,p.U)((be,Re)=>$(Z,be,je,Re))((0,L.Xf)(De(Z,je))),j):("number"==typeof $&&(j=$),(0,O.e)((Z,je)=>function ye(De,$,j,Z,je,be,Re,Ce){const Q=[];let ve=0,He=0,Ve=!1;const we=()=>{Ve&&!Q.length&&!ve&&$.complete()},me=ke=>ve<Z?ue(ke):Q.push(ke),ue=ke=>{be&&$.next(ke),ve++;let K=!1;(0,L.Xf)(j(ke,He++)).subscribe((0,ge.x)($,Ue=>{null==je||je(Ue),be?me(Ue):$.next(Ue)},()=>{K=!0},void 0,()=>{if(K)try{for(ve--;Q.length&&ve<Z;){const Ue=Q.shift();Re?(0,ae.f)($,Re,()=>ue(Ue)):ue(Ue)}we()}catch(Ue){$.error(Ue)}}))};return De.subscribe((0,ge.x)($,me,()=>{Ve=!0,we()})),()=>{null==Ce||Ce()}}(Z,je,De,j)))}},5363:(ut,Ie,F)=>{F.d(Ie,{Q:()=>ae});var p=F(9672),L=F(4482),O=F(5403);function ae(ge,ye=0){return(0,L.e)((_e,le)=>{_e.subscribe((0,O.x)(le,De=>(0,p.f)(le,ge,()=>le.next(De),ye),()=>(0,p.f)(le,ge,()=>le.complete(),ye),De=>(0,p.f)(le,ge,()=>le.error(De),ye)))})}},3099:(ut,Ie,F)=>{F.d(Ie,{B:()=>ye});var p=F(8996),L=F(5698),O=F(7579),ae=F(2961),ge=F(4482);function ye(le={}){const{connector:De=(()=>new O.x),resetOnError:$=!0,resetOnComplete:j=!0,resetOnRefCountZero:Z=!0}=le;return je=>{let be=null,Re=null,Ce=null,Q=0,ve=!1,He=!1;const Ve=()=>{null==Re||Re.unsubscribe(),Re=null},we=()=>{Ve(),be=Ce=null,ve=He=!1},me=()=>{const ue=be;we(),null==ue||ue.unsubscribe()};return(0,ge.e)((ue,ke)=>{Q++,!He&&!ve&&Ve();const K=Ce=null!=Ce?Ce:De();ke.add(()=>{Q--,0===Q&&!He&&!ve&&(Re=_e(me,Z))}),K.subscribe(ke),be||(be=new ae.Hp({next:Ue=>K.next(Ue),error:Ue=>{He=!0,Ve(),Re=_e(we,$,Ue),K.error(Ue)},complete:()=>{ve=!0,Ve(),Re=_e(we,j),K.complete()}}),(0,p.D)(ue).subscribe(be))})(je)}}function _e(le,De,...$){return!0===De?(le(),null):!1===De?null:De(...$).pipe((0,L.q)(1)).subscribe(()=>le())}},9468:(ut,Ie,F)=>{F.d(Ie,{R:()=>L});var p=F(4482);function L(O,ae=0){return(0,p.e)((ge,ye)=>{ye.add(O.schedule(()=>ge.subscribe(ye),ae))})}},5698:(ut,Ie,F)=>{F.d(Ie,{q:()=>ae});var p=F(515),L=F(4482),O=F(5403);function ae(ge){return ge<=0?()=>p.E:(0,L.e)((ye,_e)=>{let le=0;ye.subscribe((0,O.x)(_e,De=>{++le<=ge&&(_e.next(De),ge<=le&&_e.complete())}))})}},3410:(ut,Ie,F)=>{F.d(Ie,{z:()=>p});const p={setTimeout(L,O,...ae){const{delegate:ge}=p;return(null==ge?void 0:ge.setTimeout)?ge.setTimeout(L,O,...ae):setTimeout(L,O,...ae)},clearTimeout(L){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(ut,Ie,F)=>{F.d(Ie,{h:()=>L});const L=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ie,F)=>{F.d(Ie,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ie,F)=>{F.d(Ie,{_6:()=>ye,jO:()=>ae,yG:()=>ge});var p=F(576);function O(_e){return _e[_e.length-1]}function ae(_e){return(0,p.m)(O(_e))?_e.pop():void 0}function ge(_e){return function L(_e){return _e&&(0,p.m)(_e.schedule)}(O(_e))?_e.pop():void 0}function ye(_e,le){return"number"==typeof O(_e)?_e.pop():le}},8737:(ut,Ie,F)=>{function p(L,O){if(L){const ae=L.indexOf(O);0<=ae&&L.splice(ae,1)}}F.d(Ie,{P:()=>p})},3888:(ut,Ie,F)=>{function p(L){const ae=L(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Ie,{d:()=>p})},2806:(ut,Ie,F)=>{F.d(Ie,{O:()=>ae,x:()=>O});var p=F(2416);let L=null;function O(ge){if(p.v.useDeprecatedSynchronousErrorHandling){const ye=!L;if(ye&&(L={errorThrown:!1,error:null}),ge(),ye){const{errorThrown:_e,error:le}=L;if(L=null,_e)throw le}}else ge()}function ae(ge){p.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=ge)}},9672:(ut,Ie,F)=>{function p(L,O,ae,ge=0,ye=!1){const _e=O.schedule(function(){ae(),ye?L.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(L.add(_e),!ye)return _e}F.d(Ie,{f:()=>p})},4671:(ut,Ie,F)=>{function p(L){return L}F.d(Ie,{y:()=>p})},1144:(ut,Ie,F)=>{F.d(Ie,{z:()=>p});const p=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(ut,Ie,F)=>{F.d(Ie,{D:()=>L});var p=F(576);function L(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ie,F)=>{function p(L){return"function"==typeof L}F.d(Ie,{m:()=>p})},3670:(ut,Ie,F)=>{F.d(Ie,{c:()=>O});var p=F(8822),L=F(576);function O(ae){return(0,L.m)(ae[p.L])}},6495:(ut,Ie,F)=>{F.d(Ie,{T:()=>O});var p=F(2202),L=F(576);function O(ae){return(0,L.m)(null==ae?void 0:ae[p.h])}},8239:(ut,Ie,F)=>{F.d(Ie,{t:()=>L});var p=F(576);function L(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(ut,Ie,F)=>{F.d(Ie,{L:()=>ae,Q:()=>O});var p=F(655),L=F(576);function O(ge){return(0,p.FC)(this,arguments,function*(){const _e=ge.getReader();try{for(;;){const{value:le,done:De}=yield(0,p.qq)(_e.read());if(De)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{_e.releaseLock()}})}function ae(ge){return(0,L.m)(null==ge?void 0:ge.getReader)}},4482:(ut,Ie,F)=>{F.d(Ie,{A:()=>L,e:()=>O});var p=F(576);function L(ae){return(0,p.m)(null==ae?void 0:ae.lift)}function O(ae){return ge=>{if(L(ge))return ge.lift(function(ye){try{return ae(ye,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ut,Ie,F)=>{F.d(Ie,{h:()=>O});var p=F(2416),L=F(3410);function O(ae){L.z.setTimeout(()=>{const{onUnhandledError:ge}=p.v;if(!ge)throw ae;ge(ae)})}},4532:(ut,Ie,F)=>{function p(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ie,{z:()=>p})},655:(ut,Ie,F)=>{function ae(J,Y){var X={};for(var ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&Y.indexOf(ce)<0&&(X[ce]=J[ce]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var ie=0;for(ce=Object.getOwnPropertySymbols(J);ie<ce.length;ie++)Y.indexOf(ce[ie])<0&&Object.prototype.propertyIsEnumerable.call(J,ce[ie])&&(X[ce[ie]]=J[ce[ie]])}return X}function le(J,Y,X,ce){return new(X||(X=Promise))(function(Te,ft){function Bt(qt){try{Ne(ce.next(qt))}catch(Tr){ft(Tr)}}function Gt(qt){try{Ne(ce.throw(qt))}catch(Tr){ft(Tr)}}function Ne(qt){qt.done?Te(qt.value):function ie(Te){return Te instanceof X?Te:new X(function(ft){ft(Te)})}(qt.value).then(Bt,Gt)}Ne((ce=ce.apply(J,Y||[])).next())})}function Q(J){return this instanceof Q?(this.v=J,this):new Q(J)}function ve(J,Y,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ce=X.apply(J,Y||[]),Te=[];return ie={},ft("next"),ft("throw"),ft("return"),ie[Symbol.asyncIterator]=function(){return this},ie;function ft(fn){ce[fn]&&(ie[fn]=function(Ut){return new Promise(function(Lt,jt){Te.push([fn,Ut,Lt,jt])>1||Bt(fn,Ut)})})}function Bt(fn,Ut){try{!function Gt(fn){fn.value instanceof Q?Promise.resolve(fn.value.v).then(Ne,qt):Tr(Te[0][2],fn)}(ce[fn](Ut))}catch(Lt){Tr(Te[0][3],Lt)}}function Ne(fn){Bt("next",fn)}function qt(fn){Bt("throw",fn)}function Tr(fn,Ut){fn(Ut),Te.shift(),Te.length&&Bt(Te[0][0],Te[0][1])}}function Ve(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,Y=J[Symbol.asyncIterator];return Y?Y.call(J):(J=function Z(J){var Y="function"==typeof Symbol&&Symbol.iterator,X=Y&&J[Y],ce=0;if(X)return X.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ce>=J.length&&(J=void 0),{value:J&&J[ce++],done:!J}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),X={},ce("next"),ce("throw"),ce("return"),X[Symbol.asyncIterator]=function(){return this},X);function ce(Te){X[Te]=J[Te]&&function(ft){return new Promise(function(Bt,Gt){!function ie(Te,ft,Bt,Gt){Promise.resolve(Gt).then(function(Ne){Te({value:Ne,done:Bt})},ft)}(Bt,Gt,(ft=J[Te](ft)).done,ft.value)})}}}F.d(Ie,{FC:()=>ve,KL:()=>Ve,_T:()=>ae,mG:()=>le,qq:()=>Q})},5e3:(ut,Ie,F)=>{F.d(Ie,{$8M:()=>ku,$Z:()=>UE,AFp:()=>E_,AaK:()=>le,CHM:()=>mg,CRH:()=>vr,CZH:()=>mp,CqO:()=>WE,DdM:()=>fT,EJc:()=>jT,EpF:()=>HE,F4k:()=>GE,FYo:()=>Yw,FiY:()=>Wi,G48:()=>SI,GfV:()=>Qw,Gpc:()=>j,JOm:()=>Ci,LFG:()=>Wn,LSH:()=>qh,Lbi:()=>fR,MAs:()=>Rf,NdJ:()=>sy,OlP:()=>an,Oqu:()=>cd,PXZ:()=>ZT,Q6J:()=>ad,QGY:()=>iy,Qsj:()=>sT,R0b:()=>Cs,RDi:()=>wh,Rgc:()=>op,SBq:()=>Ed,Sil:()=>D_,Suo:()=>sI,TTD:()=>ua,TgZ:()=>hl,VLi:()=>mt,X6Q:()=>AI,XFs:()=>ot,Xpm:()=>It,Y36:()=>kf,YKP:()=>lT,YNc:()=>ME,Yjl:()=>xe,Yz7:()=>Ut,ZZ4:()=>Ap,_Bn:()=>tT,_UZ:()=>BE,_Vd:()=>Yy,_c5:()=>ur,_uU:()=>dw,aQg:()=>H_,c2e:()=>pR,cJS:()=>jt,cg1:()=>Ay,dDg:()=>Ts,deG:()=>wc,dqk:()=>Rt,eFA:()=>Md,ekj:()=>ud,g9A:()=>wI,h0i:()=>wd,hGG:()=>Sp,hij:()=>dd,iGM:()=>iI,ifc:()=>Ct,ip1:()=>v_,kL8:()=>Cw,lG2:()=>ee,n5z:()=>Pu,oAB:()=>M,q4F:()=>oT,qLn:()=>rr,qOj:()=>$m,qZA:()=>ry,sBO:()=>xI,sIi:()=>rd,s_b:()=>n_,soG:()=>yp,tBr:()=>hs,tb:()=>UT,tp0:()=>Ii,uIk:()=>id,vHH:()=>Re,vpe:()=>ao,wAp:()=>qe,xp6:()=>fm,z2F:()=>xd,zSh:()=>Rm,zs3:()=>ws});var p=F(7579),L=F(727),O=F(8306),ae=F(6451),ge=F(3099);function ye(i){for(let s in i)if(i[s]===ye)return s;throw Error("Could not find renamed property on target object.")}function _e(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function De(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ye({__forward_ref__:ye});function j(i){return i.__forward_ref__=j,i.toString=function(){return le(this())},i}function Z(i){return je(i)?i():i}function je(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}class Re extends Error{constructor(s,a){super(function Ce(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function Q(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Q(i)}function me(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${ve(i)} found${a}`)}function Gt(i,s){null==i&&function Ne(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function ln(i){return Qr(i,Br)||Qr(i,dr)}function Qr(i,s){return i.hasOwnProperty(s)?i[s]:null}function mi(i){return i&&(i.hasOwnProperty(Jr)||i.hasOwnProperty(xs))?i[Jr]:null}const Br=ye({\u0275prov:ye}),Jr=ye({\u0275inj:ye}),dr=ye({ngInjectableDef:ye}),xs=ye({ngInjectorDef:ye});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Ar;function Zt(i){const s=Ar;return Ar=i,s}function Un(i,s,a){const l=ln(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ot.Optional?null:void 0!==s?s:void me(le(i),"Injector")}function Tn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),Ct=(()=>{return(i=Ct||(Ct={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ct;var i})();const it="undefined"!=typeof globalThis&&globalThis,Qe="undefined"!=typeof window&&window,Xr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt=it||"undefined"!=typeof global&&global||Qe||Xr,Kt={},at=[],An=ye({\u0275cmp:ye}),kt=ye({\u0275dir:ye}),Pe=ye({\u0275pipe:ye}),de=ye({\u0275mod:ye}),We=ye({\u0275fac:ye}),nt=ye({__NG_ELEMENT_ID__:ye});let Dt=0;function It(i){return Tn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ct.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,y=i.pipes;return l.id+=Dt++,l.inputs=k(i.inputs,a),l.outputs=k(i.outputs),h&&h.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(P):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(H):null,l})}function P(i){return Be(i)||function ct(i){return i[kt]||null}(i)}function H(i){return function Ye(i){return i[Pe]||null}(i)}const re={};function M(i){return Tn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(re[i.id]=i.type),s})}function k(i,s){if(null==i)return Kt;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const ee=It;function xe(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Be(i){return i[An]||null}function dt(i,s){const a=i[de]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function pr(i){return Array.isArray(i)&&"object"==typeof i[1]}function ti(i){return Array.isArray(i)&&!0===i[1]}function oa(i){return 0!=(8&i.flags)}function Zl(i){return 2==(2&i.flags)}function Os(i){return 1==(1&i.flags)}function ni(i){return null!==i.template}function Kl(i){return 0!=(512&i[2])}function ri(i,s){return i.hasOwnProperty(We)?i[We]:null}class cg{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ua(){return pu}function pu(i){return i.type.prototype.ngOnChanges&&(i.setInput=la),dg}function dg(){const i=po(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Kt)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function la(i,s,a,l){const c=po(i)||function hg(i,s){return i[Yl]=s}(i,{previous:Kt,current:null}),h=c.current||(c.current={}),y=c.previous,E=this.declaredInputs[a],I=y[E];h[E]=new cg(I&&I.currentValue,s,y===Kt),i[l]=s}ua.ngInherit=!0;const Yl="__ngSimpleChanges__";function po(i){return i[Yl]||null}let yu;function wh(i){yu=i}function sn(i){return!!i.listen}const ha={createRenderer:(i,s)=>function da(){return void 0!==yu?yu:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function go(i,s){return nn(s[i])}function $n(i,s){return nn(s[i.index])}function vu(i,s){return i.data[s]}function gr(i,s){const a=s[i];return pr(a)?a:a[0]}function Ps(i){return 4==(4&i[2])}function mo(i){return 128==(128&i[2])}function ki(i,s){return null==s?null:i[s]}function as(i){i[18]=0}function ks(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:ac(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Iu(){return lt.bindingsEnabled}function pe(){return lt.lFrame.lView}function Mt(){return lt.lFrame.tView}function mg(i){return lt.lFrame.contextLView=i,i[8]}function on(){let i=Du();for(;null!==i&&64===i.type;)i=i.parent;return i}function Du(){return lt.lFrame.currentTNode}function ii(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function nc(){return lt.lFrame.isParent}function yo(){return lt.isInCheckNoChangesMode}function bu(i){lt.isInCheckNoChangesMode=i}function _o(){return lt.lFrame.bindingIndex++}function _g(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ic(s)}function ic(i){lt.lFrame.currentDirectiveIndex=i}function vg(){return lt.lFrame.currentQueryIndex}function sc(i){lt.lFrame.currentQueryIndex=i}function Eg(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function oc(i,s,a){if(a&ot.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&ot.Host||(c=Eg(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=lt.lFrame=Ls();return l.currentTNode=s,l.lView=i,!0}function Au(i){const s=Ls(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ls(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?ac(i):s}function ac(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function wg(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ig=wg;function ya(){const i=wg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function mr(){return lt.lFrame.selectedIndex}function Li(i){lt.lFrame.selectedIndex=i}function dn(){const i=lt.lFrame;return vu(i.tView,i.selectedIndex)}function _a(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:b,ngOnDestroy:T}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),b&&((i.viewHooks||(i.viewHooks=[])).push(a,b),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,b)),null!=T&&(i.destroyHooks||(i.destroyHooks=[])).push(a,T)}}function uc(i,s,a){bg(i,s,3,a)}function lc(i,s,a,l){(3&i[2])===a&&bg(i,s,a,l)}function cc(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bg(i,s,a,l){const h=null!=l?l:-1,y=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<h||-1==h)&&(Ch(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Ch(i,s,a,l){const c=a[l]<0,h=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class Su{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function vo(i,s,a){const l=sn(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const y=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,y):s.setAttributeNS(y,E,I)}else{const y=h,E=a[++c];hc(y)?l&&i.setProperty(s,y,E):l?i.setAttribute(s,y,E):s.setAttribute(y,E),c++}}return c}function Ah(i){return 3===i||4===i||6===i}function hc(i){return 64===i.charCodeAt(0)}function ls(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||fc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function fc(i,s,a,l,c){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function vn(i){return-1!==i}function Ui(i){return 32767&i}function En(i,s){let a=function cs(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let pt=!0;function xu(i){const s=pt;return pt=i,s}let Nu=0;function tr(i,s){const a=mc(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,nr(l.data,i),nr(s,null),nr(l.blueprint,null));const c=Us(i,s),h=i.injectorIndex;if(vn(c)){const y=Ui(c),E=En(c,s),I=E[1].data;for(let b=0;b<8;b++)s[h+b]=E[y+b]|I[y+b]}return s[h+8]=c,h}function nr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function mc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Us(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],y=h.type;if(l=2===y?h.declTNode:1===y?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function va(i,s,a){!function gc(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(nt)&&(l=a[nt]),null==l&&(l=a[nt]=Nu++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Sh(i,s,a){if(a&ot.Optional)return i;me(s,"NodeInjector")}function Bs(i,s,a,l){if(a&ot.Optional&&void 0===l&&(l=null),0==(a&(ot.Self|ot.Host))){const c=i[9],h=Zt(void 0);try{return c?c.get(s,l,a&ot.Optional):Un(s,l,a&ot.Optional)}finally{Zt(h)}}return Sh(l,s,a)}function wi(i,s,a,l=ot.Default,c){if(null!==i){const h=function Mh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(nt)?i[nt]:void 0;return"number"==typeof s?s>=0?255&s:Hn:s}(a);if("function"==typeof h){if(!oc(s,i,l))return l&ot.Host?Sh(c,a,l):Bs(s,a,l,c);try{const y=h(l);if(null!=y||l&ot.Optional)return y;me(a)}finally{Ig()}}else if("number"==typeof h){let y=null,E=mc(i,s),I=-1,b=l&ot.Host?s[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(I=-1===E?Us(i,s):s[E+8],-1!==I&&wa(l,!1)?(y=s[1],E=Ui(I),s=En(I,s)):E=-1);-1!==E;){const T=s[1];if(vc(h,E,T.data)){const R=js(E,s,a,y,l,b);if(R!==_c)return R}I=s[E+8],-1!==I&&wa(l,s[1].data[E+8]===b)&&vc(h,E,s)?(y=T,E=Ui(I),s=En(I,s)):E=-1}}}return Bs(s,a,l,c)}const _c={};function Hn(){return new $s(on(),pe())}function js(i,s,a,l,c,h){const y=s[1],E=y.data[i+8],T=Ea(E,y,a,null==l?Zl(E)&&pt:l!=y&&0!=(3&E.type),c&ot.Host&&h===E);return null!==T?Ou(s,y,T,E):_c}function Ea(i,s,a,l,c){const h=i.providerIndexes,y=s.data,E=1048575&h,I=i.directiveStart,T=h>>20,V=c?E+T:i.directiveEnd;for(let z=l?E:E+T;z<V;z++){const se=y[z];if(z<I&&a===se||z>=I&&se.type===a)return z}if(c){const z=y[I];if(z&&ni(z)&&z.type===a)return I}return null}function Ou(i,s,a,l){let c=i[a];const h=s.data;if(function dc(i){return i instanceof Su}(c)){const y=c;y.resolving&&function He(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(h[a]));const E=xu(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Zt(y.injectImpl):null;oc(i,l,ot.Default);try{c=i[a]=y.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Vs(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const y=pu(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&Zt(I),xu(E),y.resolving=!1,Ig()}}return c}function vc(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wa(i,s){return!(i&ot.Self||i&ot.Host&&s)}class $s{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return wi(this._tNode,this._lView,s,l,a)}}function Pu(i){return Tn(()=>{const s=i.prototype.constructor,a=s[We]||Ia(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[We]||Ia(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Ia(i){return je(i)?()=>{const s=Ia(Z(i));return s&&s()}:ri(i)}function ku(i){return function yc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if(Ah(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(on(),i)}const jr="__parameters__";function Bi(i,s,a){return Tn(()=>{const l=function Fu(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const y=new c(...h);return E.annotation=y,E;function E(I,b,T){const R=I.hasOwnProperty(jr)?I[jr]:Object.defineProperty(I,jr,{value:[]})[jr];for(;R.length<=T;)R.push(null);return(R[T]=R[T]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class an{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wc=new an("AnalyzeForEntryComponents");function Rr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Rr(l,s)):s!==i&&s.push(l)}return s}function ji(i,s){i.forEach(a=>Array.isArray(a)?ji(a,s):s(a))}function ba(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ca(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Hr(i,s,a){let l=zs(i,s);return l>=0?i[1|l]=a:(l=~l,function bc(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Nh(i,s){const a=zs(i,s);if(a>=0)return i[1|a]}function zs(i,s){return function Vu(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),y=i[h<<a];if(s===y)return h<<a;y>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const Hi={},Do="__NG_DI_FLAG__",Ta="ngTempTokenPath",Fh=/\n/gm,Aa="__source",kg=ye({provide:String,useValue:ye});let Uu;function Bu(i){const s=Uu;return Uu=i,s}function Lh(i,s=ot.Default){if(void 0===Uu)throw new Re(203,"");return null===Uu?Un(i,void 0,s):Uu.get(i,s&ot.Optional?null:void 0,s)}function Wn(i,s=ot.Default){return(function Cn(){return Ar}()||Lh)(Z(i),s)}const Fg=Wn;function Co(i){const s=[];for(let a=0;a<i.length;a++){const l=Z(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,h=ot.Default;for(let y=0;y<l.length;y++){const E=l[y],I=Sa(E);"number"==typeof I?-1===I?c=E.token:h|=I:c=E}s.push(Wn(c,h))}else s.push(Wn(l))}return s}function Gi(i,s){return i[Do]=s,i.prototype[Do]=s,i}function Sa(i){return i[Do]}const hs=Gi(Bi("Inject",i=>({token:i})),-1),Wi=Gi(Bi("Optional"),8),Ii=Gi(Bi("SkipSelf"),4);class Hu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function zi(i){return i instanceof Hu?i.changingThisBreaksApplicationSecurity:i}const f=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function qh(i){const s=function Vc(){const i=pe();return i&&i[12]}();return s?s.sanitize(Nn.URL,i)||"":function xo(i,s){const a=function jh(i){return i instanceof Hu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?zi(i):function C(i){return(i=String(i)).match(f)||i.match(w)?i:"unsafe:"+i}(Q(i))}const XD="__ngContext__";function et(i,s){i[XD]=s}function oi(i){const s=function bi(i){return i[XD]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Yh(i){return i.ngOriginalError}function Jg(i,...s){i.error(...s)}class rr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Zu(i){return i&&i.ngErrorLogger||Jg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Yh(s);for(;a&&Yh(a);)a=Yh(a);return a||null}}const jc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function ys(i){return i instanceof Function?i():i}var Ci=(()=>((Ci=Ci||{})[Ci.Important=1]="Important",Ci[Ci.DashCase=2]="DashCase",Ci))();function Jh(i,s){return undefined(i,s)}function $c(i){const s=i[3];return ti(s)?s[3]:s}function tm(i){return nm(i[13])}function Xh(i){return nm(i[4])}function nm(i){for(;null!==i&&!ti(i);)i=i[4];return i}function Yu(i,s,a,l,c){if(null!=l){let h,y=!1;ti(l)?h=l:pr(l)&&(y=!0,l=l[0]);const E=nn(l);0===i&&null!==a?null==c?C0(s,a,E):Va(s,a,E,c||null,!0):1===i&&null!==a?Va(s,a,E,c||null,!0):2===i?function x0(i,s,a){const l=tf(i,s);l&&function T0(i,s,a,l){sn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=h&&function Gc(i,s,a,l,c){const h=a[7];h!==nn(a)&&Yu(s,i,l,h,c);for(let E=10;E<a.length;E++){const I=a[E];Xu(I[1],I,i,s,l,h)}}(s,i,h,a,c)}}function At(i,s,a){if(sn(i))return i.createElement(s,a);{const l=null!==a?function Eh(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function D0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ks(c,-1)),a.splice(l,1)}function Ti(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&D0(c,l),s>0&&(i[a-1][4]=l[4]);const h=Ca(i,10+s);!function ab(i,s){Xu(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=h[19];null!==y&&y.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function sm(i,s){if(!(256&s[2])){const a=s[11];sn(a)&&a.destroyNode&&Xu(i,s,a,3,null,null),function im(i){let s=i[13];if(!s)return ef(i[1],i);for(;s;){let a=null;if(pr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)pr(s)&&ef(s[1],s),s=s[3];null===s&&(s=i),pr(s)&&ef(s[1],s),a=s&&s[4]}s=a}}(s)}}function ef(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function jM(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Su)){const h=a[l+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const E=c[h[y]],I=h[y+1];try{I.call(E)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function b0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],E="function"==typeof y?y(s):nn(s[y]),I=l[c=a[h+2]],b=a[h+3];"boolean"==typeof b?E.removeEventListener(a[h],I,b):b>=0?l[c=b]():l[c=-b].unsubscribe(),h+=2}else{const y=l[c=a[h+1]];a[h].call(y)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&sn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ti(s[3])){a!==s[3]&&D0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function zn(i,s,a){return function qi(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ct.None||c===Ct.Emulated)return null}return $n(l,a)}(i,s.parent,a)}function Va(i,s,a,l,c){sn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function C0(i,s,a){sn(i)?i.appendChild(s,a):s.appendChild(a)}function om(i,s,a,l,c){null!==l?Va(i,s,a,l,c):C0(i,s,a)}function tf(i,s){return sn(i)?i.parentNode(s):s.parentNode}let um=function am(i,s,a){return 40&i.type?$n(i,a):null};function xt(i,s,a,l){const c=zn(i,l,s),h=s[11],E=function S0(i,s,a){return um(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)om(h,c,a[I],E,!1);else om(h,c,a,E,!1)}function Lo(i,s){if(null!==s){const a=s.type;if(3&a)return $n(s,i);if(4&a)return Qs(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Lo(i,l);{const c=i[s.index];return ti(c)?Qs(-1,c):nn(c)}}if(32&a)return Jh(s,i)()||nn(i[s.index]);{const l=M0(i,s);return null!==l?Array.isArray(l)?l[0]:Lo($c(i[16]),l):Lo(i,s.next)}}return null}function M0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Qs(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Lo(l,c)}return s[7]}function nf(i,s,a,l,c,h,y){for(;null!=a;){const E=l[a.index],I=a.type;if(y&&0===s&&(E&&et(nn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)nf(i,s,a.child,l,c,h,!1),Yu(s,i,c,E,h);else if(32&I){const b=Jh(a,l);let T;for(;T=b();)Yu(s,i,c,T,h);Yu(s,i,c,E,h)}else 16&I?Hc(i,s,l,a,c,h):Yu(s,i,c,E,h);a=y?a.projectionNext:a.next}}function Xu(i,s,a,l,c,h){nf(a,l,i.firstChild,s,c,h,!1)}function Hc(i,s,a,l,c,h){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let b=0;b<I.length;b++)Yu(s,i,c,I[b],h);else nf(i,s,I,y[3],c,h,!0)}function Wc(i,s,a){sn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function lm(i,s,a){sn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function rf(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const dm="ng-template";function N0(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==rf(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function O0(i){return 4===i.type&&i.value!==dm}function db(i,s,a){return s===(4!==i.type||a?i.value:dm)}function hb(i,s,a){let l=4;const c=i.attrs||[],h=function gb(i){for(let s=0;s<i.length;s++)if(Ah(i[s]))return s;return i.length}(c);let y=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!db(i,I,a)||""===I&&1===s.length){if(Gr(l))return!1;y=!0}}else{const b=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!N0(i.attrs,b,a)){if(Gr(l))return!1;y=!0}continue}const R=fb(8&l?"class":I,c,O0(i),a);if(-1===R){if(Gr(l))return!1;y=!0;continue}if(""!==b){let V;V=R>h?"":c[R+1].toLowerCase();const z=8&l?V:null;if(z&&-1!==rf(z,b,0)||2&l&&b!==V){if(Gr(l))return!1;y=!0}}}}else{if(!y&&!Gr(l)&&!Gr(I))return!1;if(y&&Gr(I))continue;y=!1,l=I|1&l}}return Gr(l)||y}function Gr(i){return 0==(1&i)}function fb(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function mb(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function P0(i,s,a=!1){for(let l=0;l<s.length;l++)if(hb(i,s[l],a))return!0;return!1}function sf(i,s){return i?":not("+s.trim()+")":s}function hm(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const E=i[++a];c+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!Gr(y)&&(s+=sf(h,c),c=""),l=y,h=h||!Gr(l);a++}return""!==c&&(s+=sf(h,c)),s}const gt={};function fm(i){F0(Mt(),pe(),mr()+i,yo())}function F0(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&uc(s,h,a)}else{const h=i.preOrderHooks;null!==h&&lc(s,h,0,a)}Li(a)}function zc(i,s){return i<<17|s<<2}function Zi(i){return i>>17&32767}function Zc(i){return 2|i}function _s(i){return(131068&i)>>2}function Kc(i,s){return-131069&i|s<<2}function pm(i){return 1|i}function ym(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const y=i.data[h];sc(c),y.contentQueries(2,s[h],h)}}}function Uo(i,s,a,l,c,h,y,E,I,b){const T=s.blueprint.slice();return T[0]=c,T[2]=140|l,as(T),T[3]=T[15]=i,T[8]=a,T[10]=y||i&&i[10],T[11]=E||i&&i[11],T[12]=I||i&&i[12]||null,T[9]=b||i&&i[9]||null,T[6]=h,T[16]=2==s.type?i[16]:T,T}function nl(i,s,a,l,c){let h=i.data[s];if(null===h)h=function _m(i,s,a,l,c){const h=Du(),y=nc(),I=i.data[s]=function bb(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==h&&(y?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,l,c),function yg(){return lt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const y=function Fs(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return ii(h,!0),h}function rl(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Xc(i,s,a){Au(s);try{const l=i.viewQuery;null!==l&&Am(1,l,a);const c=i.template;null!==c&&vm(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ym(i,s),i.staticViewQueries&&Am(2,i.viewQuery,a);const h=i.components;null!==h&&function pf(i,s){for(let a=0;a<s.length;a++)Lb(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,ya()}}function eo(i,s,a,l){const c=s[2];if(256==(256&c))return;Au(s);const h=yo();try{as(s),function Cu(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&vm(i,s,a,2,l);const y=3==(3&c);if(!h)if(y){const b=i.preOrderCheckHooks;null!==b&&uc(s,b,null)}else{const b=i.preOrderHooks;null!==b&&lc(s,b,0,null),cc(s,0)}if(function kb(i){for(let s=tm(i);null!==s;s=Xh(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&ks(h,1),c[2]|=1024}}}(s),function iE(i){for(let s=tm(i);null!==s;s=Xh(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];mo(l)&&eo(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&ym(i,s),!h)if(y){const b=i.contentCheckHooks;null!==b&&uc(s,b)}else{const b=i.contentHooks;null!==b&&lc(s,b,1),cc(s,1)}!function Ai(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Li(~c);else{const h=c,y=a[++l],E=a[++l];_g(y,h),E(2,s[h])}}}finally{Li(-1)}}(i,s);const E=i.components;null!==E&&function z0(i,s){for(let a=0;a<s.length;a++)Fb(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Am(2,I,l),!h)if(y){const b=i.viewCheckHooks;null!==b&&uc(s,b)}else{const b=i.viewHooks;null!==b&&lc(s,b,2),cc(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ks(s[3],-1))}finally{ya()}}function q0(i,s,a,l){const c=s[10],h=!yo(),y=Ps(s);try{h&&!y&&c.begin&&c.begin(),y&&Xc(i,s,l),eo(i,s,a,l)}finally{h&&!y&&c.end&&c.end()}}function vm(i,s,a,l,c){const h=mr(),y=2&l;try{Li(-1),y&&s.length>20&&F0(i,s,20,yo()),a(l,c)}finally{Li(h)}}function gf(i,s,a){!Iu()||(function Mb(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||tr(a,s),et(l,s);const y=a.initialInputs;for(let E=c;E<h;E++){const I=i.data[E],b=ni(I);b&&Ob(s,a,I);const T=Ou(s,i,E,a);et(T,s),null!==y&&XM(0,E-c,T,I,0,y),b&&(gr(a.index,s)[8]=T)}}(i,s,a,$n(a,s)),128==(128&a.flags)&&function xb(i,s,a){const l=a.directiveStart,c=a.directiveEnd,y=a.index,E=function rc(){return lt.lFrame.currentDirectiveIndex}();try{Li(y);for(let I=l;I<c;I++){const b=i.data[I],T=s[I];ic(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&J0(b,T)}}finally{Li(-1),ic(E)}}(i,s,a))}function Wa(i,s,a=$n){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const y=l[h+1],E=-1===y?a(s,i):i[y];i[c++]=E}}}function Em(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=mf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function mf(i,s,a,l,c,h,y,E,I,b){const T=20+l,R=T+c,V=function Db(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:gt);return a}(T,R),z="function"==typeof b?b():b;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:z,incompleteFirstPass:!1}}function yf(i,s,a,l){const c=Sm(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&aE(i).push(l,c.length-1))}function wm(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Im(i,s,a,l){let c=!1;if(Iu()){const h=function Rb(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const y=l[h];P0(a,y.selectors,!1)&&(c||(c=[]),va(tr(a,s),i,y.type),ni(y)?(X0(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==h){c=!0,tE(a,i.data.length,h.length);for(let T=0;T<h.length;T++){const R=h[T];R.providersResolver&&R.providersResolver(R)}let E=!1,I=!1,b=rl(i,s,h.length,null);for(let T=0;T<h.length;T++){const R=h[T];a.mergedAttrs=ls(a.mergedAttrs,R.hostAttrs),nE(i,a,s,b,R),Nb(b,R,y),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const V=R.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function _f(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,y=[];let E=null,I=null;for(let b=s.directiveStart;b<l;b++){const T=c[b],R=T.inputs,V=null===h||O0(s)?null:rE(R,h);y.push(V),E=wm(R,b,E),I=wm(T.outputs,b,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=I}(i,a)}y&&function eE(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new Re(-301,!1);l.push(s[c],h)}}}(a,l,y)}return a.mergedAttrs=ls(a.mergedAttrs,a.attrs),c}function Q0(i,s,a,l,c,h){const y=h.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Sb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,y)}}function J0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function X0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Nb(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ni(s)&&(a[""]=i)}}function tE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function nE(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=ri(c.type)),y=new Su(h,ni(c),null);i.blueprint[l]=y,a[l]=y,Q0(i,s,0,l,rl(i,a,c.hostVars,gt),c)}function Ob(i,s,a){const l=$n(s,i),c=Em(a),h=i[10],y=Df(i,Uo(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=y}function vs(i,s,a,l,c,h){const y=$n(i,s);!function If(i,s,a,l,c,h,y){if(null==h)sn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==y?Q(h):y(h,l||"",c);sn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],y,h,i.value,a,l,c)}function XM(i,s,a,l,c,h){const y=h[s];if(null!==y){const E=l.setInput;for(let I=0;I<y.length;){const b=y[I++],T=y[I++],R=y[I++];null!==E?l.setInput(a,R,b,T):a[T]=R}}}function rE(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Dm(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Fb(i,s){const a=gr(s,i);if(mo(a)){const l=a[1];80&a[2]?eo(l,a,l.template,a[8]):a[5]>0&&bm(a)}}function bm(i){for(let l=tm(i);null!==l;l=Xh(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const y=h[1];eo(y,h,y.template,h[8])}else h[5]>0&&bm(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=gr(a[l],i);mo(c)&&c[5]>0&&bm(c)}}function Lb(i,s){const a=gr(s,i),l=a[1];(function sE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Xc(l,a,a[8])}function Df(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function td(i){for(;i;){i[2]|=64;const s=$c(i);if(Kl(i)&&!s)return i;i=s}return null}function Tm(i,s,a){const l=s[10];l.begin&&l.begin();try{eo(i,s,i.template,a)}catch(c){throw Wr(s,c),c}finally{l.end&&l.end()}}function bf(i){!function Cm(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=oi(a),c=l[1];q0(c,l,c.template,a)}}(i[8])}function Am(i,s,a){sc(0),s(i,a)}const Bb=(()=>Promise.resolve(null))();function Sm(i){return i[7]||(i[7]=[])}function aE(i){return i.cleanup||(i.cleanup=[])}function Wr(i,s){const a=i[9],l=a?a.get(rr,null):null;l&&l.handleError(s)}function lE(i,s,a,l,c){for(let h=0;h<a.length;){const y=a[h++],E=a[h++],I=s[y],b=i.data[y];null!==b.setInput?b.setInput(I,c,l,E):I[E]=c}}function Es(i,s,a){const l=go(s,i);!function E0(i,s,a){sn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function il(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?h=E:1==h?c=De(c,E):2==h&&(l=De(l,E+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Mm=new an("INJECTOR",-1);class xm{get(s,a=Hi){if(a===Hi){const l=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw l.name="NullInjectorError",l}return a}}const Rm=new an("Set Injector scope."),ol={},cE={};let nd;function $b(){return void 0===nd&&(nd=new xm),nd}function Bo(i,s=null,a=null,l){const c=Nm(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Nm(i,s=null,a=null,l){return new Hb(i,a,s||$b(),l)}class Hb{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&ji(a,E=>this.processProvider(E,s,a)),ji([s],E=>this.processInjectorType(E,[],h)),this.records.set(Mm,al(void 0,this));const y=this.records.get(Rm);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:le(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Hi,l=ot.Default){this.assertNotDestroyed();const c=Bu(this),h=Zt(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function fE(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(s)&&ln(s);E=I&&this.injectableDefInScope(I)?al(Om(s),ol):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ot.Self?$b():this.parent).get(s,a=l&ot.Optional&&a===Hi?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ta]=y[Ta]||[]).unshift(le(s)),c)throw y;return function Lg(i,s,a,l){const c=i[Ta];throw s[Aa]&&c.unshift(s[Aa]),i.message=function Ma(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=le(s);if(Array.isArray(s))c=s.map(le).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];h.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Fh,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Ta]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Zt(h),Bu(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(le(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=Z(s)))return!1;let c=mi(s);const h=null==c&&s.ngModule||void 0,y=void 0===h?s:h,E=-1!==l.indexOf(y);if(void 0!==h&&(c=mi(h)),null==c)return!1;if(null!=c.imports&&!E){let T;l.push(y);try{ji(c.imports,R=>{this.processInjectorType(R,a,l)&&(void 0===T&&(T=[]),T.push(R))})}finally{}if(void 0!==T)for(let R=0;R<T.length;R++){const{ngModule:V,providers:z}=T[R];ji(z,se=>this.processProvider(se,V,z||at))}}this.injectorDefTypes.add(y);const I=ri(y)||(()=>new y);this.records.set(y,al(I,ol));const b=c.providers;if(null!=b&&!E){const T=s;ji(b,R=>this.processProvider(R,T,b))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=ul(s=Z(s))?s:Z(s&&s.provide);const h=function Gb(i,s,a){return Pm(i)?al(void 0,i.useValue):al(hE(i),ol)}(s);if(ul(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=al(void 0,ol,!0),y.factory=()=>Co(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===ol&&(a.value=cE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Zb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Om(i){const s=ln(i),a=null!==s?s.factory:ri(i);if(null!==a)return a;if(i instanceof an)throw new Re(204,!1);if(i instanceof Function)return function dE(i){const s=i.length;if(s>0)throw function Nr(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function cr(i){const s=i&&(i[Br]||i[dr]);if(s){const a=function er(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function hE(i,s,a){let l;if(ul(i)){const c=Z(i);return ri(c)||Om(c)}if(Pm(i))l=()=>Z(i.useValue);else if(function zb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Co(i.deps||[]));else if(function Wb(i){return!(!i||!i.useExisting)}(i))l=()=>Wn(Z(i.useExisting));else{const c=Z(i&&(i.useClass||i.provide));if(!function qb(i){return!!i.deps}(i))return ri(c)||Om(c);l=()=>new c(...Co(i.deps))}return l}function al(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Pm(i){return null!==i&&"object"==typeof i&&kg in i}function ul(i){return"function"==typeof i}let ws=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Bo({name:""},l,a,"");{const h=null!==(c=a.name)&&void 0!==c?c:"";return Bo({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Hi,i.NULL=new xm,i.\u0275prov=Ut({token:i,providedIn:"any",factory:()=>Wn(Mm)}),i.__NG_ELEMENT_ID__=-1,i})();function jm(i,s){_a(oi(i)[1],on())}function $m(i){let s=function IE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(ni(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=Sf(i.inputs),y.declaredInputs=Sf(i.declaredInputs),y.outputs=Sf(i.outputs);const E=c.hostBindings;E&&Gm(i,E);const I=c.viewQuery,b=c.contentQueries;if(I&&Jb(i,I),b&&Xb(i,b),_e(i.inputs,c.inputs),_e(i.declaredInputs,c.declaredInputs),_e(i.outputs,c.outputs),ni(c)&&c.data.animation){const T=i.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const E=h[y];E&&E.ngInherit&&E(i),E===$m&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Hm(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ls(c.hostAttrs,a=ls(a,c.hostAttrs))}}(l)}function Sf(i){return i===Kt?{}:i===at?[]:i}function Jb(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Xb(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function Gm(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let to=null;function za(){if(!to){const i=Rt.Symbol;if(i&&i.iterator)to=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(to=l)}}}return to}function rd(i){return!!no(i)&&(Array.isArray(i)||!(i instanceof Map)&&za()in i)}function no(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function _r(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function id(i,s,a,l){const c=pe();return _r(c,_o(),s)&&(Mt(),vs(dn(),c,i,s,a,l)),id}function ME(i,s,a,l,c,h,y,E){const I=pe(),b=Mt(),T=i+20,R=b.firstCreatePass?function qm(i,s,a,l,c,h,y,E,I){const b=s.consts,T=nl(s,i,4,y||null,ki(b,E));Im(s,a,T,ki(b,I)),_a(s,T);const R=T.tViews=mf(2,T,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,b);return null!==s.queries&&(s.queries.template(s,T),R.queries=s.queries.embeddedTView(T)),T}(T,b,I,s,a,l,c,h,y):b.data[T];ii(R,!1);const V=I[11].createComment("");xt(b,I,V,R),et(V,I),Df(I,I[T]=Dm(V,I,V,R)),Os(R)&&gf(b,I,R),null!=y&&Wa(I,R,E)}function Rf(i){return function vi(i,s){return i[s]}(function Dh(){return lt.lFrame.contextLView}(),20+i)}function kf(i,s=ot.Default){const a=pe();return null===a?Wn(i,s):wi(on(),a,Z(i),s)}function UE(){throw new Error("invalid")}function ad(i,s,a){const l=pe();return _r(l,_o(),s)&&function ui(i,s,a,l,c,h,y,E){const I=$n(s,a);let T,b=s.inputs;!E&&null!=b&&(T=b[l])?(lE(i,a,T,l,c),Zl(s)&&function vf(i,s){const a=gr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Cb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,sn(h)?h.setProperty(I,l,c):hc(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Mt(),dn(),l,i,s,l[11],a,!1),ad}function ny(i,s,a,l,c){const y=c?"class":"style";lE(i,a,s.inputs[y],y,l)}function hl(i,s,a,l){const c=pe(),h=Mt(),y=20+i,E=c[11],I=c[y]=At(E,s,function bh(){return lt.lFrame.currentNamespace}()),b=h.firstCreatePass?function yC(i,s,a,l,c,h,y){const E=s.consts,b=nl(s,i,2,c,ki(E,h));return Im(s,a,b,ki(E,y)),null!==b.attrs&&il(b,b.attrs,!1),null!==b.mergedAttrs&&il(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(y,h,c,0,s,a,l):h.data[y];ii(b,!0);const T=b.mergedAttrs;null!==T&&vo(E,I,T);const R=b.classes;null!==R&&lm(E,I,R);const V=b.styles;return null!==V&&Wc(E,I,V),64!=(64&b.flags)&&xt(h,c,I,b),0===function Ih(){return lt.lFrame.elementDepthCount}()&&et(I,c),function wu(){lt.lFrame.elementDepthCount++}(),Os(b)&&(gf(h,c,b),function ed(i,s,a){if(oa(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,b,c)),null!==l&&Wa(c,b),hl}function ry(){let i=on();nc()?function ga(){lt.lFrame.isParent=!1}():(i=i.parent,ii(i,!1));const s=i;!function pg(){lt.lFrame.elementDepthCount--}();const a=Mt();return a.firstCreatePass&&(_a(a,i),oa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Tg(i){return 0!=(16&i.flags)}(s)&&ny(a,s,pe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function zD(i){return 0!=(32&i.flags)}(s)&&ny(a,s,pe(),s.stylesWithoutHost,!1),ry}function BE(i,s,a,l){return hl(i,s,a,l),ry(),BE}function HE(){return pe()}function iy(i){return!!i&&"function"==typeof i.then}function GE(i){return!!i&&"function"==typeof i.subscribe}const WE=GE;function sy(i,s,a,l){const c=pe(),h=Mt(),y=on();return function qE(i,s,a,l,c,h,y,E){const I=Os(l),T=i.firstCreatePass&&aE(i),R=s[8],V=Sm(s);let z=!0;if(3&l.type||E){const Oe=$n(l,s),Ge=E?E(Oe):Oe,he=V.length,rt=E?Ot=>E(nn(Ot[l.index])):l.index;if(sn(a)){let Ot=null;if(!E&&I&&(Ot=function _C(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===a&&c[h+1]===l){const E=s[7],I=c[h+2];return E.length>I?E[I]:null}"string"==typeof y&&(h+=2)}return null}(i,s,c,l.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=h,Ot.__ngLastListenerFn__=h,z=!1;else{h=pl(l,s,R,h,!1);const $t=a.listen(Ge,c,h);V.push(h,$t),T&&T.push(c,rt,he,he+1)}}else h=pl(l,s,R,h,!0),Ge.addEventListener(c,h,y),V.push(h),T&&T.push(c,rt,he,y)}else h=pl(l,s,R,h,!1);const se=l.outputs;let Ae;if(z&&null!==se&&(Ae=se[c])){const Oe=Ae.length;if(Oe)for(let Ge=0;Ge<Oe;Ge+=2){const qr=s[Ae[Ge]][Ae[Ge+1]].subscribe(h),Sn=V.length;V.push(h,qr),T&&T.push(c,l.index,Sn,-(Sn+1))}}}(h,c,c[11],y,i,s,!!a,l),sy}function ZE(i,s,a,l){try{return!1!==a(l)}catch(c){return Wr(i,c),!1}}function pl(i,s,a,l,c){return function h(y){if(y===Function)return l;const E=2&i.flags?gr(i.index,s):s;0==(32&s[2])&&td(E);let I=ZE(s,0,l,y),b=h.__ngNextListenerFn__;for(;b;)I=ZE(s,0,b,y)&&I,b=b.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function tw(i,s,a,l,c){const h=i[a+1],y=null===s;let E=l?Zi(h):_s(h),I=!1;for(;0!==E&&(!1===I||y);){const T=i[E+1];bC(i[E],s)&&(I=!0,i[E+1]=l?pm(T):Zc(T)),E=l?Zi(T):_s(T)}I&&(i[a+1]=l?Zc(h):pm(h))}function bC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&zs(i,s)>=0}function ud(i,s){return function li(i,s,a,l){const c=pe(),h=Mt(),y=function si(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function sw(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[mr()],y=function Zn(i,s){return s>=i.expandoStartIndex}(i,a);(function jf(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!y&&(s=!1),s=function dy(i,s,a,l){const c=function ma(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Qa(a=ld(null,i,s,a,l),s.attrs,l),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=ld(c,i,s,a,l),null===h){let I=function xC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==_s(l))return i[Zi(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=ld(null,i,s,I[1],l),I=Qa(I,s.attrs,l),function hy(i,s,a,l){i[Zi(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else h=function ow(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=Qa(l,i[h].hostAttrs,a);return Qa(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function ew(i,s,a,l,c,h){let y=h?s.classBindings:s.styleBindings,E=Zi(y),I=_s(y);i[l]=a;let T,b=!1;if(Array.isArray(a)){const R=a;T=R[1],(null===T||zs(R,T)>0)&&(b=!0)}else T=a;if(c)if(0!==I){const V=Zi(i[E+1]);i[l+1]=zc(V,E),0!==V&&(i[V+1]=Kc(i[V+1],l)),i[E+1]=function L0(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=zc(E,0),0!==E&&(i[E+1]=Kc(i[E+1],l)),E=l;else i[l+1]=zc(I,0),0===E?E=l:i[I+1]=Kc(i[I+1],l),I=l;b&&(i[l+1]=Zc(i[l+1])),tw(i,T,l,!0),tw(i,T,l,!1),function DC(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&zs(h,s)>=0&&(a[l+1]=pm(a[l+1]))}(s,T,i,l,h),y=zc(E,I),h?s.classBindings=y:s.styleBindings=y}(c,h,s,a,y,l)}}(h,i,y,l),s!==gt&&_r(c,y,s)&&function uw(i,s,a,l,c,h,y,E){if(!(3&s.type))return;const I=i.data,b=I[E+1];gl(function of(i){return 1==(1&i)}(b)?lw(I,s,a,c,_s(b),y):void 0)||(gl(h)||function qc(i){return 2==(2&i)}(b)&&(h=lw(I,null,a,c,E,y)),function R0(i,s,a,l,c){const h=sn(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:Ci.DashCase;if(null==c)h?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),y|=Ci.Important),h?i.setStyle(a,l,c,y):a.style.setProperty(l,c,E?"important":"")}}}(l,y,go(mr(),a),c,h))}(h,h.data[mr()],c,c[11],i,c[y+1]=function cw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(zi(i)))),i}(s,a),l,y)}(i,s,null,!0),ud}function ld(i,s,a,l,c){let h=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(h=s[E],l=Qa(l,h.hostAttrs,c),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Qa(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hr(i,y,!!a||s[++h]))}return void 0===i?null:i}function lw(i,s,a,l,c,h){const y=null===s;let E;for(;c>0;){const I=i[c],b=Array.isArray(I),T=b?I[1]:I,R=null===T;let V=a[c+1];V===gt&&(V=R?at:void 0);let z=R?Nh(V,l):T===l?V:void 0;if(b&&!gl(z)&&(z=Nh(I,l)),gl(z)&&(E=z,y))return E;const se=i[c+1];c=y?Zi(se):_s(se)}if(null!==s){let I=h?s.residualClasses:s.residualStyles;null!=I&&(E=Nh(I,l))}return E}function gl(i){return void 0!==i}function dw(i,s=""){const a=pe(),l=Mt(),c=i+20,h=l.firstCreatePass?nl(l,c,1,s,null):l.data[c],y=a[c]=function rm(i,s){return sn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);xt(l,a,y,h),ii(h,!1)}function cd(i){return dd("",i,""),cd}function dd(i,s,a){const l=pe(),c=function jo(i,s,a,l){return _r(i,_o(),a)?s+Q(a)+l:gt}(l,i,s,a);return c!==gt&&Es(l,mr(),c),dd}const ml=void 0;var hx=["en",[["a","p"],["AM","PM"],ml],[["AM","PM"],ml,ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ml,"{1} 'at' {0}",ml],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cy(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let hd={};function Ay(i){const s=function Aw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Tw(s);if(a)return a;const l=s.split("-")[0];if(a=Tw(l),a)return a;if("en"===l)return hx;throw new Error(`Missing locale data for the locale "${i}".`)}function Cw(i){return Ay(i)[qe.PluralCase]}function Tw(i){return i in hd||(hd[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),hd[i]}var qe=(()=>((qe=qe||{})[qe.LocaleId=0]="LocaleId",qe[qe.DayPeriodsFormat=1]="DayPeriodsFormat",qe[qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",qe[qe.DaysFormat=3]="DaysFormat",qe[qe.DaysStandalone=4]="DaysStandalone",qe[qe.MonthsFormat=5]="MonthsFormat",qe[qe.MonthsStandalone=6]="MonthsStandalone",qe[qe.Eras=7]="Eras",qe[qe.FirstDayOfWeek=8]="FirstDayOfWeek",qe[qe.WeekendRange=9]="WeekendRange",qe[qe.DateFormat=10]="DateFormat",qe[qe.TimeFormat=11]="TimeFormat",qe[qe.DateTimeFormat=12]="DateTimeFormat",qe[qe.NumberSymbols=13]="NumberSymbols",qe[qe.NumberFormats=14]="NumberFormats",qe[qe.CurrencyCode=15]="CurrencyCode",qe[qe.CurrencySymbol=16]="CurrencySymbol",qe[qe.CurrencyName=17]="CurrencyName",qe[qe.Currencies=18]="Currencies",qe[qe.Directionality=19]="Directionality",qe[qe.PluralCase=20]="PluralCase",qe[qe.ExtraData=21]="ExtraData",qe))();const zf="en-US";let Sw=zf;function Ko(i,s,a,l,c){if(i=Z(i),Array.isArray(i))for(let h=0;h<i.length;h++)Ko(i[h],s,a,l,c);else{const h=Mt(),y=pe();let E=ul(i)?i:Z(i.provide),I=hE(i);const b=on(),T=1048575&b.providerIndexes,R=b.directiveStart,V=b.providerIndexes>>20;if(ul(i)||!i.multi){const z=new Su(I,c,kf),se=wl(E,s,c?T:T+V,R);-1===se?(va(tr(b,y),h,E),tp(h,i,s.length),s.push(E),b.directiveStart++,b.directiveEnd++,c&&(b.providerIndexes+=1048576),a.push(z),y.push(z)):(a[se]=z,y[se]=z)}else{const z=wl(E,s,T+V,R),se=wl(E,s,T,T+V),Ae=z>=0&&a[z],Oe=se>=0&&a[se];if(c&&!Oe||!c&&!Ae){va(tr(b,y),h,E);const Ge=function Ax(i,s,a,l,c){const h=new Su(i,a,kf);return h.multi=[],h.index=s,h.componentProviders=0,qw(h,c,l&&!a),h}(c?eT:eu,a.length,c,l,I);!c&&Oe&&(a[se].providerFactory=Ge),tp(h,i,s.length,0),s.push(E),b.directiveStart++,b.directiveEnd++,c&&(b.providerIndexes+=1048576),a.push(Ge),y.push(Ge)}else tp(h,i,z>-1?z:se,qw(a[c?se:z],I,!c&&l));!c&&l&&Oe&&a[se].componentProviders++}}}function tp(i,s,a,l){const c=ul(s),h=function km(i){return!!i.useClass}(s);if(c||h){const I=(h?Z(s.useClass):s).prototype.ngOnDestroy;if(I){const b=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const T=b.indexOf(a);-1===T?b.push(a,[l,I]):b[T+1].push(l,I)}else b.push(a,I)}}}function qw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function wl(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function eu(i,s,a,l){return oo(this.multi,[])}function eT(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ou(a,a[1],this.providerFactory.index,l);h=E.slice(0,y),oo(c,h);for(let I=y;I<E.length;I++)h.push(E[I])}else h=[],oo(c,h);return h}function oo(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function tT(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Ky(i,s,a){const l=Mt();if(l.firstCreatePass){const c=ni(i);Ko(a,l.data,l.blueprint,c,!0),Ko(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Zw{}class Kw{resolveComponentFactory(s){throw function nT(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Yy=(()=>{class i{}return i.NULL=new Kw,i})();function rT(){return Qo(on(),pe())}function Qo(i,s){return new Ed($n(i,s))}let Ed=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=rT,i})();function iT(i){return i instanceof Ed?i.nativeElement:i}class Yw{}let sT=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function xx(){const i=pe(),a=gr(on().index,i);return function Mx(i){return i[11]}(pr(a)?a:i)}(),i})(),Rx=(()=>{class i{}return i.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>null}),i})();class Qw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const oT=new Qw("13.3.5"),Jw={};function Qy(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(nn(h)),ti(h))for(let E=10;E<h.length;E++){const I=h[E],b=I[1].firstChild;null!==b&&Qy(I[1],I,b,l)}const y=a.type;if(8&y)Qy(i,s,a.child,l);else if(32&y){const E=Jh(a,s);let I;for(;I=E();)l.push(I)}else if(16&y){const E=M0(s,a);if(Array.isArray(E))l.push(...E);else{const I=$c(s[16]);Qy(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class np{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Qy(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ti(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ti(s,l),Ca(a,l))}this._attachedToViewContainer=!1}sm(this._lView[1],this._lView)}onDestroy(s){yf(this._lView[1],this._lView,null,s)}markForCheck(){td(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function oE(i,s,a){bu(!0);try{Tm(i,s,a)}finally{bu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I0(i,s){Xu(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class Xw extends np{constructor(s){super(s),this._view=s}detectChanges(){bf(this._view)}checkNoChanges(){!function Ub(i){bu(!0);try{bf(i)}finally{bu(!1)}}(this._view)}get context(){return null}}class rp extends Yy{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Be(s);return new e_(a,this.ngModule)}}function Jy(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class e_ extends Zw{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Js(i){return i.map(hm).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Jy(this.componentDef.inputs)}get outputs(){return Jy(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function Xy(i,s){return{get:(a,l,c)=>{const h=i.get(a,Jw,c);return h!==Jw||l===Jw?h:s.get(a,l,c)}}}(s,c.injector):s,y=h.get(Yw,ha),E=h.get(Rx,null),I=y.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",T=l?function K0(i,s,a){if(sn(i))return i.selectRootElement(s,a===Ct.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):At(y.createRenderer(null,this.componentDef),b,function Nx(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(b)),R=this.componentDef.onPush?576:528,V=function Af(i,s){return{components:[],scheduler:i||jc,clean:Bb,playerHandler:s||null,flags:0}}(),z=mf(0,null,null,1,0,null,null,null,null,null),se=Uo(null,z,V,R,null,null,y,I,E,h);let Ae,Oe;Au(se);try{const Ge=function Um(i,s,a,l,c,h){const y=a[1];a[20]=i;const I=nl(y,20,2,"#host",null),b=I.mergedAttrs=s.hostAttrs;null!==b&&(il(I,b,!0),null!==i&&(vo(c,i,b),null!==I.classes&&lm(c,i,I.classes),null!==I.styles&&Wc(c,i,I.styles)));const T=l.createRenderer(i,s),R=Uo(a,Em(s),null,s.onPush?64:16,a[20],I,l,T,h||null,null);return y.firstCreatePass&&(va(tr(I,a),y,s.type),X0(y,I),tE(I,a.length,1)),Df(a,R),a[20]=R}(T,this.componentDef,se,y,I);if(T)if(l)vo(I,T,["ng-version",oT.full]);else{const{attrs:he,classes:rt}=function el(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!Gr(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);he&&vo(I,T,he),rt&&rt.length>0&&lm(I,T,rt.join(" "))}if(Oe=vu(z,20),void 0!==a){const he=Oe.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const Ot=a[rt];he.push(null!=Ot?Array.from(Ot):null)}}Ae=function Bm(i,s,a,l,c){const h=a[1],y=function Ab(i,s,a){const l=on();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),nE(i,l,s,rl(i,s,1,null),a));const c=Ou(s,i,l.directiveStart,l);et(c,s);const h=$n(l,s);return h&&et(h,s),c}(h,a,s);if(l.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=on();s.contentQueries(1,y,I.directiveStart)}const E=on();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Li(E.index),Q0(a[1],E,0,E.directiveStart,E.directiveEnd,s),J0(s,y)),y}(Ge,this.componentDef,se,V,[jm]),Xc(z,se,null)}finally{ya()}return new Ox(this.componentType,Ae,Qo(Oe,se),se,Oe)}}class Ox extends class di{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Xw(c),this.componentType=s}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class wd{}class lT{}const Id=new Map;class hT extends wd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new rp(this);const l=dt(s);this._bootstrapComponents=ys(l.bootstrap),this._r3Injector=Nm(s,a,[{provide:wd,useValue:this},{provide:Yy,useValue:this.componentFactoryResolver}],le(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ws.THROW_IF_NOT_FOUND,l=ot.Default){return s===ws||s===wd||s===Mm?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class eI extends lT{constructor(s){super(),this.moduleType=s,null!==dt(s)&&function Px(i){const s=new Set;!function a(l){const c=dt(l,!0),h=c.id;null!==h&&(function cT(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${le(s)} vs ${le(s.name)}`)}(h,Id.get(h),l),Id.set(h,l));const y=ys(c.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new hT(this.moduleType,s)}}function fT(i,s,a){const l=function Rn(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,c=pe();return c[l]===gt?function Qi(i,s,a){return i[s]=a}(c,l,a?s.call(a):s()):function cl(i,s){return i[s]}(c,l)}function tI(i){return s=>{setTimeout(i,void 0,s)}}const ao=class Qx extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,h,y;let E=s,I=a||(()=>null),b=l;if(s&&"object"==typeof s){const R=s;E=null===(c=R.next)||void 0===c?void 0:c.bind(R),I=null===(h=R.error)||void 0===h?void 0:h.bind(R),b=null===(y=R.complete)||void 0===y?void 0:y.bind(R)}this.__isAsync&&(I=tI(I),E&&(E=tI(E)),b&&(b=tI(b)));const T=super.subscribe({next:E,error:I,complete:b});return s instanceof L.w0&&s.add(T),T}};function Jx(){return this._results[za()]()}class nI{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=za(),l=nI.prototype;l[a]||(l[a]=Jx)}get changes(){return this._changes||(this._changes=new ao)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Rr(s);(this._changesDetected=!function Da(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let op=(()=>{class i{}return i.__NG_ELEMENT_ID__=tR,i})();const Xx=op,eR=class extends Xx{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Uo(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),Xc(a,l,s),new np(l)}};function tR(){return t_(on(),pe())}function t_(i,s){return 4&i.type?new eR(s,i,Qo(i,s)):null}let n_=(()=>{class i{}return i.__NG_ELEMENT_ID__=nR,i})();function nR(){return wT(on(),pe())}const rR=n_,vT=class extends rR{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const s=Us(this._hostTNode,this._hostLView);if(vn(s)){const a=En(s,this._hostLView),l=Ui(s);return new $s(a[1].data[l+8],a)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ET(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const y=s&&!function $r(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const R=a||{};E=R.index,l=R.injector,c=R.projectableNodes,h=R.ngModuleRef}const I=y?s:new e_(Be(s)),b=l||this.parentInjector;if(!h&&null==I.ngModule){const V=(y?b:this.parentInjector).get(wd,null);V&&(h=V)}const T=I.create(b,c,void 0,h);return this.insert(T.hostView,E),T}insert(s,a){const l=s._lView,c=l[1];if(function Eu(i){return ti(i[3])}(l)){const T=this.indexOf(s);if(-1!==T)this.detach(T);else{const R=l[3],V=new vT(R,R[6],R[3]);V.detach(V.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function ub(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],ba(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function lb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,y,h);const E=Qs(h,y),I=l[11],b=tf(I,y[7]);return null!==b&&function Qu(i,s,a,l,c,h){l[0]=c,l[6]=s,Xu(i,l,a,1,c,h)}(c,y[6],I,l,b,E),s.attachToViewContainerRef(),ba(rI(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ET(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ti(this._lContainer,a);l&&(Ca(rI(this._lContainer),a),sm(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ti(this._lContainer,a);return l&&null!=Ca(rI(this._lContainer),a)?new np(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function ET(i){return i[8]}function rI(i){return i[8]||(i[8]=[])}function wT(i,s){let a;const l=s[i.index];if(ti(l))a=l;else{let c;if(8&i.type)c=nn(l);else{const h=s[11];c=h.createComment("");const y=$n(i,s);Va(h,tf(h,y),c,function A0(i,s){return sn(i)?i.nextSibling(s):s.nextSibling}(h,y),!1)}s[i.index]=a=Dm(l,s,c,i),Df(s,a)}return new vT(a,i,s)}class r_{constructor(s){this.queryList=s,this.matches=null}clone(){return new r_(this.queryList)}setDirty(){this.queryList.setDirty()}}class i_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const y=a.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new i_(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Dd(s,a).matches&&this.queries[a].setDirty()}}class kn{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class hi{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new hi(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Il{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Il(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,s_(a,h)),this.matchTNodeWithReadOption(s,a,Ea(a,s,h,!1,!1))}else l===op?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ea(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ed||c===n_||c===op&&4&a.type)this.addMatch(a.index,-2);else{const h=Ea(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function s_(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function bT(i,s,a,l){return-1===a?function DT(i,s){return 11&i.type?Qo(i,s):4&i.type?t_(i,s):null}(s,i):-2===a?function CT(i,s,a){return a===Ed?Qo(s,i):a===op?t_(s,i):a===n_?wT(s,i):void 0}(i,s,l):Ou(i,i[1],a,s)}function o_(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const b=y[I];E.push(b<0?null:bT(s,h[b],y[I+1],a.metadata.read))}c.matches=E}return c.matches}function a_(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const y=o_(i,s,c,a);for(let E=0;E<h.length;E+=2){const I=h[E];if(I>0)l.push(y[E/2]);else{const b=h[E+1],T=s[-I];for(let R=10;R<T.length;R++){const V=T[R];V[17]===V[3]&&a_(V[1],V,b,l)}if(null!==T[9]){const R=T[9];for(let V=0;V<R.length;V++){const z=R[V];a_(z[1],z,b,l)}}}}}return l}function iI(i){const s=pe(),a=Mt(),l=vg();sc(l+1);const c=Dd(a,l);if(i.dirty&&Ps(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?a_(a,s,l,[]):o_(a,s,c,l);i.reset(h,iT),i.notifyOnChanges()}return!0}return!1}function sI(i,s,a,l){const c=Mt();if(c.firstCreatePass){const h=on();(function oI(i,s,a){null===i.queries&&(i.queries=new hi),i.queries.track(new Il(s,a))})(c,new kn(s,a,l),h.index),function l_(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function u_(i,s,a){const l=new nI(4==(4&a));yf(i,s,l,l.destroy),null===s[19]&&(s[19]=new i_),s[19].queries.push(new r_(l))}(c,pe(),a)}function vr(){return function ap(i,s){return i[19].queries[s].queryList}(pe(),vg())}function Dd(i,s){return i.queries.getByIndex(s)}function gp(...i){}const v_=new an("Application Initializer");let mp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=gp,this.reject=gp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(iy(h))a.push(h);else if(WE(h)){const y=new Promise((E,I)=>{h.subscribe({complete:E,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Wn(v_,8))},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const E_=new an("AppId",{providedIn:"root",factory:function w_(){return`${EI()}${EI()}${EI()}`}});function EI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wI=new an("Platform Initializer"),fR=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),UT=new an("appBootstrapListener");let pR=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const yp=new an("LocaleId",{providedIn:"root",factory:()=>Fg(yp,ot.Optional|ot.SkipSelf)||function BT(){return"undefined"!=typeof $localize&&$localize.locale||zf}()}),jT=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class gR{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let D_=(()=>{class i{compileModuleSync(a){return new eI(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),h=ys(dt(a).declarations).reduce((y,E)=>{const I=Be(E);return I&&y.push(new e_(I)),y},[]);return new gR(l,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _R=(()=>Promise.resolve(0))();function b_(i){"undefined"==typeof Zone?_R.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Cs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ao(!1),this.onMicrotaskEmpty=new ao(!1),this.onStable=new ao(!1),this.onError=new ao(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function HT(){let i=Rt.requestAnimationFrame,s=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function wR(i){const s=()=>{!function ER(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bI(i),i.isCheckStableRunning=!0,C_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bI(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,y,E)=>{try{return GT(i),a.invokeTask(c,h,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),WT(i)}},onInvoke:(a,l,c,h,y,E,I)=>{try{return GT(i),a.invoke(c,h,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),WT(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,bI(i),C_(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,vR,gp,gp);try{return h.runTask(y,a,l)}finally{h.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const vR={};function C_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bI(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function GT(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function WT(i){i._nesting--,C_(i)}class zT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ao,this.onMicrotaskEmpty=new ao,this.onStable=new ao,this.onError=new ao}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Ts=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cs.assertNotInAngularZone(),b_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())b_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Wn(Cs))},i.\u0275prov=Ut({token:i,factory:i.\u0275fac}),i})(),Je=(()=>{class i{constructor(){this._applications=new Map,Tl.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Tl.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class T_{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function mt(i){Tl=i}let Tl=new T_,uo=null;const Al=new an("AllowMultipleToken"),CI=new an("PlatformOnDestroy");class ZT{constructor(s,a){this.name=s,this.token=a}}function Md(i,s,a=[]){const l=`Platform: ${s}`,c=new an(l);return(h=[])=>{let y=S_();if(!y||y.injector.get(Al,!1)){const E=[...a,...h,{provide:c,useValue:!0}];i?i(E):function sr(i){if(uo&&!uo.get(Al,!1))throw new Re(400,"");uo=i;const s=i.get(M_),a=i.get(wI,null);a&&a.forEach(l=>l())}(function Jo(i=[],s){return ws.create({name:s,providers:[{provide:Rm,useValue:"platform"},{provide:CI,useValue:()=>uo=null},...i]})}(E,l))}return function or(i){const s=S_();if(!s)throw new Re(401,"");return s}()}}function S_(){var i;return null!==(i=null==uo?void 0:uo.get(M_))&&void 0!==i?i:null}let M_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function TI(i,s){let a;return a="noop"===i?new zT:("zone.js"===i?void 0:i)||new Cs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Cs,useValue:E}];return E.run(()=>{const b=ws.create({providers:I,parent:this.injector,name:a.moduleType.name}),T=a.create(b),R=T.injector.get(rr,null);if(!R)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:z=>{R.handleError(z)}});T.onDestroy(()=>{Sl(this._modules,T),V.unsubscribe()})}),function KT(i,s,a){try{const l=a();return iy(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(R,E,()=>{const V=T.injector.get(mp);return V.runInitializers(),V.donePromise.then(()=>(function HC(i){Gt(i,"Expected localeId to be defined"),"string"==typeof i&&(Sw=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(yp,zf)||zf),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,l=[]){const c=x_({},l);return function A_(i,s,a){const l=new eI(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(xd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(CI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Wn(ws))},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function x_(i,s){return Array.isArray(s)?s.reduce(x_,i):Object.assign(Object.assign({},i),s)}let xd=(()=>{class i{constructor(a,l,c,h){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Cs.assertNotInAngularZone(),b_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ae.T)(y,E.pipe((0,ge.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof Zw?a:this._injector.get(Yy).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function qT(i){return i.isBoundToModule}(c)?void 0:this._injector.get(wd),E=c.create(ws.NULL,[],l||c.selector,h),I=E.location.nativeElement,b=E.injector.get(Ts,null),T=b&&E.injector.get(Je);return b&&T&&T.registerApplication(I,b),E.onDestroy(()=>{this.detachView(E.hostView),Sl(this.components,E),T&&T.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Sl(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(UT,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Wn(Cs),Wn(ws),Wn(rr),Wn(mp))},i.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sl(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let _p=!0,Er=!1;function AI(){return Er=!0,_p}function SI(){if(Er)throw new Error("Cannot enable prod mode after platform setup.");_p=!1}let xI=(()=>{class i{}return i.__NG_ELEMENT_ID__=O_,i})();function O_(i){return function QT(i,s,a){if(Zl(i)&&!a){const l=gr(i.index,s);return new np(l,l)}return 47&i.type?new np(s[16],s):null}(on(),pe(),16==(16&i))}class PI{constructor(){}supports(s){return rd(s)}create(s){return new bp(s)}}const Dp=(i,s)=>s;class bp{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Dp}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const y=!l||a&&a.currentIndex<Tp(l,c,h)?a:l,E=Tp(y,c,h),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{h||(h=[]);const b=E-c,T=I-c;if(b!=T){for(let V=0;V<b;V++){const z=V<h.length?h[V]:h[V]=0,se=z+V;T<=se&&se<b&&(h[V]=z+1)}h[y.previousIndex]=T-b}}E!==I&&s(y,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!rd(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],y=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,h,y,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,E),l=!0),a=a._next}else c=0,function rC(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[za()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{y=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new V_(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Cp),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class V_{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U_{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Cp{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new U_,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tp(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class B_{constructor(){}supports(s){return s instanceof Map||no(s)}create(){return new kI}}class kI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||no(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const l=new tA(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class tA{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function j_(){return new Ap([new PI])}let Ap=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||j_()),deps:[[i,new Ii,new Wi]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Ut({token:i,providedIn:"root",factory:j_}),i})();function $_(){return new H_([new B_])}let H_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$_()),deps:[[i,new Ii,new Wi]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Ut({token:i,providedIn:"root",factory:$_}),i})();const ur=Md(null,"core",[]);let Sp=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Wn(xd))},i.\u0275mod=M({type:i}),i.\u0275inj=jt({}),i})()},3942:(ut,Ie,F)=>{F.d(Ie,{Z:()=>Re});var p=F(2090),L=F(4859),O=F(9681),ae=F(1877);class ge{constructor(Q,ve){this._delegate=Q,this.firebase=ve,(0,O._addComponent)(Q,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=Q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this._delegate.automaticDataCollectionEnabled=Q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Q=>{this._delegate.checkDestroyed(),Q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Q,ve=O._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(Q);return!Ve.isInitialized()&&"EXPLICIT"===(null===(He=Ve.getComponent())||void 0===He?void 0:He.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:ve})}_removeServiceInstance(Q,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Q).clearInstance(ve)}_addComponent(Q){(0,O._addComponent)(this._delegate,Q)}_addOrOverwriteComponent(Q){(0,O._addOrOverwriteComponent)(this._delegate,Q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function De(){const Ce=function le(Ce){const Q={},ve={__esModule:!0,initializeApp:function we(K,Ue={}){const Ke=O.initializeApp(K,Ue);if((0,p.r3)(Q,Ke.name))return Q[Ke.name];const J=new Ce(Ke,ve);return Q[Ke.name]=J,J},app:Ve,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ue(K){const Ue=K.name,Ke=Ue.replace("-compat","");if(O._registerComponent(K)&&"PUBLIC"===K.type){const J=(Y=Ve())=>{if("function"!=typeof Y[Ke])throw _e.create("invalid-app-argument",{appName:Ue});return Y[Ke]()};void 0!==K.serviceProps&&(0,p.ZB)(J,K.serviceProps),ve[Ke]=J,Ce.prototype[Ke]=function(...Y){return this._getService.bind(this,Ue).apply(this,K.multipleInstances?Y:[])}}return"PUBLIC"===K.type?ve[Ke]:null},removeApp:function He(K){delete Q[K]},useAsService:function ke(K,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:O}};function Ve(K){if(!(0,p.r3)(Q,K=K||O._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:K});return Q[K]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function me(){return Object.keys(Q).map(K=>Q[K])}}),Ve.App=Ce,ve}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Q(ve){(0,p.ZB)(Ce,ve)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ce}(),j=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function be(Ce){(0,O.registerVersion)("@firebase/app-compat","0.1.23",Ce)}()},9681:(ut,Ie,F)=>{F.r(Ie),F.d(Ie,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>mi,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Tr,_addOrOverwriteComponent:()=>fn,_apps:()=>Ne,_clearComponents:()=>ln,_components:()=>qt,_getProvider:()=>Lt,_registerComponent:()=>Ut,_removeServiceInstance:()=>jt,deleteApp:()=>xs,getApp:()=>Jr,getApps:()=>dr,initializeApp:()=>Br,onLog:()=>Cn,registerVersion:()=>Ar,setLogLevel:()=>Zt});var p=F(5861),L=F(4859),O=F(1877),ae=F(2090);class ge{constructor(de){this.container=de}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function ye(Pe){const de=Pe.getComponent();return"VERSION"===(null==de?void 0:de.type)}(We)){const nt=We.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(We=>We).join(" ")}}const _e="@firebase/app",De=new O.Yd("@firebase/app"),Bt="[DEFAULT]",Gt={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ne=new Map,qt=new Map;function Tr(Pe,de){try{Pe.container.addComponent(de)}catch(We){De.debug(`Component ${de.name} failed to register with FirebaseApp ${Pe.name}`,We)}}function fn(Pe,de){Pe.container.addOrOverwriteComponent(de)}function Ut(Pe){const de=Pe.name;if(qt.has(de))return De.debug(`There were multiple attempts to register component ${de}.`),!1;qt.set(de,Pe);for(const We of Ne.values())Tr(We,Pe);return!0}function Lt(Pe,de){const We=Pe.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Pe.container.getProvider(de)}function jt(Pe,de,We=Bt){Lt(Pe,de).clearInstance(We)}function ln(){qt.clear()}const cr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class er{constructor(de,We,nt){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const mi="9.7.0";function Br(Pe,de={}){"object"!=typeof de&&(de={name:de});const We=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},de),nt=We.name;if("string"!=typeof nt||!nt)throw cr.create("bad-app-name",{appName:String(nt)});const Dt=Ne.get(nt);if(Dt){if((0,ae.vZ)(Pe,Dt.options)&&(0,ae.vZ)(We,Dt.config))return Dt;throw cr.create("duplicate-app",{appName:nt})}const It=new L.H0(nt);for(const P of qt.values())It.addComponent(P);const U=new er(Pe,We,It);return Ne.set(nt,U),U}function Jr(Pe=Bt){const de=Ne.get(Pe);if(!de)throw cr.create("no-app",{appName:Pe});return de}function dr(){return Array.from(Ne.values())}function xs(Pe){return ot.apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(Pe){const de=Pe.name;Ne.has(de)&&(Ne.delete(de),yield Promise.all(Pe.container.getProviders().map(We=>We.delete())),Pe.isDeleted=!0)})).apply(this,arguments)}function Ar(Pe,de,We){var nt;let Dt=null!==(nt=Gt[Pe])&&void 0!==nt?nt:Pe;We&&(Dt+=`-${We}`);const It=Dt.match(/\s|\//),U=de.match(/\s|\//);if(It||U){const P=[`Unable to register library "${Dt}" with version "${de}":`];return It&&P.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),It&&U&&P.push("and"),U&&P.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void De.warn(P.join(" "))}Ut(new L.wA(`${Dt}-version`,()=>({library:Dt,version:de}),"VERSION"))}function Cn(Pe,de){if(null!==Pe&&"function"!=typeof Pe)throw cr.create("invalid-log-argument");(0,O.Am)(Pe,de)}function Zt(Pe){(0,O.Ub)(Pe)}const Tn="firebase-heartbeat-store";let _n=null;function hr(){return _n||(_n=(0,ae.X3)("firebase-heartbeat-database",1,(Pe,de)=>{0===de&&Pe.createObjectStore(Tn)}).catch(Pe=>{throw cr.create("storage-open",{originalErrorMessage:Pe.message})})),_n}function Ct(){return(Ct=(0,p.Z)(function*(Pe){try{return(yield hr()).transaction(Tn).objectStore(Tn).get(Xr(Pe))}catch(de){throw cr.create("storage-get",{originalErrorMessage:de.message})}})).apply(this,arguments)}function it(Pe,de){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(Pe,de){try{const nt=(yield hr()).transaction(Tn,"readwrite");return yield nt.objectStore(Tn).put(de,Xr(Pe)),nt.complete}catch(We){throw cr.create("storage-set",{originalErrorMessage:We.message})}})).apply(this,arguments)}function Xr(Pe){return`${Pe.name}!${Pe.options.appId}`}class _i{constructor(de){this.container=de,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new at(We),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var de=this;return(0,p.Z)(function*(){const nt=de.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=pn();if(null===de._heartbeatsCache&&(de._heartbeatsCache=yield de._heartbeatsCachePromise),de._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!de._heartbeatsCache.heartbeats.some(It=>It.date===Dt))return de._heartbeatsCache.heartbeats.push({date:Dt,agent:nt}),de._heartbeatsCache.heartbeats=de._heartbeatsCache.heartbeats.filter(It=>{const U=new Date(It.date).valueOf();return Date.now()-U<=2592e6}),de._storage.overwrite(de._heartbeatsCache)})()}getHeartbeatsHeader(){var de=this;return(0,p.Z)(function*(){if(null===de._heartbeatsCache&&(yield de._heartbeatsCachePromise),null===de._heartbeatsCache||0===de._heartbeatsCache.heartbeats.length)return"";const We=pn(),{heartbeatsToSend:nt,unsentEntries:Dt}=function Kt(Pe,de=1024){const We=[];let nt=Pe.slice();for(const Dt of Pe){const It=We.find(U=>U.agent===Dt.agent);if(It){if(It.dates.push(Dt.date),An(We)>de){It.dates.pop();break}}else if(We.push({agent:Dt.agent,dates:[Dt.date]}),An(We)>de){We.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:We,unsentEntries:nt}}(de._heartbeatsCache.heartbeats),It=(0,ae.L)(JSON.stringify({version:2,heartbeats:nt}));return de._heartbeatsCache.lastSentHeartbeatDate=We,Dt.length>0?(de._heartbeatsCache.heartbeats=Dt,yield de._storage.overwrite(de._heartbeatsCache)):(de._heartbeatsCache.heartbeats=[],de._storage.overwrite(de._heartbeatsCache)),It})()}}function pn(){return(new Date).toISOString().substring(0,10)}class at{constructor(de){this.app=de,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var de=this;return(0,p.Z)(function*(){return(yield de._canUseIndexedDBPromise)&&(yield function Rs(Pe){return Ct.apply(this,arguments)}(de.app))||{heartbeats:[]}})()}overwrite(de){var We=this;return(0,p.Z)(function*(){var nt;if(yield We._canUseIndexedDBPromise){const It=yield We.read();return it(We.app,{lastSentHeartbeatDate:null!==(nt=de.lastSentHeartbeatDate)&&void 0!==nt?nt:It.lastSentHeartbeatDate,heartbeats:de.heartbeats})}})()}add(de){var We=this;return(0,p.Z)(function*(){var nt;if(yield We._canUseIndexedDBPromise){const It=yield We.read();return it(We.app,{lastSentHeartbeatDate:null!==(nt=de.lastSentHeartbeatDate)&&void 0!==nt?nt:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...de.heartbeats]})}})()}}function An(Pe){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Pe})).length}!function kt(Pe){Ut(new L.wA("platform-logger",de=>new ge(de),"PRIVATE")),Ut(new L.wA("heartbeat",de=>new _i(de),"PRIVATE")),Ar(_e,"0.7.22",Pe),Ar(_e,"0.7.22","esm2017"),Ar("fire-js","")}("")},4859:(ut,Ie,F)=>{F.d(Ie,{H0:()=>le,wA:()=>O});var p=F(5861),L=F(2090);class O{constructor($,j,Z){this.name=$,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class ge{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const Z=new L.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:j});je&&Z.resolve(je)}catch(je){}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const Z=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),je=null!==(j=null==$?void 0:$.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(be){if(je)return null;throw be}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function _e(De){return"EAGER"===De.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,Z]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(j);try{const be=this.getOrInitializeService({instanceIdentifier:je});Z.resolve(be)}catch(be){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,Z=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[be,Re]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(be)&&Re.resolve(je);return je}onInit($,j){var Z;const je=this.normalizeInstanceIdentifier(j),be=null!==(Z=this.onInitCallbacks.get(je))&&void 0!==Z?Z:new Set;be.add($),this.onInitCallbacks.set(je,be);const Re=this.instances.get(je);return Re&&$(Re,je),()=>{be.delete($)}}invokeOnInitCallbacks($,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const je of Z)try{je($,j)}catch(be){}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let Z=this.instances.get($);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(De=$,De===ae?void 0:De),options:j}),this.instances.set($,Z),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(Z,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Z)}catch(je){}var De;return Z||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new ge($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ie,F)=>{F.d(Ie,{Am:()=>De,Ub:()=>le,Yd:()=>_e,in:()=>L});const p=[];var L=(()=>{return($=L||(L={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",L;var $})();const O={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},ae=L.INFO,ge={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},ye=($,j,...Z)=>{if(j<$.logLevel)return;const je=(new Date).toISOString(),be=ge[j];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[be](`[${je}]  ${$.name}:`,...Z)};class _e{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in L))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...j),this._logHandler(this,L.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...j),this._logHandler(this,L.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,L.INFO,...j),this._logHandler(this,L.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,L.WARN,...j),this._logHandler(this,L.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...j),this._logHandler(this,L.ERROR,...j)}}function le($){p.forEach(j=>{j.setLogLevel($)})}function De($,j){for(const Z of p){let je=null;j&&j.level&&(je=O[j.level]),Z.userLogHandler=null===$?null:(be,Re,...Ce)=>{const Q=Ce.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(He){return null}}).filter(ve=>ve).join(" ");Re>=(null!=je?je:be.logLevel)&&$({level:L[Re].toLowerCase(),message:Q,args:Ce,type:be.name})}}}},5861:(ut,Ie,F)=>{function p(O,ae,ge,ye,_e,le,De){try{var $=O[le](De),j=$.value}catch(Z){return void ge(Z)}$.done?ae(j):Promise.resolve(j).then(ye,_e)}function L(O){return function(){var ae=this,ge=arguments;return new Promise(function(ye,_e){var le=O.apply(ae,ge);function De(j){p(le,ye,_e,De,$,"next",j)}function $(j){p(le,ye,_e,De,$,"throw",j)}De(void 0)})}}F.d(Ie,{Z:()=>L})}},ut=>{ut(ut.s=1654)}]);